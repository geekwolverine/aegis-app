{"version":3,"sources":["webpack://microlib-example/./src/services/address-service.js","webpack://microlib-example/./src/services/event-bus.js","webpack://microlib-example/./src/services/index.js","webpack://microlib-example/./src/services/inventory-service.js","webpack://microlib-example/./src/services/payment-service.js","webpack://microlib-example/./src/services/shipping-service.js"],"names":["uuid","require","SmartyStreetsSDK","SmartyStreetsCore","core","Lookup","usStreet","disabled","process","env","SMARTY_DISABLED","authId","SMARTY_AUTH_ID","authToken","SMARTY_AUTH_TOKEN","credentials","StaticCredentials","client","buildClient","Address","validateAddress","address","console","log","lookup","inputId","street","maxCandidates","send","response","Error","candidate","lookups","result","validatedAddress","deliveryLine1","deliveryLine2","lastLine","join","error","message","_notify","notify","Event","_listen","listen","model","EventBus","topic","args","options","Payment","authorizePayment","id","amount","source_id","customer_id","autocomplete","currency","payload","idempotency_key","amount_money","location_id","reference_id","note","app_fee_money","completePayment","orderNo","refundPayment","createEventMessage","requester","service","type","name","data","eventSource","eventTarget","eventType","eventName","eventTime","Date","getTime","eventUuid","eventData","createCommandEvent","commandName","commandResp","commandArgs","Shipping","serviceName","shipOrder","shipTo","shipFrom","lineItems","signature","externalId","respondOn","trackShipment","shipmentId","trackingId","verifyDelivery","returnShipment","getPayload","func","event","payloads","trackingStatus","proofOfDelivery","getProperty","key"],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;;;;;AAEO,IAAMC,OAAO,GAAG;AACrB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQC,kBAVe,4BAWnBC,EAXmB,EAYnBC,MAZmB,EAanBC,SAbmB,EAcnBC,WAdmB,EAiBnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFAC,0BAEA,0EAFe,KAEf;AADAC,sBACA,0EADW,KACX;AACMC,qBADN,GACgB;AACdC,+BAAe,EAAEP,EADH;AAEdQ,4BAAY,EAAE;AACZP,wBAAM,EAANA,MADY;AAEZI,0BAAQ,EAARA;AAFY,iBAFA;AAMdH,yBAAS,EAATA,SANc;AAOdE,4BAAY,EAAZA,YAPc;AAQdD,2BAAW,EAAXA,WARc;AASdM,2BAAW,EAAE,eATC;AAUdC,4BAAY,EAAE,QAVA;AAWdC,oBAAI,EAAE,mBAXQ;AAYdC,6BAAa,EAAE;AACbX,wBAAM,EAAE,EADK;AAEbI,0BAAQ,EAAE;AAFG;AAZD,eADhB;AAkBA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAvDI,+CA6DO,MA7DP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8DD,GA/EoB;;AAiFrB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"732.js","sourcesContent":["'use strict'\n\nconst uuid = require('../domain/utils').uuid\nconst SmartyStreetsSDK = require('smartystreets-javascript-sdk')\n\nconst SmartyStreetsCore = SmartyStreetsSDK.core\nconst Lookup = SmartyStreetsSDK.usStreet.Lookup\n\n// for Server-to-server requests, use this code:\nconst disabled = process.env.SMARTY_DISABLED || false\nconst authId = process.env.SMARTY_AUTH_ID\nconst authToken = process.env.SMARTY_AUTH_TOKEN\nconst credentials = new SmartyStreetsCore.StaticCredentials(authId, authToken)\n\nconst client = SmartyStreetsCore.buildClient.usStreet(credentials)\n\n/**\n * @typedef {{function(address):Promise<string>}} Address\n */\nexport const Address = {\n  // Documentation for input fields can be found at:\n  // https://smartystreets.com/docs/us-street-api#input-fields\n\n  async validateAddress (address) {\n    console.log(`REAL validating address...${address}`)\n\n    if (!address) {\n      console.log('no address')\n      return\n    }\n\n    if (disabled) {\n      console.log('address service disabled')\n      return address\n    }\n\n    try {\n      let lookup = new Lookup()\n      lookup.inputId = uuid()\n      lookup.street = address\n      lookup.maxCandidates = 1\n\n      let response\n      try {\n        response = await client.send(lookup)\n      } catch (error) {\n        throw new Error(error)\n      }\n\n      const candidate = response.lookups[0].result[0]\n      if (!candidate) {\n        throw new Error('invalid address')\n      }\n\n      const validatedAddress = [\n        candidate.deliveryLine1,\n        candidate.deliveryLine2,\n        candidate.lastLine\n      ].join(' ')\n\n      console.log(`address: ${validatedAddress}`)\n\n      if (!validatedAddress) {\n        throw new Error('invalid address')\n      }\n      return validatedAddress\n    } catch (error) {\n      console.error(error)\n      throw new Error('Address service error', error.message)\n    }\n  }\n}\n","\"use strict\";\n\n// Build EventBus client for host\nimport { listen, notify } from \"../adapters\";\nimport { Event } from \"./event-service\";\n\nconst _notify = notify(Event);\nconst _listen = listen(Event);\nconst model = { listen: _listen };\n\nexport const EventBus = {\n  notify(topic, message) {\n    return _notify({ model, args: [topic, message] });\n  },\n  listen(options) {\n    return _listen({ model, args: [options] });\n  },\n};\n","export * from \"./address-service\";\nexport * from \"./event-service\";\nexport * from \"./inventory-service\";\nexport * from \"./payment-service\";\nexport * from \"./shipping-service\";\nexport * from \"./event-bus\";","\"use strict\";\n\n// JSON.stringify({\n//     eventType: \"Command\",\n//     eventTime: new Date().toUTCString(),\n//     eventSource: \"orderService\",\n//     eventData: {\n//       replyChannel: \"orderChannel\",\n//       commandName: \"pickOrder\",\n//       commandArgs: {\n//       }\n","\"use strict\";\n\n/**\n * @callback authorizePaymentType\n * @param {string} id\n * @param {number} amount\n * @param {string} source_id\n * @param {string} customer_id\n * @param {boolean} [autocomplete]\n * @returns {Promise<string>}\n */\n\n/**\n * @typedef PaymentService\n * @property {authorizePaymentType} authorizePayment\n * @property {function()} completePayment\n * @property {function()} refundPayment\n */\n\n// import { Client, Environment, ApiError } from \"square\";\n\n// const client = new Client({\n//   environment: Environment.Sandbox,\n//   accessToken: process.env.SQUARE_ACCESS_TOKEN,\n// });\n\nexport const Payment = {\n  /**\n   * @type {authorizePaymentType}\n   * @param {*} id\n   * @param {*} amount\n   * @param {*} source_id\n   * @param {*} customer_id\n   * @param {*} autocomplete\n   * @param {*} currency\n   */\n  async authorizePayment(\n    id,\n    amount,\n    source_id,\n    customer_id,\n    autocomplete = false,\n    currency = \"USD\"\n  ) {\n    const payload = {\n      idempotency_key: id,\n      amount_money: {\n        amount,\n        currency,\n      },\n      source_id,\n      autocomplete,\n      customer_id,\n      location_id: \"XK3DBG77NJBFX\",\n      reference_id: \"123456\",\n      note: \"Brief description\",\n      app_fee_money: {\n        amount: 10,\n        currency: \"USD\",\n      },\n    };\n    /*\n    const bodyAmountMoney = {};\n    bodyAmountMoney.amount = 200;\n    bodyAmountMoney.currency = \"USD\";\n\n    const bodyTipMoney = {};\n    bodyTipMoney.amount = 198;\n    bodyTipMoney.currency = \"CHF\";\n\n    const bodyAppFeeMoney = {};\n    bodyAppFeeMoney.amount = 10;\n    bodyAppFeeMoney.currency = \"USD\";\n\n    const body = {\n      sourceId: \"ccof:uIbfJXhXETSP197M3GB\",\n      idempotencyKey: \"4935a656-a929-4792-b97c-8848be85c27c\",\n      amountMoney: bodyAmountMoney,\n    };\n\n    body.tipMoney = bodyTipMoney;\n    body.appFeeMoney = bodyAppFeeMoney;\n    body.delayDuration = \"delay_duration6\";\n    body.autocomplete = true;\n    body.orderId = \"order_id0\";\n    body.customerId = \"VDKXEEKPJN48QDG3BGGFAK05P8\";\n    body.locationId = \"XK3DBG77NJBFX\";\n    body.referenceId = \"123456\";\n    body.note = \"Brief description\";\n\n    // try {\n    //   const {\n    //     result,\n    //     ...httpResponse\n    //   } = await client.paymentsApi.createPayment(body);\n    //   // Get more response info...\n    //   // const { statusCode, headers } = httpResponse;\n    // } catch (error) {\n    //   if (error instanceof ApiError) {\n    //     const errors = error.result;\n    //     // const { statusCode, headers } = error;\n    //   }\n    // }\n    */\n    return \"1234\";\n  },\n\n  /*\n  const response ={\n  \"payment\": {\n    \"id\": \"GQTFp1ZlXdpoW4o6eGiZhbjosiDFf\",\n    \"created_at\": \"2019-07-10T13:23:49.154Z\",\n    \"updated_at\": \"2019-07-10T13:23:49.446Z\",\n    \"amount_money\": {\n      \"amount\": 200,\n      \"currency\": \"USD\"\n    },\n    \"app_fee_money\": {\n      \"amount\": 10,\n      \"currency\": \"USD\"\n    },\n    \"total_money\": {\n      \"amount\": 200,\n      \"currency\": \"USD\"\n    },\n    \"status\": \"COMPLETED\",\n    \"source_type\": \"CARD\",\n    \"card_details\": {\n      \"status\": \"CAPTURED\",\n      \"card\": {\n        \"card_brand\": \"VISA\",\n        \"last_4\": \"1111\",\n        \"exp_month\": 7,\n        \"exp_year\": 2026,\n        \"fingerprint\": \"sq-1-TpmjbNBMFdibiIjpQI5LiRgNUBC7u1689i0TgHjnlyHEWYB7tnn-K4QbW4ttvtaqXw\",\n        \"card_type\": \"DEBIT\",\n        \"prepaid_type\": \"PREPAID\",\n        \"bin\": \"411111\"\n      },\n      \"entry_method\": \"ON_FILE\",\n      \"cvv_status\": \"CVV_ACCEPTED\",\n      \"avs_status\": \"AVS_ACCEPTED\",\n      \"auth_result_code\": \"nsAyY2\",\n      \"statement_description\": \"SQ *MY MERCHANT\"\n    },\n    \"location_id\": \"XTI0H92143A39\",\n    \"order_id\": \"m2Hr8Hk8A3CTyQQ1k4ynExg92tO3\",\n    \"reference_id\": \"123456\",\n    \"note\": \"Brief description\",\n    \"customer_id\": \"RDX9Z4XTIZR7MRZJUXNY9HUK6I\",\n    \"receipt_number\": \"GQTF\",\n    \"receipt_url\": \"https://squareup.com/receipt/preview/GQTFp1ZlXdpoW4o6eGiZhbjosiDFf\"\n  }\n}\n  /*\n{\n  \"errors\": [\n    {\n      \"code\": \"VALUE_EMPTY\",\n      \"detail\": \"Field must not be blank\",\n      \"field\": \"source_id\",\n      \"category\": \"INVALID_REQUEST_ERROR\"\n    },\n    {\n      \"code\": \"VALUE_EMPTY\",\n      \"detail\": \"Field must not be blank\",\n      \"field\": \"idempotency_key\",\n      \"category\": \"INVALID_REQUEST_ERROR\"\n    },\n    {\n      \"code\": \"MISSING_REQUIRED_PARAMETER\",\n      \"detail\": \"Field must be set\",\n      \"field\": \"amount_money\",\n      \"category\": \"INVALID_REQUEST_ERROR\"\n    }\n  ]\n}\n  */\n\n  async completePayment(model) {\n    console.log(\"REAL completing payment: %s\", model.orderNo);\n    return \"1234\";\n  },\n\n  async refundPayment(model) {\n    console.log(\"REAL refunding payment: %s\", model.orderNo);\n  },\n};\n","\"use strict\";\n\n/**\n * @typedef {import('../adapters/event-adapter').EventMessage} EventMessage\n */\n\n/**\n * @typedef {import('../adapters/event-adapter').CommandEvent} CommandEvent\n */\n\n/**\n * @callback shipOrder\n * @param {string} shipTo\n * @param {string} shipFrom\n * @param {string} lineItems\n * @param {string} signature\n * @param {string} externalId\n * @param {string} requester\n * @param {string} respondOn\n * @returns {EventMessage}\n */\n\n/**\n * @callback trackShipment\n * @param {string} shipmentId\n * @param {string} externalId\n * @param {string} requester\n * @param {string} respondOn\n * @returns {EventMessage}\n */\n\n/**\n * @typedef {string} functionName\n */\n\n/**\n * @typedef {Object} shippingService formats and parses shipping event messages\n * @property {string} serviceName - programmatic service name in eventSource/Target\n * @property {string} topic - event topic \"shippingChannel\" when sending messasges\n * @property {shipOrder} shipOrder - format event message requesting shipping label and pickup of order\n * @property {trackShipment} trackShipment - report on location/status of parcel\n * @property {function():EventMessage} verifyDelivery - ensure customer recieved parcel\n * @property {function():EventMessage} returnShipment - return to sender if refunding\n * @property {function(functionName,EventMessage):{[key]:string}} getPayload - extract payload\n */\n\nfunction createEventMessage({ requester, service, type, name, id, data }) {\n  return {\n    eventSource: requester,\n    eventTarget: service,\n    eventType: type,\n    eventName: name,\n    eventTime: new Date().getTime(),\n    eventUuid: id,\n    eventData: data,\n  };\n}\n\nfunction createCommandEvent(name, topic, args) {\n  return {\n    commandName: name,\n    commandResp: topic,\n    commandArgs: { ...args },\n  };\n}\n\n/**\n * Shipping service events\n * @type {shippingService}\n */\nexport const Shipping = {\n  serviceName: \"shippingService\",\n  topic: \"shippingChannel\",\n\n  /**\n   *\n   * @param {*} param0\n   * @returns {shipMessage}\n   */\n  shipOrder({\n    shipTo,\n    shipFrom,\n    lineItems,\n    signature,\n    externalId,\n    requester,\n    respondOn,\n  }) {\n    return createEventMessage({\n      requester,\n      service: this.serviceName,\n      type: \"command\",\n      name: this.shipOrder.name,\n      id: externalId,\n      data: createCommandEvent(this.shipOrder.name, respondOn, {\n        shipTo,\n        shipFrom,\n        lineItems,\n        signature,\n        externalId,\n      }),\n    });\n  },\n\n  /**\n   *\n   * @param {*} param0\n   * @returns {EventMessage}\n   */\n  trackShipment({ externalId, shipmentId, trackingId, requester, respondOn }) {\n    return createEventMessage({\n      requester,\n      service: this.serviceName,\n      type: \"command\",\n      name: this.trackShipment.name,\n      id: externalId,\n      data: createCommandEvent(this.trackShipment.name, respondOn, {\n        externalId,\n        shipmentId,\n        trackingId,\n      }),\n    });\n  },\n\n  /**\n   *\n   * @param {*} param0\n   * @returns {EventMessage}\n   */\n  verifyDelivery({ requester, respondOn, trackingId, externalId }) {\n    return createEventMessage({\n      requester,\n      service: this.serviceName,\n      type: \"command\",\n      name: this.verifyDelivery.name,\n      id: externalId,\n      data: createCommandEvent(this.verifyDelivery.name, respondOn, {\n        externalId,\n        trackingId,\n      }),\n    });\n  },\n\n  returnShipment({ requester, respondOn, shipmentId, externalId }) {\n    return createEventMessage({\n      requester,\n      service: this.serviceName,\n      type: \"command\",\n      id: externalId,\n      name: this.returnShipment.name,\n      data: createCommandEvent(this.returnShipment, respondOn, {\n        shipmentId,\n        externalId,\n      }),\n    });\n  },\n\n  getPayload(func, event) {\n    const payloads = {\n      [this.shipOrder.name]: {\n        shipmentId: event.eventData.shipmentId,\n      },\n      [this.trackShipment.name]: {\n        trackingId: event.eventData.trackingId,\n        trackingStatus: event.eventData.trackingStatus,\n      },\n      [this.verifyDelivery.name]: {\n        proofOfDelivery: event.eventData.proofOfDelivery,\n      },\n    };\n    return payloads[func];\n  },\n\n  getProperty(event, key) {\n    return event.eventData[key];\n  },\n};\n"],"sourceRoot":""}