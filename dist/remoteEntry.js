var apps;!function(){var e,t,r={23889:function(e,t,r){e.exports=r(92397).default},92397:function(e,t,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=m;var n,s=(n=r(29367))&&n.__esModule?n:{default:n},i="axios-retry";function a(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,s.default)(e)}var c=["get","head","options"],u=c.concat(["put","delete"]);function d(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function p(e){return!!e.config&&d(e)&&-1!==u.indexOf(e.config.method)}function l(e){return a(e)||p(e)}function h(){return 0}function f(e){var t=e[i]||{};return t.retryCount=t.retryCount||0,e[i]=t,t}function m(e,t){e.interceptors.request.use((function(e){return f(e).lastRequestTime=Date.now(),e})),e.interceptors.response.use(null,(async function(r){var n=r.config;if(!n)return Promise.reject(r);var s=function(e,t){return Object.assign({},t,e[i])}(n,t),a=s.retries,c=void 0===a?3:a,u=s.retryCondition,d=void 0===u?l:u,p=s.retryDelay,m=void 0===p?h:p,g=s.shouldResetTimeout,y=void 0!==g&&g,I=f(n);if(await async function(e,t,r,n){var s=r.retryCount<e&&t(n);if("object"===(void 0===s?"undefined":o(s)))try{return await s,!0}catch(e){return!1}return s}(c,d,I,r)){I.retryCount+=1;var w=m(I.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!y&&n.timeout&&I.lastRequestTime){var T=Date.now()-I.lastRequestTime;n.timeout=Math.max(n.timeout-T-w,1)}return n.transformRequest=[function(e){return e}],new Promise((function(t){return setTimeout((function(){return t(e(n))}),w)}))}return Promise.reject(r)}))}m.isNetworkError=a,m.isSafeRequestError=function(e){return!!e.config&&d(e)&&-1!==c.indexOf(e.config.method)},m.isIdempotentRequestError=p,m.isNetworkOrIdempotentRequestError=l,m.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e),r=.2*t*Math.random();return t+r},m.isRetryableError=d},9669:function(e,t,r){e.exports=r(51609)},47970:function(e,t,r){"use strict";var o=r(64867),n=r(36026),s=r(94097),i=r(15327),a=r(13685),c=r(95687),u=r(30938).http,d=r(30938).https,p=r(57310),l=r(59796),h=r(88593),f=r(85061),m=r(80481),g=/https:?/;function y(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var o=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+o}e.beforeRedirect=function(e){e.headers.host=e.host,y(e,t,e.href)}}e.exports=function(e){return new Promise((function(t,r){var I=function(e){t(e)},w=function(e){r(e)},T=e.data,b=e.headers;if("User-Agent"in b||"user-agent"in b?b["User-Agent"]||b["user-agent"]||(delete b["User-Agent"],delete b["user-agent"]):b["User-Agent"]="axios/"+h.version,T&&!o.isStream(T)){if(Buffer.isBuffer(T));else if(o.isArrayBuffer(T))T=Buffer.from(new Uint8Array(T));else{if(!o.isString(T))return w(f("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));T=Buffer.from(T,"utf-8")}b["Content-Length"]=T.length}var E=void 0;e.auth&&(E=(e.auth.username||"")+":"+(e.auth.password||""));var S=s(e.baseURL,e.url),C=p.parse(S),A=C.protocol||"http:";if(!E&&C.auth){var v=C.auth.split(":");E=(v[0]||"")+":"+(v[1]||"")}E&&delete b.Authorization;var O=g.test(A),x=O?e.httpsAgent:e.httpAgent,R={path:i(C.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:b,agent:x,agents:{http:e.httpAgent,https:e.httpsAgent},auth:E};e.socketPath?R.socketPath=e.socketPath:(R.hostname=C.hostname,R.port=C.port);var _,N=e.proxy;if(!N&&!1!==N){var k=A.slice(0,-1)+"_proxy",B=process.env[k]||process.env[k.toUpperCase()];if(B){var P=p.parse(B),L=process.env.no_proxy||process.env.NO_PROXY,D=!0;if(L&&(D=!L.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||"."===e[0]&&C.hostname.substr(C.hostname.length-e.length)===e||C.hostname===e)}))),D&&(N={host:P.hostname,port:P.port,protocol:P.protocol},P.auth)){var M=P.auth.split(":");N.auth={username:M[0],password:M[1]}}}}N&&(R.headers.host=C.hostname+(C.port?":"+C.port:""),y(R,N,A+"//"+C.hostname+(C.port?":"+C.port:"")+R.path));var q=O&&(!N||g.test(N.protocol));e.transport?_=e.transport:0===e.maxRedirects?_=q?c:a:(e.maxRedirects&&(R.maxRedirects=e.maxRedirects),_=q?d:u),e.maxBodyLength>-1&&(R.maxBodyLength=e.maxBodyLength);var U=_.request(R,(function(t){if(!U.aborted){var r=t,s=t.req||U;if(204!==t.statusCode&&"HEAD"!==s.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(l.createUnzip()),delete t.headers["content-encoding"]}var i={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:s};if("stream"===e.responseType)i.data=r,n(I,w,i);else{var a=[],c=0;r.on("data",(function(t){a.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(r.destroy(),w(f("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,s)))})),r.on("error",(function(t){U.aborted||w(m(t,e,null,s))})),r.on("end",(function(){var t=Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=o.stripBOM(t))),i.data=t,n(I,w,i)}))}}}));if(U.on("error",(function(t){U.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||w(m(t,e,null,U))})),e.timeout){var F=parseInt(e.timeout,10);if(isNaN(F))return void w(f("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",U));U.setTimeout(F,(function(){U.abort(),w(f("timeout of "+F+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U))}))}e.cancelToken&&e.cancelToken.promise.then((function(e){U.aborted||(U.abort(),w(e))})),o.isStream(T)?T.on("error",(function(t){w(m(t,e,null,U))})).pipe(U):U.end(T)}))}},55448:function(e,t,r){"use strict";var o=r(64867),n=r(36026),s=r(4372),i=r(15327),a=r(94097),c=r(84109),u=r(67985),d=r(85061);e.exports=function(e){return new Promise((function(t,r){var p=e.data,l=e.headers,h=e.responseType;o.isFormData(p)&&delete l["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.Authorization="Basic "+btoa(m+":"+g)}var y=a(e.baseURL,e.url);function I(){if(f){var o="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,s={data:h&&"text"!==h&&"json"!==h?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:o,config:e,request:f};n(t,r,s),f=null}}if(f.open(e.method.toUpperCase(),i(y,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=I:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(I)},f.onabort=function(){f&&(r(d("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){r(d("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(d(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},o.isStandardBrowserEnv()){var w=(e.withCredentials||u(y))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;w&&(l[e.xsrfHeaderName]=w)}"setRequestHeader"in f&&o.forEach(l,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete l[t]:f.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),h&&"json"!==h&&(f.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),r(e),f=null)})),p||(p=null),f.send(p)}))}},51609:function(e,t,r){"use strict";var o=r(64867),n=r(91849),s=r(30321),i=r(47185);function a(e){var t=new s(e),r=n(s.prototype.request,t);return o.extend(r,s.prototype,t),o.extend(r,t),r}var c=a(r(45655));c.Axios=s,c.create=function(e){return a(i(c.defaults,e))},c.Cancel=r(65263),c.CancelToken=r(14972),c.isCancel=r(26502),c.all=function(e){return Promise.all(e)},c.spread=r(8713),c.isAxiosError=r(16268),e.exports=c,e.exports.default=c},65263:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:function(e,t,r){"use strict";var o=r(65263);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new o(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},26502:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:function(e,t,r){"use strict";var o=r(64867),n=r(15327),s=r(80782),i=r(13572),a=r(47185),c=r(54875),u=c.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var r=[],o=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var n,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!o){var d=[i,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(s),n=Promise.resolve(e);d.length;)n=n.then(d.shift(),d.shift());return n}for(var p=e;r.length;){var l=r.shift(),h=r.shift();try{p=l(p)}catch(e){h(e);break}}try{n=i(p)}catch(e){return Promise.reject(e)}for(;s.length;)n=n.then(s.shift(),s.shift());return n},d.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),o.forEach(["post","put","patch"],(function(e){d.prototype[e]=function(t,r,o){return this.request(a(o||{},{method:e,url:t,data:r}))}})),e.exports=d},80782:function(e,t,r){"use strict";var o=r(64867);function n(){this.handlers=[]}n.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},94097:function(e,t,r){"use strict";var o=r(91793),n=r(7303);e.exports=function(e,t){return e&&!o(t)?n(e,t):t}},85061:function(e,t,r){"use strict";var o=r(80481);e.exports=function(e,t,r,n,s){var i=new Error(e);return o(i,t,r,n,s)}},13572:function(e,t,r){"use strict";var o=r(64867),n=r(18527),s=r(26502),i=r(45655);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=n.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return a(e),t.data=n.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(a(e),t&&t.response&&(t.response.data=n.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:function(e){"use strict";e.exports=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},47185:function(e,t,r){"use strict";var o=r(64867);e.exports=function(e,t){t=t||{};var r={},n=["url","method","data"],s=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return o.isPlainObject(e)&&o.isPlainObject(t)?o.merge(e,t):o.isPlainObject(t)?o.merge({},t):o.isArray(t)?t.slice():t}function u(n){o.isUndefined(t[n])?o.isUndefined(e[n])||(r[n]=c(void 0,e[n])):r[n]=c(e[n],t[n])}o.forEach(n,(function(e){o.isUndefined(t[e])||(r[e]=c(void 0,t[e]))})),o.forEach(s,u),o.forEach(i,(function(n){o.isUndefined(t[n])?o.isUndefined(e[n])||(r[n]=c(void 0,e[n])):r[n]=c(void 0,t[n])})),o.forEach(a,(function(o){o in t?r[o]=c(e[o],t[o]):o in e&&(r[o]=c(void 0,e[o]))}));var d=n.concat(s).concat(i).concat(a),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===d.indexOf(e)}));return o.forEach(p,u),r}},36026:function(e,t,r){"use strict";var o=r(85061);e.exports=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},18527:function(e,t,r){"use strict";var o=r(64867),n=r(45655);e.exports=function(e,t,r){var s=this||n;return o.forEach(r,(function(r){e=r.call(s,e,t)})),e}},45655:function(e,t,r){"use strict";var o=r(64867),n=r(16016),s=r(80481),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?c=r(55448):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(c=r(47970)),c),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,r){if(o.isString(e))try{return(0,JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){u.headers[e]=o.merge(i)})),e.exports=u},91849:function(e){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}}},15327:function(e,t,r){"use strict";var o=r(64867);function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(o.isURLSearchParams(t))s=t.toString();else{var i=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+"="+n(e))})))})),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:function(e,t,r){"use strict";var o=r(64867);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,r,n,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),o.isString(n)&&a.push("path="+n),o.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},16268:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},67985:function(e,t,r){"use strict";var o=r(64867);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=o.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},16016:function(e,t,r){"use strict";var o=r(64867);e.exports=function(e,t){o.forEach(e,(function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])}))}},84109:function(e,t,r){"use strict";var o=r(64867),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,i={};return e?(o.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=o.trim(e.substr(0,s)).toLowerCase(),r=o.trim(e.substr(s+1)),t){if(i[t]&&n.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i}},8713:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:function(e,t,r){"use strict";var o=r(88593),n={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){n[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var s={},i=o.version.split(".");function a(e,t){for(var r=t?t.split("."):i,o=e.split("."),n=0;n<3;n++){if(r[n]>o[n])return!0;if(r[n]<o[n])return!1}return!1}n.transitional=function(e,t,r){var n=t&&a(t);function i(e,t){return"[Axios v"+o.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,a){if(!1===e)throw new Error(i(o," has been removed in "+t));return n&&!s[o]&&(s[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,a)}},e.exports={isOlderVersion:a,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var o=Object.keys(e),n=o.length;n-- >0;){var s=o[n],i=t[s];if(i){var a=e[s],c=void 0===a||i(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+s)}},validators:n}},64867:function(e,t,r){"use strict";var o=r(91849),n=Object.prototype.toString;function s(e){return"[object Array]"===n.call(e)}function i(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===n.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:c,isUndefined:i,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function r(r,o){c(t[o])&&c(r)?t[o]=e(t[o],r):c(r)?t[o]=e({},r):s(r)?t[o]=r.slice():t[o]=r}for(var o=0,n=arguments.length;o<n;o++)d(arguments[o],r);return t},extend:function(e,t,r){return d(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},59435:function(e){var t=1e3,r=60*t,o=60*r,n=24*o;function s(e,t,r,o){var n=t>=1.5*r;return Math.round(e/r)+" "+o+(n?"s":"")}e.exports=function(e,i){i=i||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*n;case"hours":case"hour":case"hrs":case"hr":case"h":return i*o;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===u&&isFinite(e))return i.long?(a=e,(c=Math.abs(a))>=n?s(a,c,n,"day"):c>=o?s(a,c,o,"hour"):c>=r?s(a,c,r,"minute"):c>=t?s(a,c,t,"second"):a+" ms"):function(e){var s=Math.abs(e);return s>=n?Math.round(e/n)+"d":s>=o?Math.round(e/o)+"h":s>=r?Math.round(e/r)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},11227:function(e,t,r){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let o=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(n=o))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(82447)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},82447:function(e,t,r){e.exports=function(e){function t(e){let r,n,s,i=null;function a(...e){if(!a.enabled)return;const o=a,n=Number(new Date),s=n-(r||n);o.diff=s,o.prev=r,o.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,n)=>{if("%%"===r)return"%";i++;const s=t.formatters[n];if("function"==typeof s){const t=e[i];r=s.call(o,t),e.splice(i,1),i--}return r})),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=o,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function o(e,r){const o=t(this.namespace+(void 0===r?":":r)+e);return o.log=this.log,o}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const o=("string"==typeof e?e:"").split(/[\s,]+/),n=o.length;for(r=0;r<n;r++)o[r]&&("-"===(e=o[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,o;for(r=0,o=t.skips.length;r<o;r++)if(t.skips[r].test(e))return!1;for(r=0,o=t.names.length;r<o;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(59435),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},15158:function(e,t,r){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(11227):e.exports=r(39)},39:function(e,t,r){const o=r(76224),n=r(73837);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let o=0;o<r.length;o++)e.inspectOpts[r[o]]=t.inspectOpts[r[o]]},t.log=function(...e){return process.stderr.write(n.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:o,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),s=`  ${n};1m${o} [0m`;r[0]=s+r[0].split("\n").join("\n"+s),r.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+o+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):o.isatty(process.stderr.fd)},t.destroy=n.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(92130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let o=process.env[t];return o=!!/^(yes|on|true|enabled)$/i.test(o)||!/^(no|off|false|disabled)$/i.test(o)&&("null"===o?null:Number(o)),e[r]=o,e}),{}),e.exports=r(82447)(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},22261:function(e,t,r){var o;e.exports=function(){if(!o){try{o=r(15158)("follow-redirects")}catch(e){}"function"!=typeof o&&(o=function(){})}o.apply(null,arguments)}},30938:function(e,t,r){var o=r(57310),n=o.URL,s=r(13685),i=r(95687),a=r(12781).Writable,c=r(39491),u=r(22261),d=["abort","aborted","connect","error","socket","timeout"],p=Object.create(null);d.forEach((function(e){p[e]=function(t,r,o){this._redirectable.emit(e,t,r,o)}}));var l=b("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),h=b("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),f=b("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),m=b("ERR_STREAM_WRITE_AFTER_END","write after end");function g(e,t){a.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var r=this;this._onNativeResponse=function(e){r._processResponse(e)},this._performRequest()}function y(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(s){var i=s+":",a=r[i]=e[s],d=t[s]=Object.create(a);Object.defineProperties(d,{request:{value:function(e,s,a){if("string"==typeof e){var d=e;try{e=w(new n(d))}catch(t){e=o.parse(d)}}else n&&e instanceof n?e=w(e):(a=s,s=e,e={protocol:i});return"function"==typeof s&&(a=s,s=null),(s=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,s)).nativeProtocols=r,c.equal(s.protocol,i,"protocol mismatch"),u("options",s),new g(s,a)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(e,t,r){var o=d.request(e,t,r);return o.end(),o},configurable:!0,enumerable:!0,writable:!0}})})),t}function I(){}function w(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}function T(e,t){var r;for(var o in t)e.test(o)&&(r=t[o],delete t[o]);return null==r?void 0:String(r).trim()}function b(e,t){function r(e){Error.captureStackTrace(this,this.constructor),e?(this.message=t+": "+e.message,this.cause=e):this.message=t}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r.prototype.code=e,r}function E(e){for(var t of d)e.removeListener(t,p[t]);e.on("error",I),e.abort()}g.prototype=Object.create(a.prototype),g.prototype.abort=function(){E(this._currentRequest),this.emit("abort")},g.prototype.write=function(e,t,r){if(this._ending)throw new m;if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new f),this.abort()):r&&r()},g.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var o=this,n=this._currentRequest;this.write(e,t,(function(){o._ended=!0,n.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},g.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},g.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},g.prototype.setTimeout=function(e,t){var r=this;function o(t){t.setTimeout(e),t.removeListener("timeout",t.destroy),t.addListener("timeout",t.destroy)}function n(t){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout((function(){r.emit("timeout"),s()}),e),o(t)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),t&&r.removeListener("timeout",t),r.socket||r._currentRequest.removeListener("socket",n)}return t&&this.on("timeout",t),this.socket?n(this.socket):this._currentRequest.once("socket",n),this.on("socket",o),this.on("abort",s),this.on("error",s),this.on("response",s),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){g.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(g.prototype,e,{get:function(){return this._currentRequest[e]}})})),g.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}},g.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.slice(0,-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var s of(n._redirectable=this,d))n.on(s,p[s]);if(this._currentUrl=/^\//.test(this._options.path)?o.format(this._options):this._currentUrl=this._options.path,this._isRedirect){var i=0,a=this,c=this._requestBodyBuffers;!function e(t){if(n===a._currentRequest)if(t)a.emit("error",t);else if(i<c.length){var r=c[i++];n.finished||n.write(r.data,r.encoding,e)}else a._ended&&n.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+e))},g.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var r=e.headers.location;if(!r||!1===this._options.followRedirects||t<300||t>=400)return e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),void(this._requestBodyBuffers=[]);if(E(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects)this.emit("error",new h);else{var n,s=this._options.beforeRedirect;s&&(n=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var i=this._options.method;((301===t||302===t)&&"POST"===this._options.method||303===t&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],T(/^content-/i,this._options.headers));var a,c=T(/^host$/i,this._options.headers),d=o.parse(this._currentUrl),p=c||d.host,f=/^\w+:/.test(r)?this._currentUrl:o.format(Object.assign(d,{host:p}));try{a=o.resolve(f,r)}catch(e){return void this.emit("error",new l(e))}u("redirecting to",a),this._isRedirect=!0;var m=o.parse(a);if(Object.assign(this._options,m),(m.protocol!==d.protocol&&"https:"!==m.protocol||m.host!==p&&!function(e,t){const r=e.length-t.length-1;return r>0&&"."===e[r]&&e.endsWith(t)}(m.host,p))&&T(/^(?:authorization|cookie)$/i,this._options.headers),"function"==typeof s){var g={headers:e.headers,statusCode:t},y={url:f,method:i,headers:n};try{s(this._options,g,y)}catch(e){return void this.emit("error",e)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(e){this.emit("error",new l(e))}}},e.exports=y({http:s,https:i}),e.exports.wrap=y},29367:function(e){"use strict";var t=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE","EHOSTUNREACH","EAI_AGAIN"],r=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];e.exports=function(e){return!e||!e.code||-1!==t.indexOf(e.code)||-1===r.indexOf(e.code)}},54552:function(e,t,r){const o=r(873),n=r(16996),s=r(737),i=r(88691),a=r(42972),c=r(75320),u=r(18279),d=r(9955),p=r(77666),l=r(13595),h=r(34517),f=r(98203),m=r(29879),{LEVELS:g}=r(10354);e.exports={Kafka:o,PartitionAssigners:n,AssignerProtocol:s,Partitioners:i,logLevel:g,CompressionTypes:a.Types,CompressionCodecs:a.Codecs,ResourceTypes:c,ConfigResourceTypes:u,AclResourceTypes:p,AclOperationTypes:l,AclPermissionTypes:h,ResourcePatternTypes:f,ConfigSource:d,...m}},55929:function(e,t,r){const o=r(99701),n=r(74358),s=r(86335),i=r(53163),a=r(40763),c=r(52190),{events:u,wrap:d,unwrap:p}=r(87881),{LEVELS:l}=r(10354),{KafkaJSNonRetriableError:h,KafkaJSDeleteGroupsError:f,KafkaJSBrokerNotFound:m,KafkaJSDeleteTopicRecordsError:g,KafkaJSAggregateError:y}=r(29879),{staleMetadata:I}=r(21701),w=r(18279),T=r(77666),b=r(13595),E=r(34517),S=r(98203),{EARLIEST_OFFSET:C,LATEST_OFFSET:A}=r(53904),{CONNECT:v,DISCONNECT:O}=u,{values:x,keys:R,entries:_}=Object,N=x(u),k=R(u).map((e=>`admin.events.${e}`)).join(", "),B=async(e,t)=>(await e.addTargetTopic(t),await e.refreshMetadataIfNecessary(),e.findTopicPartitionMetadata(t).map((({partitionId:e})=>e)).sort());e.exports=({logger:e,instrumentationEmitter:t,retry:r,cluster:R})=>{const P=e.namespace("Admin"),L=t||new c,D=async e=>{if(!e||"string"!=typeof e)throw new h(`Invalid topic ${e}`);return o(r)((async(t,r,o)=>{try{await R.addTargetTopic(e),await R.refreshMetadataIfNecessary();const t=R.findTopicPartitionMetadata(e),r=await R.fetchTopicsOffset([{topic:e,fromBeginning:!1,partitions:t.map((e=>({partition:e.partitionId})))}]),o=await R.fetchTopicsOffset([{topic:e,fromBeginning:!0,partitions:t.map((e=>({partition:e.partitionId})))}]),{partitions:n}=r.pop(),{partitions:s}=o.pop();return n.map((({partition:e,offset:t})=>({partition:e,offset:t,high:t,low:s.find((({partition:t})=>t===e)).offset})))}catch(e){if("UNKNOWN_TOPIC_OR_PARTITION"===e.type)throw await R.refreshMetadata(),e;t(e)}}))},M=async({groupId:t,topic:r,partitions:o})=>{if(!t)throw new h(`Invalid groupId ${t}`);if(!r)throw new h(`Invalid topic ${r}`);if(!o||0===o.length)throw new h("Invalid partitions");const n=a({logger:e.namespace("Admin",l.NOTHING),cluster:R,groupId:t});await n.subscribe({topic:r,fromBeginning:!0});const s=await n.describeGroup();if(!(e=>["Empty","Dead"].includes(e.state))(s))throw new h(`The consumer group must have no running instances, current state: ${s.state}`);return new Promise(((e,t)=>{n.on(n.events.FETCH,(async()=>n.stop().then(e).catch(t))),n.run({eachBatchAutoResolve:!1,eachBatch:async()=>!0}).catch(t),n.pause([{topic:r}]);for(const e of o)n.seek({topic:r,...e})}))},q=({resources:e,defaultBroker:t})=>i(e,(async({type:e,name:r})=>(e=>[w.BROKER,w.BROKER_LOGGER].includes(e))(e)?await R.findBroker({nodeId:String(r)}):t));return{connect:async()=>{await R.connect(),L.emit(v)},disconnect:async()=>{await R.disconnect(),L.emit(O)},listTopics:async()=>{const{topicMetadata:e}=await R.metadata();return e.map((e=>e.topic))},createTopics:async({topics:e,validateOnly:t,timeout:n,waitForLeaders:i=!0})=>{if(!e||!Array.isArray(e))throw new h(`Invalid topics array ${e}`);if(e.filter((({topic:e})=>"string"!=typeof e)).length>0)throw new h("Invalid topics array, the topic names have to be a valid string");const a=new Set(e.map((({topic:e})=>e)));if(a.size<e.length)throw new h("Invalid topics array, it cannot have multiple entries for the same topic");return o(r)((async(r,o,c)=>{try{await R.refreshMetadata();const r=await R.findControllerBroker();if(await r.createTopics({topics:e,validateOnly:t,timeout:n}),i){const e=Array.from(a.values());await((e,t={})=>s((async()=>{try{return await e()}catch(e){if("LEADER_NOT_AVAILABLE"!==e.type)throw e;return!1}}),t))((async()=>await r.metadata(e)),{delay:100,maxWait:n,timeoutMessage:"Timed out while waiting for topic leaders"})}return!0}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not create topics",{error:e.message,retryCount:o,retryTime:c}),e;if(e instanceof y&&e.errors.every((e=>"TOPIC_ALREADY_EXISTS"===e.type)))return!1;r(e)}}))},deleteTopics:async({topics:e,timeout:t})=>{if(!e||!Array.isArray(e))throw new h(`Invalid topics array ${e}`);if(e.filter((e=>"string"!=typeof e)).length>0)throw new h("Invalid topics array, the names must be a valid string");return o(r)((async(r,o,n)=>{try{await R.refreshMetadata();const r=await R.findControllerBroker();await r.deleteTopics({topics:e,timeout:t});for(const t of e)R.targetTopics.delete(t);await R.refreshMetadata()}catch(e){if(["NOT_CONTROLLER","UNKNOWN_TOPIC_OR_PARTITION"].includes(e.type))throw P.warn("Could not delete topics",{error:e.message,retryCount:o,retryTime:n}),e;"REQUEST_TIMED_OUT"===e.type&&P.error('Could not delete topics, check if "delete.topic.enable" is set to "true" (the default value is "false") or increase the timeout',{error:e.message,retryCount:o,retryTime:n}),r(e)}}))},createPartitions:async({topicPartitions:e,validateOnly:t,timeout:n})=>{if(!e||!Array.isArray(e))throw new h(`Invalid topic partitions array ${e}`);if(0===e.length)throw new h("Empty topic partitions array");if(e.filter((({topic:e})=>"string"!=typeof e)).length>0)throw new h("Invalid topic partitions array, the topic names have to be a valid string");if(new Set(e.map((({topic:e})=>e))).size<e.length)throw new h("Invalid topic partitions array, it cannot have multiple entries for the same topic");return o(r)((async(r,o,s)=>{try{await R.refreshMetadata();const r=await R.findControllerBroker();await r.createPartitions({topicPartitions:e,validateOnly:t,timeout:n})}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not create topics",{error:e.message,retryCount:o,retryTime:s}),e;r(e)}}))},getTopicMetadata:async e=>{const{topics:t}=e||{};t&&await Promise.all(t.map((async e=>{if(!e)throw new h(`Invalid topic ${e}`);try{await R.addTargetTopic(e)}catch(t){throw t.message=`Failed to add target topic ${e}: ${t.message}`,t}}))),await R.refreshMetadataIfNecessary();const r=t||[...R.targetTopics];return{topics:await Promise.all(r.map((async e=>({name:e,partitions:R.findTopicPartitionMetadata(e)}))))}},fetchTopicMetadata:async({topics:e=[]}={})=>(e&&e.forEach((e=>{if(!e||"string"!=typeof e)throw new h(`Invalid topic ${e}`)})),{topics:(await R.metadata({topics:e})).topicMetadata.map((e=>({name:e.topic,partitions:e.partitionMetadata})))}),describeCluster:async()=>{const{brokers:e,clusterId:t,controllerId:r}=await R.metadata({topics:[]});return{brokers:e.map((({nodeId:e,host:t,port:r})=>({nodeId:e,host:t,port:r}))),controller:null==r||-1===r?null:r,clusterId:t}},events:u,fetchOffsets:async({groupId:e,topic:t,topics:r,resolveOffsets:o=!1})=>{if(!e)throw new h(`Invalid groupId ${e}`);if(t||r||(r=[]),!t&&!Array.isArray(r))throw new h("Expected topic or topics array to be set");if(t&&r)throw new h("Either topic or topics must be set, not both");t&&(r=[t]);const n=await R.findGroupCoordinator({groupId:e}),s=await Promise.all(r.map((async e=>({topic:e,partitions:(await B(R,e)).map((e=>({partition:e})))}))));let{responses:i}=await n.offsetFetch({groupId:e,topics:s});o&&(i=await Promise.all(i.map((async({topic:t,partitions:r})=>{const o=(await D(t)).reduce(((e,{partition:t,...r})=>Object.assign(e,{[t]:{...r}})),{}),n=r.map((({offset:e,partition:t,...r})=>{let n=e;return Number(e)===C&&(n=o[t].low),Number(e)===A&&(n=o[t].high),{partition:t,offset:n,...r}}));return await M({groupId:e,topic:t,partitions:n}),{topic:t,partitions:n}}))));const a=i.map((({topic:e,partitions:t})=>({topic:e,partitions:t.map((({partition:e,offset:t,metadata:r})=>({partition:e,offset:t,metadata:r||null})))})));return t?a.pop().partitions:a},fetchTopicOffsets:D,fetchTopicOffsetsByTimestamp:async(e,t)=>{if(!e||"string"!=typeof e)throw new h(`Invalid topic ${e}`);return o(r)((async(r,o,n)=>{try{await R.addTargetTopic(e),await R.refreshMetadataIfNecessary();const r=R.findTopicPartitionMetadata(e).map((e=>({partition:e.partitionId}))),o=await R.fetchTopicsOffset([{topic:e,fromBeginning:!1,partitions:r}]),{partitions:n}=o.pop(),s=await R.fetchTopicsOffset([{topic:e,fromTimestamp:t,partitions:r}]),{partitions:i}=s.pop();return i.map((({partition:e,offset:t})=>({partition:e,offset:parseInt(t,10)>=0?t:n.find((({partition:t})=>t===e)).offset})))}catch(e){if("UNKNOWN_TOPIC_OR_PARTITION"===e.type)throw await R.refreshMetadata(),e;r(e)}}))},setOffsets:M,resetOffsets:async({groupId:e,topic:t,earliest:r=!1})=>{if(!e)throw new h(`Invalid groupId ${e}`);if(!t)throw new h(`Invalid topic ${t}`);const o=(await B(R,t)).map((e=>({partition:e,offset:R.defaultOffset({fromBeginning:r})})));return M({groupId:e,topic:t,partitions:o})},describeConfigs:async({resources:e,includeSynonyms:t})=>{if(!e||!Array.isArray(e))throw new h(`Invalid resources array ${e}`);if(0===e.length)throw new h("Resources array cannot be empty");const n=Object.values(w),s=e.find((e=>!n.includes(e.type)));if(s)throw new h(`Invalid resource type ${s.type}: ${JSON.stringify(s)}`);const i=e.find((e=>!e.name||"string"!=typeof e.name));if(i)throw new h(`Invalid resource name ${i.name}: ${JSON.stringify(i)}`);const a=e.find((e=>!Array.isArray(e.configNames)&&null!=e.configNames));if(a){const{configNames:e}=a;throw new h(`Invalid resource configNames ${e}: ${JSON.stringify(a)}`)}return o(r)((async(r,o,n)=>{try{await R.refreshMetadata();const r=await R.findControllerBroker(),o=await q({resources:e,defaultBroker:r}),n=async e=>{const n=e||r;return n.describeConfigs({resources:o.get(n),includeSynonyms:t})},s=Array.from(o.keys()),i=(await Promise.all(s.map(n))).reduce(((e,{resources:t})=>[...e,...t]),[]);return{resources:i}}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not describe configs",{error:e.message,retryCount:o,retryTime:n}),e;r(e)}}))},alterConfigs:async({resources:e,validateOnly:t})=>{if(!e||!Array.isArray(e))throw new h(`Invalid resources array ${e}`);if(0===e.length)throw new h("Resources array cannot be empty");const n=Object.values(w),s=e.find((e=>!n.includes(e.type)));if(s)throw new h(`Invalid resource type ${s.type}: ${JSON.stringify(s)}`);const i=e.find((e=>!e.name||"string"!=typeof e.name));if(i)throw new h(`Invalid resource name ${i.name}: ${JSON.stringify(i)}`);const a=e.find((e=>!Array.isArray(e.configEntries)));if(a){const{configEntries:e}=a;throw new h(`Invalid resource configEntries ${e}: ${JSON.stringify(a)}`)}const c=e.find((e=>e.configEntries.some((e=>"string"!=typeof e.name||"string"!=typeof e.value))));if(c)throw new h(`Invalid resource config value: ${JSON.stringify(c)}`);return o(r)((async(r,o,n)=>{try{await R.refreshMetadata();const r=await R.findControllerBroker(),o=await q({resources:e,defaultBroker:r}),n=async e=>{const n=e||r;return n.alterConfigs({resources:o.get(n),validateOnly:!!t})},s=Array.from(o.keys()),i=(await Promise.all(s.map(n))).reduce(((e,{resources:t})=>[...e,...t]),[]);return{resources:i}}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not alter configs",{error:e.message,retryCount:o,retryTime:n}),e;r(e)}}))},on:(e,t)=>{if(!N.includes(e))throw new h(`Event name should be one of ${k}`);return L.addListener(p(e),(r=>{r.type=d(r.type),Promise.resolve(t(r)).catch((t=>{P.error(`Failed to execute listener: ${t.message}`,{eventName:e,stack:t.stack})}))}))},logger:()=>P,listGroups:async()=>{await R.refreshMetadata();let e=[];for(var t in R.brokerPool.brokers){const r=await R.findBroker({nodeId:t}),o=await r.listGroups();e=e.concat(o.groups)}return{groups:e}},describeGroups:async e=>{const t=await Promise.all(e.map((async e=>({coordinator:await R.findGroupCoordinator({groupId:e}),groupId:e})))),n=Object.values(t.reduce(((e,{coordinator:t,groupId:r})=>{const o=e[t.nodeId];return e[t.nodeId]=o?{...o,groupIds:[...o.groupIds,r]}:{coordinator:t,groupIds:[r]},e}),{})),s=await Promise.all(n.map((async({coordinator:e,groupIds:t})=>{const n=o(r),{groups:s}=await n((()=>e.describeGroups({groupIds:t})));return s})));return{groups:[].concat.apply([],s)}},deleteGroups:async e=>{if(!e||!Array.isArray(e))throw new h(`Invalid groupIds array ${e}`);const t=e.some((e=>"string"!=typeof e));if(t)throw new h(`Invalid groupId name: ${JSON.stringify(t)}`);const s=o(r);let i=[],a=e.slice();return s((async(e,t,r)=>{try{if(0===a.length)return[];await R.refreshMetadata();const e={},t={};for(const r of a){const o=await R.findGroupCoordinator({groupId:r});void 0===e[o.nodeId]&&(e[o.nodeId]=[]),e[o.nodeId].push(r),t[o.nodeId]=o}const r=await Promise.all(Object.keys(t).map((async r=>await t[r].deleteGroups(e[r])))),o=n(r.map((({results:e})=>e.map((({groupId:e,errorCode:t,error:r})=>({groupId:e,errorCode:t,error:r})))))).filter((({errorCode:e})=>0!==e));if(a=o.map((({groupId:e})=>e)),o.length>0)throw new f("Error in DeleteGroups",o);return i=n(r.map((({results:e})=>e))),i}catch(o){if("NOT_CONTROLLER"===o.type||"COORDINATOR_NOT_AVAILABLE"===o.type)throw P.warn("Could not delete groups",{error:o.message,retryCount:t,retryTime:r}),o;e(o)}}))},describeAcls:async({resourceType:e,resourceName:t,resourcePatternType:n,principal:s,host:i,operation:a,permissionType:c})=>{if("string"!=typeof s&&void 0!==s)throw new h("Invalid principal, the principal have to be a valid string");if("string"!=typeof i&&void 0!==i)throw new h("Invalid host, the host have to be a valid string");if("string"!=typeof t&&void 0!==t)throw new h("Invalid resourceName, the resourceName have to be a valid string");if(!Object.values(b).includes(a))throw new h(`Invalid operation type ${a}`);if(!Object.values(S).includes(n))throw new h(`Invalid resource pattern filter type ${n}`);if(!Object.values(E).includes(c))throw new h(`Invalid permission type ${c}`);if(!Object.values(T).includes(e))throw new h(`Invalid resource type ${e}`);return o(r)((async(r,o,u)=>{try{await R.refreshMetadata();const r=await R.findControllerBroker(),{resources:o}=await r.describeAcls({resourceType:e,resourceName:t,resourcePatternType:n,principal:s,host:i,operation:a,permissionType:c});return{resources:o}}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not describe ACL",{error:e.message,retryCount:o,retryTime:u}),e;r(e)}}))},deleteAcls:async({filters:e})=>{if(!e||!Array.isArray(e))throw new h(`Invalid ACL Filter array ${e}`);if(0===e.length)throw new h("Empty ACL Filter array");if(e.some((({principal:e})=>"string"!=typeof e&&void 0!==e)))throw new h("Invalid ACL Filter array, the principals have to be a valid string");if(e.some((({host:e})=>"string"!=typeof e&&void 0!==e)))throw new h("Invalid ACL Filter array, the hosts have to be a valid string");if(e.some((({resourceName:e})=>"string"!=typeof e&&void 0!==e)))throw new h("Invalid ACL Filter array, the resourceNames have to be a valid string");let t;const n=Object.values(b);if(t=e.find((e=>!n.includes(e.operation))),t)throw new h(`Invalid operation type ${t.operation}: ${JSON.stringify(t)}`);const s=Object.values(S);if(t=e.find((e=>!s.includes(e.resourcePatternType))),t)throw new h(`Invalid resource pattern type ${t.resourcePatternType}: ${JSON.stringify(t)}`);const i=Object.values(E);if(t=e.find((e=>!i.includes(e.permissionType))),t)throw new h(`Invalid permission type ${t.permissionType}: ${JSON.stringify(t)}`);const a=Object.values(T);if(t=e.find((e=>!a.includes(e.resourceType))),t)throw new h(`Invalid resource type ${t.resourceType}: ${JSON.stringify(t)}`);return o(r)((async(t,r,o)=>{try{await R.refreshMetadata();const t=await R.findControllerBroker(),{filterResponses:r}=await t.deleteAcls({filters:e});return{filterResponses:r}}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not delete ACL",{error:e.message,retryCount:r,retryTime:o}),e;t(e)}}))},createAcls:async({acl:e})=>{if(!e||!Array.isArray(e))throw new h(`Invalid ACL array ${e}`);if(0===e.length)throw new h("Empty ACL array");if(e.some((({principal:e})=>"string"!=typeof e)))throw new h("Invalid ACL array, the principals have to be a valid string");if(e.some((({host:e})=>"string"!=typeof e)))throw new h("Invalid ACL array, the hosts have to be a valid string");if(e.some((({resourceName:e})=>"string"!=typeof e)))throw new h("Invalid ACL array, the resourceNames have to be a valid string");let t;const n=Object.values(b);if(t=e.find((e=>!n.includes(e.operation))),t)throw new h(`Invalid operation type ${t.operation}: ${JSON.stringify(t)}`);const s=Object.values(S);if(t=e.find((e=>!s.includes(e.resourcePatternType))),t)throw new h(`Invalid resource pattern type ${t.resourcePatternType}: ${JSON.stringify(t)}`);const i=Object.values(E);if(t=e.find((e=>!i.includes(e.permissionType))),t)throw new h(`Invalid permission type ${t.permissionType}: ${JSON.stringify(t)}`);const a=Object.values(T);if(t=e.find((e=>!a.includes(e.resourceType))),t)throw new h(`Invalid resource type ${t.resourceType}: ${JSON.stringify(t)}`);return o(r)((async(t,r,o)=>{try{await R.refreshMetadata();const t=await R.findControllerBroker();return await t.createAcls({acl:e}),!0}catch(e){if("NOT_CONTROLLER"===e.type)throw P.warn("Could not create ACL",{error:e.message,retryCount:r,retryTime:o}),e;t(e)}}))},deleteTopicRecords:async({topic:e,partitions:t})=>{if(!e||"string"!=typeof e)throw new h(`Invalid topic "${e}"`);if(!t||0===t.length)throw new h("Invalid partitions");const s=R.findLeaderForPartitions(e,t.map((e=>e.partition))),i=n(x(s)),a=await D(e),c=[];if(t.forEach((({partition:t,offset:r})=>{if(!i.includes(t))return void c.push({partition:t,offset:r,error:new m("Could not find the leader for the partition",{retriable:!1})});const{low:o}=a.find((e=>e.partition===t))||{high:void 0,low:void 0};parseInt(r)<parseInt(o)&&-1!==parseInt(r)&&P.warn("The requested offset is before the earliest offset maintained on the partition - no records will be deleted from this partition",{topic:e,partition:t,offset:r})})),c.length>0)throw new g({topic:e,partitions:c});const u=_(s).reduce(((r,[o,n])=>(r[o]={topic:e,partitions:t.filter((e=>n.includes(e.partition)))},r)),{});return o(r)((async t=>{try{const t=[],r=_(u).map((([e,{topic:t,partitions:r}])=>async()=>{const o=await R.findBroker({nodeId:e});await o.deleteRecords({topics:[{topic:t,partitions:r}]}),delete u[e]}));if(await Promise.all(r.map((e=>e().catch((e=>{if("KafkaJSDeleteTopicRecordsError"!==e.name)throw e;e.partitions.forEach((({partition:e,offset:r,error:o})=>{t.push({partition:e,offset:r,error:o})}))}))))),t.length>0)throw new g({topic:e,partitions:t})}catch(e){throw e.retriable&&e.partitions.some((({error:e})=>I(e)||"KafkaJSMetadataNotLoaded"===e.name))&&await R.refreshMetadata(),e}}))}}}},87881:function(e,t,r){const o=r(76),n=r(28202),s=r(51429)("admin"),i={CONNECT:s("connect"),DISCONNECT:s("disconnect"),REQUEST:s(n.NETWORK_REQUEST),REQUEST_TIMEOUT:s(n.NETWORK_REQUEST_TIMEOUT),REQUEST_QUEUE_SIZE:s(n.NETWORK_REQUEST_QUEUE_SIZE)},a={[i.REQUEST]:n.NETWORK_REQUEST,[i.REQUEST_TIMEOUT]:n.NETWORK_REQUEST_TIMEOUT,[i.REQUEST_QUEUE_SIZE]:n.NETWORK_REQUEST_QUEUE_SIZE},c=o(a);e.exports={events:i,wrap:e=>c[e]||e,unwrap:e=>a[e]||e}},266:function(e,t,r){const o=r(73278),n=r(4105),{Types:s}=r(42972),{requests:i,lookup:a}=r(63146),{KafkaJSNonRetriableError:c}=r(29879),u=r(99211),d=r(80722),p=r(42464),{ApiVersions:l}=r(99211),h=r(89026),f=Symbol("private:Broker:shouldReauthenticate"),m=Symbol("private:Broker:sendRequest"),g=Symbol("private:Broker:authenticate"),y=()=>{throw new Error("Broker not connected")};e.exports=class{constructor({connection:e,logger:t,nodeId:r=null,versions:s=null,authenticationTimeout:i=1e3,reauthenticationThreshold:a=1e4,allowAutoTopicCreation:c=!0,supportAuthenticationProtocol:u=null}){this.connection=e,this.nodeId=r,this.rootLogger=t,this.logger=t.namespace("Broker"),this.versions=s,this.authenticationTimeout=i,this.reauthenticationThreshold=a,this.allowAutoTopicCreation=c,this.supportAuthenticationProtocol=u,this.authenticatedAt=null,this.sessionLifetime=o.ZERO;const p=2*this.connection.connectionTimeout+this.authenticationTimeout;this.brokerAddress=`${this.connection.host}:${this.connection.port}`,this.lock=new n({timeout:p,description:`connect to broker ${this.brokerAddress}`}),this.lookupRequest=y,this[g]=h((async()=>{if(this.connection.sasl&&!this.isAuthenticated()){const e=new d(this.connection,this.rootLogger,this.versions,this.supportAuthenticationProtocol);await e.authenticate(),this.authenticatedAt=process.hrtime(),this.sessionLifetime=o.fromValue(e.sessionLifetime)}}))}isAuthenticated(){return null!=this.authenticatedAt&&!this[f]()}isConnected(){const{connected:e,sasl:t}=this.connection;return t?e&&this.isAuthenticated():e}async connect(){try{if(await this.lock.acquire(),this.isConnected())return;if(this.authenticatedAt=null,await this.connection.connect(),this.versions||(this.versions=await this.apiVersions()),this.lookupRequest=a(this.versions),null===this.supportAuthenticationProtocol){try{this.lookupRequest(u.SaslAuthenticate,i.SaslAuthenticate),this.supportAuthenticationProtocol=!0}catch(e){this.supportAuthenticationProtocol=!1}this.logger.debug("Verified support for SaslAuthenticate",{broker:this.brokerAddress,supportAuthenticationProtocol:this.supportAuthenticationProtocol})}await this[g]()}finally{await this.lock.release()}}async disconnect(){this.authenticatedAt=null,await this.connection.disconnect()}async apiVersions(){let e;const t=i.ApiVersions.versions.map(Number).sort().reverse();for(const r of t)try{const t=i.ApiVersions.protocol({version:r});e=await this[m]({...t(),requestTimeout:this.connection.connectionTimeout});break}catch(e){if("UNSUPPORTED_VERSION"!==e.type)throw e}if(!e)throw new c("API Versions not supported");return e.apiVersions.reduce(((e,t)=>Object.assign(e,{[t.apiKey]:{minVersion:t.minVersion,maxVersion:t.maxVersion}})),{})}async metadata(e=[]){const t=this.lookupRequest(u.Metadata,i.Metadata),r=p(e);return await this[m](t({topics:r,allowAutoTopicCreation:this.allowAutoTopicCreation}))}async produce({topicData:e,transactionalId:t,producerId:r,producerEpoch:o,acks:n=-1,timeout:a=3e4,compression:c=s.None}){const d=this.lookupRequest(u.Produce,i.Produce);return await this[m](d({acks:n,timeout:a,compression:c,topicData:e,transactionalId:t,producerId:r,producerEpoch:o}))}async fetch({replicaId:e,isolationLevel:t,maxWaitTime:r=5e3,minBytes:o=1,maxBytes:n=10485760,topics:s,rackId:a=""}){const c=this.lookupRequest(u.Fetch,i.Fetch),d=s.reduce(((e,{topic:t,partitions:r})=>(r.forEach((r=>{e.push({topic:t,partition:r})})),e)),[]),l=p(d).reduce(((e,{topic:t,partition:r})=>{const o=e[e.length-1];return null!=o&&o.topic===t?e[e.length-1].partitions.push(r):e.push({topic:t,partitions:[r]}),e}),[]);return await this[m](c({replicaId:e,isolationLevel:t,maxWaitTime:r,minBytes:o,maxBytes:n,topics:l,rackId:a}))}async heartbeat({groupId:e,groupGenerationId:t,memberId:r}){const o=this.lookupRequest(u.Heartbeat,i.Heartbeat);return await this[m](o({groupId:e,groupGenerationId:t,memberId:r}))}async findGroupCoordinator({groupId:e,coordinatorType:t}){const r=this.lookupRequest(u.GroupCoordinator,i.GroupCoordinator);return await this[m](r({groupId:e,coordinatorType:t}))}async joinGroup({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:o="",protocolType:n="consumer",groupProtocols:s}){const a=this.lookupRequest(u.JoinGroup,i.JoinGroup),c=(i=o)=>this[m](a({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:i,protocolType:n,groupProtocols:s}));try{return await c()}catch(e){if("KafkaJSMemberIdRequired"===e.name)return c(e.memberId);throw e}}async leaveGroup({groupId:e,memberId:t}){const r=this.lookupRequest(u.LeaveGroup,i.LeaveGroup);return await this[m](r({groupId:e,memberId:t}))}async syncGroup({groupId:e,generationId:t,memberId:r,groupAssignment:o}){const n=this.lookupRequest(u.SyncGroup,i.SyncGroup);return await this[m](n({groupId:e,generationId:t,memberId:r,groupAssignment:o}))}async listOffsets({replicaId:e,isolationLevel:t,topics:r}){const o=this.lookupRequest(u.ListOffsets,i.ListOffsets),n=await this[m](o({replicaId:e,isolationLevel:t,topics:r}));for(const e of n.responses)e.partitions=e.partitions.map((({offsets:e,...t})=>e?{...t,offset:e.pop()}:t));return n}async offsetCommit({groupId:e,groupGenerationId:t,memberId:r,retentionTime:o,topics:n}){const s=this.lookupRequest(u.OffsetCommit,i.OffsetCommit);return await this[m](s({groupId:e,groupGenerationId:t,memberId:r,retentionTime:o,topics:n}))}async offsetFetch({groupId:e,topics:t}){const r=this.lookupRequest(u.OffsetFetch,i.OffsetFetch);return await this[m](r({groupId:e,topics:t}))}async describeGroups({groupIds:e}){const t=this.lookupRequest(u.DescribeGroups,i.DescribeGroups);return await this[m](t({groupIds:e}))}async createTopics({topics:e,validateOnly:t=!1,timeout:r=5e3}){const o=this.lookupRequest(u.CreateTopics,i.CreateTopics);return await this[m](o({topics:e,validateOnly:t,timeout:r}))}async createPartitions({topicPartitions:e,validateOnly:t=!1,timeout:r=5e3}){const o=this.lookupRequest(u.CreatePartitions,i.CreatePartitions);return await this[m](o({topicPartitions:e,validateOnly:t,timeout:r}))}async deleteTopics({topics:e,timeout:t=5e3}){const r=this.lookupRequest(u.DeleteTopics,i.DeleteTopics);return await this[m](r({topics:e,timeout:t}))}async describeConfigs({resources:e,includeSynonyms:t=!1}){const r=this.lookupRequest(u.DescribeConfigs,i.DescribeConfigs);return await this[m](r({resources:e,includeSynonyms:t}))}async alterConfigs({resources:e,validateOnly:t=!1}){const r=this.lookupRequest(u.AlterConfigs,i.AlterConfigs);return await this[m](r({resources:e,validateOnly:t}))}async initProducerId({transactionalId:e,transactionTimeout:t}){const r=this.lookupRequest(u.InitProducerId,i.InitProducerId);return await this[m](r({transactionalId:e,transactionTimeout:t}))}async addPartitionsToTxn({transactionalId:e,producerId:t,producerEpoch:r,topics:o}){const n=this.lookupRequest(u.AddPartitionsToTxn,i.AddPartitionsToTxn);return await this[m](n({transactionalId:e,producerId:t,producerEpoch:r,topics:o}))}async addOffsetsToTxn({transactionalId:e,producerId:t,producerEpoch:r,groupId:o}){const n=this.lookupRequest(u.AddOffsetsToTxn,i.AddOffsetsToTxn);return await this[m](n({transactionalId:e,producerId:t,producerEpoch:r,groupId:o}))}async txnOffsetCommit({transactionalId:e,groupId:t,producerId:r,producerEpoch:o,topics:n}){const s=this.lookupRequest(u.TxnOffsetCommit,i.TxnOffsetCommit);return await this[m](s({transactionalId:e,groupId:t,producerId:r,producerEpoch:o,topics:n}))}async endTxn({transactionalId:e,producerId:t,producerEpoch:r,transactionResult:o}){const n=this.lookupRequest(u.EndTxn,i.EndTxn);return await this[m](n({transactionalId:e,producerId:t,producerEpoch:r,transactionResult:o}))}async listGroups(){const e=this.lookupRequest(u.ListGroups,i.ListGroups);return await this[m](e())}async deleteGroups(e){const t=this.lookupRequest(u.DeleteGroups,i.DeleteGroups);return await this[m](t(e))}async deleteRecords({topics:e}){const t=this.lookupRequest(u.DeleteRecords,i.DeleteRecords);return await this[m](t({topics:e}))}async createAcls({acl:e}){const t=this.lookupRequest(u.CreateAcls,i.CreateAcls);return await this[m](t({creations:e}))}async describeAcls({resourceType:e,resourceName:t,resourcePatternType:r,principal:o,host:n,operation:s,permissionType:a}){const c=this.lookupRequest(u.DescribeAcls,i.DescribeAcls);return await this[m](c({resourceType:e,resourceName:t,resourcePatternType:r,principal:o,host:n,operation:s,permissionType:a}))}async deleteAcls({filters:e}){const t=this.lookupRequest(u.DeleteAcls,i.DeleteAcls);return await this[m](t({filters:e}))}[f](){if(this.sessionLifetime.equals(o.ZERO))return!1;if(null==this.authenticatedAt)return!0;const[e,t]=process.hrtime(this.authenticatedAt);return o.fromValue(e).multiply(1e3).add(o.fromValue(t).divide(1e6)).add(this.reauthenticationThreshold).greaterThanOrEqual(this.sessionLifetime)}async[m](e){this.isAuthenticated()||e.request.apiKey===l||await this[g]();try{return await this.connection.send(e)}catch(e){throw"KafkaJSConnectionClosedError"===e.name&&await this.disconnect(),e}}}},8931:function(e,t,r){const o=r(71128),{KafkaJSSASLAuthenticationError:n}=r(29879);e.exports=class{constructor(e,t,r){this.connection=e,this.logger=t.namespace("SASLAWSIAMAuthenticator"),this.saslAuthenticate=r}async authenticate(){const{sasl:e}=this.connection;if(!e.authorizationIdentity)throw new n("SASL AWS-IAM: Missing authorizationIdentity");if(!e.accessKeyId)throw new n("SASL AWS-IAM: Missing accessKeyId");if(!e.secretAccessKey)throw new n("SASL AWS-IAM: Missing secretAccessKey");e.sessionToken||(e.sessionToken="");const t=o.request(e),r=o.response,{host:s,port:i}=this.connection,a=`${s}:${i}`;try{this.logger.debug("Authenticate with SASL AWS-IAM",{broker:a}),await this.saslAuthenticate({request:t,response:r}),this.logger.debug("SASL AWS-IAM authentication successful",{broker:a})}catch(e){const t=new n(`SASL AWS-IAM authentication failed: ${e.message}`);throw this.logger.error(t.message,{broker:a}),t}}}},80722:function(e,t,r){const{requests:o,lookup:n}=r(63146),s=r(99211),i=r(7891),a=r(55667),c=r(20527),u=r(8931),d=r(53938),{KafkaJSSASLAuthenticationError:p}=r(29879),l={PLAIN:i,"SCRAM-SHA-256":a,"SCRAM-SHA-512":c,AWS:u,OAUTHBEARER:d},h=Object.keys(l);e.exports=class{constructor(e,t,r,i){this.connection=e,this.logger=t,this.sessionLifetime="0";const a=n(r);this.saslHandshake=a(s.SaslHandshake,o.SaslHandshake),this.protocolAuthentication=i?a(s.SaslAuthenticate,o.SaslAuthenticate):null}async authenticate(){const e=this.connection.sasl.mechanism.toUpperCase();if(!h.includes(e))throw new p(`SASL ${e} mechanism is not supported by the client`);if(!(await this.connection.send(this.saslHandshake({mechanism:e}))).enabledMechanisms.includes(e))throw new p(`SASL ${e} mechanism is not supported by the server`);const t=l[e];await new t(this.connection,this.logger,(async({request:e,response:t,authExpectResponse:r})=>{if(this.protocolAuthentication){const{buffer:o}=await e.encode(),n=await this.connection.send(this.protocolAuthentication({authBytes:o}));if(this.sessionLifetime=n.sessionLifetimeMs||"0",!r)return;const{authBytes:s}=n,i=await t.decode(s);return t.parse(i)}return this.connection.authenticate({request:e,response:t,authExpectResponse:r})})).authenticate()}}},53938:function(e,t,r){const o=r(13860),{KafkaJSSASLAuthenticationError:n}=r(29879);e.exports=class{constructor(e,t,r){this.connection=e,this.logger=t.namespace("SASLOAuthBearerAuthenticator"),this.saslAuthenticate=r}async authenticate(){const{sasl:e}=this.connection;if(null==e.oauthBearerProvider)throw new n("SASL OAUTHBEARER: Missing OAuth bearer token provider");const{oauthBearerProvider:t}=e,r=await t();if(null==r.value)throw new n("SASL OAUTHBEARER: Invalid OAuth bearer token");const s=await o.request(e,r),i=o.response,{host:a,port:c}=this.connection,u=`${a}:${c}`;try{this.logger.debug("Authenticate with SASL OAUTHBEARER",{broker:u}),await this.saslAuthenticate({request:s,response:i}),this.logger.debug("SASL OAUTHBEARER authentication successful",{broker:u})}catch(e){const t=new n(`SASL OAUTHBEARER authentication failed: ${e.message}`);throw this.logger.error(t.message,{broker:u}),t}}}},7891:function(e,t,r){const o=r(17733),{KafkaJSSASLAuthenticationError:n}=r(29879);e.exports=class{constructor(e,t,r){this.connection=e,this.logger=t.namespace("SASLPlainAuthenticator"),this.saslAuthenticate=r}async authenticate(){const{sasl:e}=this.connection;if(null==e.username||null==e.password)throw new n("SASL Plain: Invalid username or password");const t=o.request(e),r=o.response,{host:s,port:i}=this.connection,a=`${s}:${i}`;try{this.logger.debug("Authenticate with SASL PLAIN",{broker:a}),await this.saslAuthenticate({request:t,response:r}),this.logger.debug("SASL PLAIN authentication successful",{broker:a})}catch(e){const t=new n(`SASL PLAIN authentication failed: ${e.message}`);throw this.logger.error(t.message,{broker:a}),t}}}},81818:function(e,t,r){const o=r(6113),n=r(82337),{KafkaJSSASLAuthenticationError:s,KafkaJSNonRetriableError:i}=r(29879),a=/=/g,c=/,/g,u=/\+/g,d=/\//g,p=/=+$/,l=e=>Buffer.from(e).toString("base64");class h{static sanitizeString(e){return e.replace(a,"=3D").replace(c,"=2C")}static nonce(){return o.randomBytes(16).toString("base64").replace(u,"-").replace(d,"_").replace(p,"").toString("ascii")}static hi(e,t,r,n){return new Promise(((s,i)=>{o.pbkdf2(e,t,r,n.length,n.type,((e,t)=>e?i(e):s(t)))}))}static xor(e,t){const r=Buffer.from(e),o=Buffer.from(t),n=Buffer.byteLength(r);if(n!==Buffer.byteLength(o))throw new i("Buffers must be of the same length");const s=[];for(let e=0;e<n;e++)s.push(r[e]^o[e]);return Buffer.from(s)}constructor(e,t,r,o){this.connection=e,this.logger=t,this.saslAuthenticate=r,this.digestDefinition=o;const n=o.type.toUpperCase();this.PREFIX=`SASL SCRAM ${n} authentication`,this.currentNonce=h.nonce()}async authenticate(){const{PREFIX:e}=this,{host:t,port:r,sasl:o}=this.connection,n=`${t}:${r}`;if(null==o.username||null==o.password)throw new s(`${this.PREFIX}: Invalid username or password`);try{this.logger.debug("Exchanging first client message",{broker:n});const t=await this.sendClientFirstMessage();this.logger.debug("Sending final message",{broker:n});const r=await this.sendClientFinalMessage(t);if(r.e)throw new Error(r.e);const o=await this.serverKey(t),s=this.serverSignature(o,t);if(r.v!==s)throw new Error("Invalid server signature in server final message");this.logger.debug(`${e} successful`,{broker:n})}catch(t){const r=new s(`${e} failed: ${t.message}`);throw this.logger.error(r.message,{broker:n}),r}}async sendClientFirstMessage(){const e=`n,,${this.firstMessageBare()}`,t=n.firstMessage.request({clientFirstMessage:e}),r=n.firstMessage.response;return this.saslAuthenticate({authExpectResponse:!0,request:t,response:r})}async sendClientFinalMessage(e){const{PREFIX:t}=this,r=parseInt(e.i,10),{minIterations:o}=this.digestDefinition;if(!e.r.startsWith(this.currentNonce))throw new s(`${t} failed: Invalid server nonce, it does not start with the client nonce`);if(r<o)throw new s(`${t} failed: Requested iterations ${r} is less than the minimum ${o}`);const i=`${this.finalMessageWithoutProof(e)},p=${await this.clientProof(e)}`,a=n.finalMessage.request({finalMessage:i}),c=n.finalMessage.response;return this.saslAuthenticate({authExpectResponse:!0,request:a,response:c})}async clientProof(e){const t=await this.clientKey(e),r=this.H(t),o=this.clientSignature(r,e);return l(h.xor(t,o))}async clientKey(e){const t=await this.saltPassword(e);return this.HMAC(t,"Client Key")}async serverKey(e){const t=await this.saltPassword(e);return this.HMAC(t,"Server Key")}clientSignature(e,t){return this.HMAC(e,this.authMessage(t))}serverSignature(e,t){return l(this.HMAC(e,this.authMessage(t)))}authMessage(e){return[this.firstMessageBare(),e.original,this.finalMessageWithoutProof(e)].join(",")}async saltPassword(e){const t=Buffer.from(e.s,"base64"),r=parseInt(e.i,10);return h.hi(this.encodedPassword(),t,r,this.digestDefinition)}firstMessageBare(){return`n=${this.encodedUsername()},r=${this.currentNonce}`}finalMessageWithoutProof(e){const t=e.r;return`c=${l("n,,")},r=${t}`}encodedUsername(){const{username:e}=this.connection.sasl;return h.sanitizeString(e).toString("utf-8")}encodedPassword(){const{password:e}=this.connection.sasl;return e.toString("utf-8")}H(e){return o.createHash(this.digestDefinition.type).update(e).digest()}HMAC(e,t){return o.createHmac(this.digestDefinition.type,e).update(t).digest()}}e.exports={DIGESTS:{SHA256:{length:32,type:"sha256",minIterations:4096},SHA512:{length:64,type:"sha512",minIterations:4096}},SCRAM:h}},55667:function(e,t,r){const{SCRAM:o,DIGESTS:n}=r(81818);e.exports=class extends o{constructor(e,t,r){super(e,t.namespace("SCRAM256Authenticator"),r,n.SHA256)}}},20527:function(e,t,r){const{SCRAM:o,DIGESTS:n}=r(81818);e.exports=class extends o{constructor(e,t,r){super(e,t.namespace("SCRAM512Authenticator"),r,n.SHA512)}}},71625:function(e,t,r){const o=r(266),n=r(99701),s=r(42464),i=r(8351),{KafkaJSBrokerNotFound:a,KafkaJSProtocolError:c}=r(29879),{keys:u,assign:d,values:p}=Object;e.exports=class{constructor({connectionBuilder:e,logger:t,retry:r,allowAutoTopicCreation:s,authenticationTimeout:i,reauthenticationThreshold:a,metadataMaxAge:c}){this.rootLogger=t,this.connectionBuilder=e,this.metadataMaxAge=c||0,this.logger=t.namespace("BrokerPool"),this.retrier=n(d({},r)),this.createBroker=e=>new o({allowAutoTopicCreation:s,authenticationTimeout:i,reauthenticationThreshold:a,...e}),this.brokers={},this.seedBroker=void 0,this.metadata=null,this.metadataExpireAt=null,this.versions=null,this.supportAuthenticationProtocol=null}hasConnectedBrokers(){return!!p(this.brokers).find((e=>e.isConnected()))||!!this.seedBroker&&this.seedBroker.isConnected()}async createSeedBroker(){this.seedBroker&&await this.seedBroker.disconnect(),this.seedBroker=this.createBroker({connection:await this.connectionBuilder.build(),logger:this.rootLogger})}async connect(){if(!this.hasConnectedBrokers())return this.seedBroker||await this.createSeedBroker(),this.retrier((async(e,t,r)=>{try{await this.seedBroker.connect(),this.versions=this.seedBroker.versions}catch(o){if("KafkaJSConnectionError"===o.name||"ILLEGAL_SASL_STATE"===o.type?(await this.createSeedBroker(),this.logger.error(`Failed to connect to seed broker, trying another broker from the list: ${o.message}`,{retryCount:t,retryTime:r})):this.logger.error(o.message,{retryCount:t,retryTime:r}),o.retriable)throw o;e(o)}}))}async disconnect(){this.seedBroker&&await this.seedBroker.disconnect(),await Promise.all(p(this.brokers).map((e=>e.disconnect()))),this.brokers={},this.metadata=null,this.versions=null,this.supportAuthenticationProtocol=null}removeBroker({host:e,port:t}){const r=p(this.brokers).find((r=>r.connection.host===e&&r.connection.port===t));r&&(delete this.brokers[r.nodeId],this.metadataExpireAt=null,this.seedBroker.nodeId===r.nodeId&&(this.seedBroker=s(p(this.brokers))[0]))}async refreshMetadata(e){const t=await this.findConnectedBroker(),{host:r,port:o}=this.seedBroker.connection;return this.retrier((async(n,s,a)=>{try{this.metadata=await t.metadata(e),this.metadataExpireAt=Date.now()+this.metadataMaxAge;const n=[];this.brokers=await this.metadata.brokers.reduce((async(e,{nodeId:t,host:s,port:i,rack:a})=>{const c=await e;if(c[t]){if(!((e,{host:t,port:r,rack:o})=>e.connection.host!==t||e.connection.port!==r||e.connection.rack!==o)(c[t],{host:s,port:i,rack:a}))return c;n.push(c[t])}return s===r&&i===o?(this.seedBroker.nodeId=t,this.seedBroker.connection.rack=a,d(c,{[t]:this.seedBroker})):d(c,{[t]:this.createBroker({logger:this.rootLogger,versions:this.versions,supportAuthenticationProtocol:this.supportAuthenticationProtocol,connection:await this.connectionBuilder.build({host:s,port:i,rack:a}),nodeId:t})})}),this.brokers);const s=this.metadata.brokers.map((({nodeId:e})=>`${e}`)).sort(),a=u(this.brokers).sort(),c=i(a,s).map((e=>this.brokers[e].disconnect().then((()=>{delete this.brokers[e]})))),p=n.map((e=>e.disconnect()));await Promise.all([...c,...p])}catch(e){if("LEADER_NOT_AVAILABLE"===e.type)throw e;n(e)}}))}async refreshMetadataIfNecessary(e){if(null==this.metadata||null==this.metadataExpireAt||Date.now()>this.metadataExpireAt||!e.every((e=>this.metadata.topicMetadata.some((t=>t.topic===e)))))return this.refreshMetadata(e)}async findBroker({nodeId:e}){const t=this.brokers[e];if(!t)throw new a(`Broker ${e} not found in the cached metadata`);return await this.connectBroker(t),t}async withBroker(e){const t=s(u(this.brokers));if(0===t.length)throw new a("No brokers in the broker pool");for(const r of t){const t=await this.findBroker({nodeId:r});try{return await e({nodeId:r,broker:t})}catch(e){}}return null}async findConnectedBroker(){const e=s(u(this.brokers)),t=e.find((e=>this.brokers[e].isConnected()));if(t)return await this.findBroker({nodeId:t});for(const t of e)try{return await this.findBroker({nodeId:t})}catch(e){}return await this.connect(),this.seedBroker}async connectBroker(e){if(!e.isConnected())return this.retrier((async(t,r,o)=>{try{await e.connect()}catch(n){if("KafkaJSConnectionError"!==n.name&&"ILLEGAL_SASL_STATE"!==n.type||await e.disconnect(),"KafkaJSConnectionError"===n.name)return t(n);if("ILLEGAL_SASL_STATE"===n.type)throw e.connection=await this.connectionBuilder.build({host:e.connection.host,port:e.connection.port,rack:e.connection.rack}),this.logger.error("Failed to connect to broker, reconnecting",{retryCount:r,retryTime:o}),new c(n,{retriable:!0});if(n.retriable)throw n;this.logger.error(n,{retryCount:r,retryTime:o,stack:n.stack}),t(n)}}))}}},15482:function(e,t,r){const o=r(62109),{KafkaJSConnectionError:n,KafkaJSNonRetriableError:s}=r(29879);e.exports=({socketFactory:e,brokers:t,ssl:r,sasl:i,clientId:a,requestTimeout:c,enforceRequestTimeout:u,connectionTimeout:d,maxInFlightRequests:p,logger:l,instrumentationEmitter:h=null})=>{let f=0;return{build:async({host:m,port:g,rack:y}={})=>{if(!m){const e=await(async()=>{let e;if("function"==typeof t)try{e=await t()}catch(e){const t=new n(`Failed to connect: "config.brokers" threw: ${e.message}`);throw t.stack=`${t.name}\n  Caused by: ${e.stack}`,t}else e=t;return(e=>{if(!e)throw new s("Failed to connect: brokers should not be null");if(Array.isArray(e)){if(!e.length)throw new s("Failed to connect: brokers array is empty");e.forEach(((e,t)=>{if(!(e=>e&&"string"==typeof e&&e.length>0)(e))throw new s(`Failed to connect: broker at index ${t} is invalid "${typeof e}"`)}))}})(e),e})(),r=e[f++%e.length];m=r.split(":")[0],g=Number(r.split(":")[1])}return new o({host:m,port:g,rack:y,sasl:i,ssl:r,clientId:a,socketFactory:e,connectionTimeout:d,requestTimeout:c,enforceRequestTimeout:u,maxInFlightRequests:p,instrumentationEmitter:h,logger:l})}}}},8048:function(e,t,r){const o=r(71625),n=r(4105),s=r(99701),i=r(15482),a=r(74358),{EARLIEST_OFFSET:c,LATEST_OFFSET:u}=r(53904),{KafkaJSError:d,KafkaJSBrokerNotFound:p,KafkaJSMetadataNotLoaded:l,KafkaJSTopicMetadataNotLoaded:h,KafkaJSGroupCoordinatorNotFound:f}=r(29879),m=r(7022),{keys:g}=Object,y=(e,{topic:t,partitions:r})=>({...e,[t]:[...e[t]||[],...r]});e.exports=class{constructor({logger:e,socketFactory:t,brokers:r,ssl:a,sasl:c,clientId:u,connectionTimeout:d,authenticationTimeout:p,reauthenticationThreshold:l,requestTimeout:h=3e4,enforceRequestTimeout:f,metadataMaxAge:m,retry:g,allowAutoTopicCreation:y,maxInFlightRequests:I,isolationLevel:w,instrumentationEmitter:T=null,offsets:b=new Map}){this.rootLogger=e,this.logger=e.namespace("Cluster"),this.retrier=s(g),this.connectionBuilder=i({logger:e,instrumentationEmitter:T,socketFactory:t,brokers:r,ssl:a,sasl:c,clientId:u,connectionTimeout:d,requestTimeout:h,enforceRequestTimeout:f,maxInFlightRequests:I}),this.targetTopics=new Set,this.mutatingTargetTopics=new n({description:"updating target topics",timeout:h}),this.isolationLevel=w,this.brokerPool=new o({connectionBuilder:this.connectionBuilder,logger:this.rootLogger,retry:g,allowAutoTopicCreation:y,authenticationTimeout:p,reauthenticationThreshold:l,metadataMaxAge:m}),this.committedOffsetsByGroup=b}isConnected(){return this.brokerPool.hasConnectedBrokers()}async connect(){await this.brokerPool.connect()}async disconnect(){await this.brokerPool.disconnect()}removeBroker({host:e,port:t}){this.brokerPool.removeBroker({host:e,port:t})}async refreshMetadata(){await this.brokerPool.refreshMetadata(Array.from(this.targetTopics))}async refreshMetadataIfNecessary(){await this.brokerPool.refreshMetadataIfNecessary(Array.from(this.targetTopics))}async metadata({topics:e=[]}={}){return this.retrier((async(t,r,o)=>{try{return await this.brokerPool.refreshMetadataIfNecessary(e),this.brokerPool.withBroker((async({broker:t})=>t.metadata(e)))}catch(e){if("LEADER_NOT_AVAILABLE"===e.type)throw e;t(e)}}))}async addTargetTopic(e){return this.addMultipleTargetTopics([e])}async addMultipleTargetTopics(e){await this.mutatingTargetTopics.acquire();try{const t=this.targetTopics.size,r=new Set(this.targetTopics);for(const t of e)this.targetTopics.add(t);if(t!==this.targetTopics.size||!this.brokerPool.metadata)try{await this.refreshMetadata()}catch(e){throw"INVALID_TOPIC_EXCEPTION"!==e.type&&"UNKNOWN_TOPIC_OR_PARTITION"!==e.type||(this.targetTopics=r),e}}finally{await this.mutatingTargetTopics.release()}}async findBroker({nodeId:e}){try{return await this.brokerPool.findBroker({nodeId:e})}catch(e){throw"KafkaJSBrokerNotFound"!==e.name&&"KafkaJSLockTimeout"!==e.name&&"KafkaJSConnectionError"!==e.name||await this.refreshMetadata(),e}}async findControllerBroker(){const{metadata:e}=this.brokerPool;if(!e||null==e.controllerId)throw new l("Topic metadata not loaded");const t=await this.findBroker({nodeId:e.controllerId});if(!t)throw new p(`Controller broker with id ${e.controllerId} not found in the cached metadata`);return t}findTopicPartitionMetadata(e){const{metadata:t}=this.brokerPool;if(!t||!t.topicMetadata)throw new h("Topic metadata not loaded",{topic:e});const r=t.topicMetadata.find((t=>t.topic===e));return r?r.partitionMetadata:[]}findLeaderForPartitions(e,t){const r=this.findTopicPartitionMetadata(e);return t.reduce(((t,o)=>{const n=parseInt(o,10),s=r.find((e=>e.partitionId===n));if(!s)return t;if(null===s.leader||void 0===s.leader)throw new d("Invalid partition metadata",{topic:e,partitionId:n,metadata:s});const{leader:i}=s,a=t[i]||[];return{...t,[i]:[...a,n]}}),{})}async findGroupCoordinator({groupId:e,coordinatorType:t=m.GROUP}){return this.retrier((async(r,o,n)=>{try{const{coordinator:r}=await this.findGroupCoordinatorMetadata({groupId:e,coordinatorType:t});return await this.findBroker({nodeId:r.nodeId})}catch(t){if("KafkaJSBrokerNotFound"===t.name||"GROUP_COORDINATOR_NOT_AVAILABLE"===t.type)throw this.logger.debug(`${t.message}, refreshing metadata and trying again...`,{groupId:e,retryCount:o,retryTime:n}),await this.refreshMetadata(),t;if("ECONNREFUSED"===t.code)throw t;r(t)}}))}async findGroupCoordinatorMetadata({groupId:e,coordinatorType:t}){const r=await this.brokerPool.withBroker((async({nodeId:r,broker:o})=>await this.retrier((async(n,s,i)=>{try{const r=await o.findGroupCoordinator({groupId:e,coordinatorType:t});return this.logger.debug("Found group coordinator",{broker:r.host,nodeId:r.coordinator.nodeId}),r}catch(e){if(this.logger.debug("Tried to find group coordinator",{nodeId:r,error:e}),"GROUP_COORDINATOR_NOT_AVAILABLE"===e.type)throw this.logger.debug("Group coordinator not available, retrying...",{nodeId:r,retryCount:s,retryTime:i}),e;n(e)}}))));if(r)return r;throw new f("Failed to find group coordinator")}defaultOffset({fromBeginning:e}){return e?c:u}async fetchTopicsOffset(e){const t={},r={},o=e=>t=>{const{timestamp:o}=r[e];return{...t,timestamp:o}};for(const o of e){const{topic:e,partitions:n,fromBeginning:s,fromTimestamp:i}=o,a=this.findLeaderForPartitions(e,n.map((e=>e.partition))),c=null!=i?i:this.defaultOffset({fromBeginning:s});r[e]={timestamp:c},g(a).forEach((r=>{t[r]=t[r]||{},t[r][e]=n.filter((e=>a[r].includes(e.partition)))}))}const n=g(t).map((async e=>{const r=await this.findBroker({nodeId:e}),n=t[e],{responses:s}=await r.listOffsets({isolationLevel:this.isolationLevel,topics:g(n).map((e=>({topic:e,partitions:n[e].map(o(e))})))});return s})),s=await Promise.all(n),i=a(s).reduce(y,{});return g(i).map((e=>({topic:e,partitions:i[e].map((({partition:e,offset:t})=>({partition:e,offset:t})))})))}committedOffsets({groupId:e}){return this.committedOffsetsByGroup.has(e)||this.committedOffsetsByGroup.set(e,{}),this.committedOffsetsByGroup.get(e)}markOffsetAsCommitted({groupId:e,topic:t,partition:r,offset:o}){const n=this.committedOffsets({groupId:e});n[t]=n[t]||{},n[t][r]=o}}},53904:function(e){const t=Math.pow(2,32);e.exports={EARLIEST_OFFSET:-2,LATEST_OFFSET:-1,INT_32_MAX_VALUE:t}},737:function(e,t,r){const o=r(28783),n=r(56341),s={encode:({version:e,topics:t,userData:r=Buffer.alloc(0)})=>(new o).writeInt16(e).writeArray(t).writeBytes(r).buffer,decode(e){const t=new n(e);return{version:t.readInt16(),topics:t.readArray((e=>e.readString())),userData:t.readBytes()}}},i={encode:({version:e,assignment:t,userData:r=Buffer.alloc(0)})=>(new o).writeInt16(e).writeArray(Object.keys(t).map((e=>(new o).writeString(e).writeArray(t[e])))).writeBytes(r).buffer,decode(e){const t=new n(e),r=e=>e.readInt32();return t.canReadInt16()?{version:t.readInt16(),assignment:t.readArray((e=>({topic:e.readString(),partitions:e.readArray(r)}))).reduce(((e,{topic:t,partitions:r})=>Object.assign(e,{[t]:r})),{}),userData:t.readBytes()}:null}};e.exports={MemberMetadata:s,MemberAssignment:i}},16996:function(e,t,r){const o=r(62786);e.exports={roundRobin:o}},62786:function(e,t,r){const{MemberMetadata:o,MemberAssignment:n}=r(737),s=r(74358);e.exports=({cluster:e})=>({name:"RoundRobinAssigner",version:1,async assign({members:t,topics:r}){const o=t.length,i=t.map((({memberId:e})=>e)).sort(),a={},c=r.map((t=>e.findTopicPartitionMetadata(t).map((e=>({topic:t,partitionId:e.partitionId})))));return s(c).forEach(((e,t)=>{const r=i[t%o];a[r]||(a[r]=Object.create(null)),a[r][e.topic]||(a[r][e.topic]=[]),a[r][e.topic].push(e.partitionId)})),Object.keys(a).map((e=>({memberId:e,memberAssignment:n.encode({version:this.version,assignment:a[e]})})))},protocol({topics:e}){return{name:this.name,metadata:o.encode({version:this.version,topics:e})}}})},24722:function(e){e.exports=()=>{let e,t;return{lock:new Promise((r=>{e=r,t=r})),unlock:e,unlockWithError:t}}},13529:function(e,t,r){const o=r(73278),n=r(72948);e.exports=class{constructor(e,t,r){this.fetchedOffset=t;const s=o.fromValue(this.fetchedOffset),{abortedTransactions:i,messages:a}=r;this.topic=e,this.partition=r.partition,this.highWatermark=r.highWatermark,this.rawMessages=a,this.messagesWithinOffset=this.rawMessages.filter((e=>o.fromValue(e.offset).gte(s))),this.messages=n({messages:this.messagesWithinOffset,abortedTransactions:i}).filter((e=>!e.isControlRecord))}isEmpty(){return 0===this.messages.length}isEmptyIncludingFiltered(){return 0===this.messagesWithinOffset.length}isEmptyDueToFiltering(){return this.isEmpty()&&this.rawMessages.length>0}isEmptyControlRecord(){return this.isEmpty()&&this.messagesWithinOffset.some((({isControlRecord:e})=>e))}isEmptyDueToLogCompactedMessages(){return this.rawMessages.length>0&&this.isEmptyIncludingFiltered()}firstOffset(){return this.isEmptyIncludingFiltered()?null:this.messagesWithinOffset[0].offset}lastOffset(){return this.isEmptyDueToLogCompactedMessages()?this.fetchedOffset:this.isEmptyIncludingFiltered()?o.fromValue(this.highWatermark).add(-1).toString():this.messagesWithinOffset[this.messagesWithinOffset.length-1].offset}offsetLag(){const e=o.fromValue(this.highWatermark).add(-1),t=o.fromValue(this.lastOffset());return e.add(t.multiply(-1)).toString()}offsetLagLow(){if(this.isEmptyIncludingFiltered())return"0";const e=o.fromValue(this.highWatermark).add(-1),t=o.fromValue(this.firstOffset());return e.add(t.multiply(-1)).toString()}}},90019:function(e,t,r){const o=r(74358),n=r(34742),s=r(15002),i=r(6779),a=r(8351),c=r(99701),u=r(89026),d=r(61770),p=r(13529),l=r(42499),h=r(11381),{events:{GROUP_JOIN:f,HEARTBEAT:m,CONNECT:g,RECEIVED_UNSUBSCRIBED_TOPICS:y}}=r(39311),{MemberAssignment:I}=r(737),{KafkaJSError:w,KafkaJSNonRetriableError:T,KafkaJSStaleTopicMetadataAssignment:b}=r(29879),{keys:E}=Object,S=["LEADER_NOT_AVAILABLE","NOT_LEADER_FOR_PARTITION","FENCED_LEADER_EPOCH","UNKNOWN_LEADER_EPOCH","UNKNOWN_TOPIC_OR_PARTITION"],C=Symbol("private:ConsumerGroup:join"),A=Symbol("private:ConsumerGroup:sync"),v=(Symbol("private:ConsumerGroup:heartbeat"),Symbol("private:ConsumerGroup:sharedHeartbeat"));e.exports=class{constructor({retry:e,cluster:t,groupId:r,topics:o,topicConfigurations:n,logger:s,instrumentationEmitter:i,assigners:a,sessionTimeout:d,rebalanceTimeout:p,maxBytesPerPartition:f,minBytes:g,maxBytes:y,maxWaitTimeInMs:I,autoCommit:w,autoCommitInterval:T,autoCommitThreshold:b,isolationLevel:E,rackId:S,metadataMaxAge:C}){this.cluster=t,this.groupId=r,this.topics=o,this.topicsSubscribed=o,this.topicConfigurations=n,this.logger=s.namespace("ConsumerGroup"),this.instrumentationEmitter=i,this.retrier=c(Object.assign({},e)),this.assigners=a,this.sessionTimeout=d,this.rebalanceTimeout=p,this.maxBytesPerPartition=f,this.minBytes=g,this.maxBytes=y,this.maxWaitTime=I,this.autoCommit=w,this.autoCommitInterval=T,this.autoCommitThreshold=b,this.isolationLevel=E,this.rackId=S,this.metadataMaxAge=C,this.seekOffset=new l,this.coordinator=null,this.generationId=null,this.leaderId=null,this.memberId=null,this.members=null,this.groupProtocol=null,this.partitionsPerSubscribedTopic=null,this.preferredReadReplicasPerTopicPartition={},this.offsetManager=null,this.subscriptionState=new h,this.lastRequest=Date.now(),this[v]=u((async({interval:e})=>{const{groupId:t,generationId:r,memberId:o}=this,n=Date.now();if(o&&n>=this.lastRequest+e){const e={groupId:t,memberId:o,groupGenerationId:r};await this.coordinator.heartbeat(e),this.instrumentationEmitter.emit(m,e),this.lastRequest=Date.now()}}))}isLeader(){return this.leaderId&&this.memberId===this.leaderId}async connect(){await this.cluster.connect(),this.instrumentationEmitter.emit(g),await this.cluster.refreshMetadataIfNecessary()}async[C](){const{groupId:e,sessionTimeout:t,rebalanceTimeout:r}=this;this.coordinator=await this.cluster.findGroupCoordinator({groupId:e});const o=await this.coordinator.joinGroup({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:this.memberId||"",groupProtocols:this.assigners.map((e=>e.protocol({topics:this.topicsSubscribed})))});this.generationId=o.generationId,this.leaderId=o.leaderId,this.memberId=o.memberId,this.members=o.members,this.groupProtocol=o.groupProtocol}async leave(){const{groupId:e,memberId:t}=this;t&&(await this.coordinator.leaveGroup({groupId:e,memberId:t}),this.memberId=null)}async[A](){let e=[];const{groupId:t,generationId:r,memberId:o,members:n,groupProtocol:s,topics:c,topicsSubscribed:u,coordinator:p}=this;if(this.isLeader()){this.logger.debug("Chosen as group leader",{groupId:t,generationId:r,memberId:o,topics:c});const i=this.assigners.find((({name:e})=>e===s));if(!i)throw new T(`Unsupported partition assigner "${s}", the assigner wasn't found in the assigners list`);await this.cluster.refreshMetadata(),e=await i.assign({members:n,topics:u}),this.logger.debug("Group assignment",{groupId:t,generationId:r,groupProtocol:s,assignment:e,topics:u})}this.partitionsPerSubscribedTopic=this.generatePartitionsPerSubscribedTopic();const{memberAssignment:l}=await this.coordinator.syncGroup({groupId:t,generationId:r,memberId:o,groupAssignment:e}),h=I.decode(l),f=null!=h?h.assignment:{};this.logger.debug("Received assignment",{groupId:t,generationId:r,memberId:o,memberAssignment:f});const m=E(f),g=a(m,u);if(g.length>0){const e={groupId:t,generationId:r,memberId:o,assignedTopics:m,topicsSubscribed:u,topicsNotSubscribed:g};this.instrumentationEmitter.emit(y,e),this.logger.warn("Consumer group received unsubscribed topics",{...e,helpUrl:i("docs/faq","why-am-i-receiving-messages-for-topics-i-m-not-subscribed-to")})}const w=a(m,g).map((e=>({topic:e,partitions:f[e]})));for(const e of w){const{topic:n,partitions:s}=e,i=this.partitionsPerSubscribedTopic.get(n);if(!s.every((e=>i.includes(e)))){this.logger.warn("Consumer is not aware of all assigned partitions, refreshing metadata",{groupId:t,generationId:r,memberId:o,topic:n,knownPartitions:i,assignedPartitions:s}),await this.cluster.refreshMetadata(),this.partitionsPerSubscribedTopic=this.generatePartitionsPerSubscribedTopic();break}}this.topics=w.map((({topic:e})=>e)),this.subscriptionState.assign(w),this.offsetManager=new d({cluster:this.cluster,topicConfigurations:this.topicConfigurations,instrumentationEmitter:this.instrumentationEmitter,memberAssignment:w.reduce(((e,{topic:t,partitions:r})=>({...e,[t]:r})),{}),autoCommit:this.autoCommit,autoCommitInterval:this.autoCommitInterval,autoCommitThreshold:this.autoCommitThreshold,coordinator:p,groupId:t,generationId:r,memberId:o})}joinAndSync(){const e=Date.now();return this.retrier((async t=>{try{await this[C](),await this[A]();const t=this.assigned().reduce(((e,{topic:t,partitions:r})=>({...e,[t]:r})),{}),r={groupId:this.groupId,memberId:this.memberId,leaderId:this.leaderId,isLeader:this.isLeader(),memberAssignment:t,groupProtocol:this.groupProtocol,duration:Date.now()-e};this.instrumentationEmitter.emit(f,r),this.logger.info("Consumer has joined the group",r)}catch(e){if((e=>"REBALANCE_IN_PROGRESS"===e.type||"NOT_COORDINATOR_FOR_GROUP"===e.type)(e))throw new w(e);t(e)}}))}resetOffset({topic:e,partition:t}){this.offsetManager.resetOffset({topic:e,partition:t})}resolveOffset({topic:e,partition:t,offset:r}){this.offsetManager.resolveOffset({topic:e,partition:t,offset:r})}seek({topic:e,partition:t,offset:r}){this.seekOffset.set(e,t,r)}pause(e){this.logger.info(`Pausing fetching from ${e.length} topics`,{topicPartitions:e}),this.subscriptionState.pause(e)}resume(e){this.logger.info(`Resuming fetching from ${e.length} topics`,{topicPartitions:e}),this.subscriptionState.resume(e)}assigned(){return this.subscriptionState.assigned()}paused(){return this.subscriptionState.paused()}async commitOffsetsIfNecessary(){await this.offsetManager.commitOffsetsIfNecessary()}async commitOffsets(e){await this.offsetManager.commitOffsets(e)}uncommittedOffsets(){return this.offsetManager.uncommittedOffsets()}async heartbeat({interval:e}){return this[v]({interval:e})}async fetch(){try{const{topics:e,maxBytesPerPartition:t,maxWaitTime:r,minBytes:i,maxBytes:a}=this,c={};for(await this.cluster.refreshMetadataIfNecessary(),this.checkForStaleAssignment();this.seekOffset.size>0;){const e=this.seekOffset.pop();this.logger.debug("Seek offset",{groupId:this.groupId,memberId:this.memberId,seek:e}),await this.offsetManager.seek(e)}const u=this.subscriptionState.paused(),d=this.subscriptionState.active(),l=o(d.map((({partitions:e})=>e))),h=d.filter((({partitions:e})=>e.length>0)).map((({topic:e})=>e));if(0===l.length)return this.logger.debug(`No active topic partitions, sleeping for ${this.maxWaitTime}ms`,{topics:e,activeTopicPartitions:d,pausedTopicPartitions:u}),await n(this.maxWaitTime),s([]);await this.offsetManager.resolveOffsets(),this.logger.debug(`Fetching from ${l.length} partitions for ${h.length} out of ${e.length} topics`,{topics:e,activeTopicPartitions:d,pausedTopicPartitions:u});for(const e of d){const r=this.findReadReplicaForPartitions(e.topic,e.partitions),o=E(r),n=this.offsetManager.committedOffsets();for(const s of o){const o=r[s].filter((t=>null!=n[e.topic][t])).map((r=>({partition:r,fetchOffset:this.offsetManager.nextOffset(e.topic,r).toString(),maxBytes:t})));c[s]=c[s]||[],c[s].push({topic:e.topic,partitions:o})}}const f=E(c).map((async e=>{const t=await this.cluster.findBroker({nodeId:e}),{responses:n}=await t.fetch({maxWaitTime:r,minBytes:i,maxBytes:a,isolationLevel:this.isolationLevel,topics:c[e],rackId:this.rackId}),s=n.map((({topicName:t,partitions:r})=>{const o=c[e].find((({topic:e})=>e===t));let n=this.preferredReadReplicasPerTopicPartition[t];return n||(this.preferredReadReplicasPerTopicPartition[t]=n={}),r.filter((e=>!this.seekOffset.has(t,e.partition)&&!this.subscriptionState.isPaused(t,e.partition))).map((e=>{const{partition:r,preferredReadReplica:s}=e;if(null!=s&&-1!==s){const{nodeId:e}=n[r]||{};e!==s&&this.logger.info(`Preferred read replica is now ${s}`,{groupId:this.groupId,memberId:this.memberId,topic:t,partition:r}),n[r]={nodeId:s,expireAt:Date.now()+this.metadataMaxAge}}const i=o.partitions.find((({partition:t})=>t===e.partition)),a=i.fetchOffset;return new p(t,a,e)}))}));return o(s)}));return 0===f.length?(await n(this.maxWaitTime),s([])):s(f,(e=>this.recoverFromFetch(e)))}catch(e){await this.recoverFromFetch(e)}}async recoverFromFetch(e){if(S.includes(e.type)||"KafkaJSTopicMetadataNotLoaded"===e.name)throw this.logger.debug("Stale cluster metadata, refreshing...",{groupId:this.groupId,memberId:this.memberId,error:e.message}),await this.cluster.refreshMetadata(),await this.joinAndSync(),new w(e.message);throw"KafkaJSStaleTopicMetadataAssignment"===e.name&&(this.logger.warn(`${e.message}, resync group`,{groupId:this.groupId,memberId:this.memberId,topic:e.topic,unknownPartitions:e.unknownPartitions}),await this.joinAndSync()),"KafkaJSOffsetOutOfRange"===e.name&&await this.recoverFromOffsetOutOfRange(e),"KafkaJSConnectionClosedError"===e.name&&this.cluster.removeBroker({host:e.host,port:e.port}),"KafkaJSBrokerNotFound"!==e.name&&"KafkaJSConnectionClosedError"!==e.name||(this.logger.debug(`${e.message}, refreshing metadata and retrying...`),await this.cluster.refreshMetadata()),e}async recoverFromOffsetOutOfRange(e){const t=this.preferredReadReplicasPerTopicPartition[e.topic];t&&"number"==typeof t[e.partition]?(this.logger.info("Offset out of range while fetching from follower, retrying with leader",{topic:e.topic,partition:e.partition,groupId:this.groupId,memberId:this.memberId}),delete t[e.partition]):(this.logger.error("Offset out of range, resetting to default offset",{topic:e.topic,partition:e.partition,groupId:this.groupId,memberId:this.memberId}),await this.offsetManager.setDefaultOffset({topic:e.topic,partition:e.partition}))}generatePartitionsPerSubscribedTopic(){const e=new Map;for(const t of this.topicsSubscribed){const r=this.cluster.findTopicPartitionMetadata(t).map((e=>e.partitionId)).sort();e.set(t,r)}return e}checkForStaleAssignment(){if(!this.partitionsPerSubscribedTopic)return;const e=this.generatePartitionsPerSubscribedTopic();for(const[t,r]of e){const e=a(r,this.partitionsPerSubscribedTopic.get(t));if(e.length>0)throw new b("Topic has been updated",{topic:t,unknownPartitions:e})}}hasSeekOffset({topic:e,partition:t}){return this.seekOffset.has(e,t)}findReadReplicaForPartitions(e,t){const r=this.cluster.findTopicPartitionMetadata(e),o=this.preferredReadReplicasPerTopicPartition[e];return t.reduce(((t,n)=>{const s=parseInt(n,10),i=r.find((e=>e.partitionId===s));if(!i)return t;if(null==i.leader)throw new w("Invalid partition metadata",{topic:e,partitionId:s,metadata:i});let a=i.leader;if(o){const{nodeId:t,expireAt:r}=o[s]||{};if(Date.now()>=r)this.logger.debug("Preferred read replica information has expired, using leader",{topic:e,partitionId:s,groupId:this.groupId,memberId:this.memberId,preferredReadReplica:t,leader:i.leader}),delete o[s];else if(null!=t){const r=i.offlineReplicas;Array.isArray(r)&&r.includes(a)?this.logger.debug("Preferred read replica is offline, using leader",{topic:e,partitionId:s,groupId:this.groupId,memberId:this.memberId,preferredReadReplica:t,leader:i.leader}):a=t}}const c=t[a]||[];return{...t,[a]:[...c,s]}}),{})}}},72948:function(e,t,r){const o=r(73278),n=Buffer.from([0,0,0,0]);e.exports=({messages:e,abortedTransactions:t})=>{const r=new Map;if(!t||!t.length)return e;const s=[...t];return e.filter((e=>{if(s.length&&o.fromValue(e.offset).gte(s[0].firstOffset)){const{producerId:e}=s.shift();r.set(e,!0)}const{producerId:t,inTransaction:i}=e.batchContext;if((({key:e})=>!!e&&Buffer.from(e).equals(n))(e))r.delete(t);else if(r.has(t)&&i)return!1;return!0}))}},40763:function(e,t,r){const o=r(73278),n=r(99701),{initialRetryTime:s}=r(27727),i=r(90019),a=r(82436),{events:c,wrap:u,unwrap:d}=r(39311),p=r(52190),{KafkaJSNonRetriableError:l}=r(29879),{roundRobin:h}=r(16996),{EARLIEST_OFFSET:f,LATEST_OFFSET:m}=r(53904),g=r(52845),{keys:y,values:I}=Object,{CONNECT:w,DISCONNECT:T,STOP:b,CRASH:E}=c,S=I(c),C=y(c).map((e=>`consumer.events.${e}`)).join(", "),A=[o.fromValue(f).toString(),o.fromValue(m).toString()];e.exports=({cluster:e,groupId:t,retry:r,logger:f,partitionAssigners:m=[h],sessionTimeout:I=3e4,rebalanceTimeout:v=6e4,heartbeatInterval:O=3e3,maxBytesPerPartition:x=1048576,minBytes:R=1,maxBytes:_=10485760,maxWaitTimeInMs:N=5e3,isolationLevel:k=g.READ_COMMITTED,rackId:B="",instrumentationEmitter:P,metadataMaxAge:L})=>{if(!t)throw new l("Consumer groupId must be a non-empty string.");const D=f.namespace("Consumer"),M=P||new p,q=m.map((r=>r({groupId:t,logger:D,cluster:e}))),U={};let F=null,G=null;if(O>=I)throw new l(`Consumer heartbeatInterval (${O}) must be lower than sessionTimeout (${I}). It is recommended to set heartbeatInterval to approximately a third of the sessionTimeout.`);const V=({autoCommit:o,autoCommitInterval:n,autoCommitThreshold:s})=>new i({logger:f,topics:y(U),topicConfigurations:U,retry:r,cluster:e,groupId:t,assigners:q,sessionTimeout:I,rebalanceTimeout:v,maxBytesPerPartition:x,minBytes:R,maxBytes:_,maxWaitTimeInMs:N,instrumentationEmitter:M,autoCommit:o,autoCommitInterval:n,autoCommitThreshold:s,isolationLevel:k,rackId:B,metadataMaxAge:L}),j=async()=>{try{await K(),D.debug("consumer has stopped, disconnecting",{groupId:t}),await e.disconnect(),M.emit(T)}catch(e){throw D.error(`Caught error when disconnecting the consumer: ${e.message}`,{stack:e.stack,groupId:t}),e}},K=async()=>{try{F&&(await F.stop(),F=null,G=null,M.emit(b)),D.info("Stopped",{groupId:t})}catch(e){throw D.error(`Caught error when stopping the consumer: ${e.message}`,{stack:e.stack,groupId:t}),e}};return{connect:async()=>{await e.connect(),M.emit(w)},disconnect:j,subscribe:async({topic:r,fromBeginning:o=!1})=>{if(G)throw new l("Cannot subscribe to topic while consumer is running");if(!r)throw new l(`Invalid topic ${r}`);const n=r instanceof RegExp;if("string"!=typeof r&&!n)throw new l(`Invalid topic ${r} (${typeof r}), the topic name has to be a String or a RegExp`);const s=[];if(n){const o=r,n=(await e.metadata()).topicMetadata.map((({topic:e})=>e)).filter((e=>o.test(e)));D.debug("Subscription based on RegExp",{groupId:t,topicRegExp:o.toString(),matchedTopics:n}),s.push(...n)}else s.push(r);for(const e of s)U[e]={fromBeginning:o};await e.addMultipleTargetTopics(s)},stop:K,run:async({autoCommit:o=!0,autoCommitInterval:n=null,autoCommitThreshold:i=null,eachBatchAutoResolve:c=!0,partitionsConsumedConcurrently:u=1,eachBatch:d=null,eachMessage:p=null}={})=>{if(G)return void D.warn("consumer#run was called, but the consumer is already running",{groupId:t});G=V({autoCommit:o,autoCommitInterval:n,autoCommitThreshold:i});const l=async e=>{D.info("Starting",{groupId:t}),F=(({eachBatchAutoResolve:e,eachBatch:t,eachMessage:o,onCrash:n,autoCommit:s,partitionsConsumedConcurrently:i})=>new a({autoCommit:s,logger:f,consumerGroup:G,instrumentationEmitter:M,eachBatchAutoResolve:e,eachBatch:t,eachMessage:o,heartbeatInterval:O,retry:r,onCrash:n,partitionsConsumedConcurrently:i}))({autoCommit:o,eachBatchAutoResolve:c,eachBatch:d,eachMessage:p,onCrash:e,partitionsConsumedConcurrently:u}),await F.start()},h=async o=>{D.error(`Crash: ${o.name}: ${o.message}`,{groupId:t,retryCount:o.retryCount,stack:o.stack}),"KafkaJSConnectionClosedError"===o.name&&e.removeBroker({host:o.host,port:o.port}),await j();const a=("KafkaJSNumberOfRetriesExceeded"===o.name||!0===o.retriable)&&(!r||!r.restartOnFailure||await r.restartOnFailure(o).catch((e=>(D.error('Caught error when invoking user-provided "restartOnFailure" callback. Defaulting to restarting.',{error:e.message||e,originalError:o.message||o,groupId:t}),!0))));if(M.emit(E,{error:o,groupId:t,restart:a}),a){const e=o.retryTime||r&&r.initialRetryTime||s;D.error(`Restarting the consumer in ${e}ms`,{retryCount:o.retryCount,retryTime:e,groupId:t}),setTimeout((()=>(e=>{G=V({autoCommitInterval:n,autoCommitThreshold:i}),l(e)})(h)),e)}};await l(h)},commitOffsets:async(e=[])=>{const t=e.reduce(((e,{topic:t,partition:r,offset:n,metadata:s=null})=>{if(!t)throw new l(`Invalid topic ${t}`);if(isNaN(r))throw new l(`Invalid partition, expected a number received ${r}`);let i;try{i=o.fromValue(n)}catch(e){throw new l(`Invalid offset, expected a long received ${n}`)}if(i.lessThan(0))throw new l("Offset must not be a negative number");if(null!==s&&"string"!=typeof s)throw new l(`Invalid offset metadata, expected string or null, received ${s}`);const a=e[t]||[];return a.push({partition:r,offset:i,metadata:s}),{...e,[t]:a}}),{});if(!G)throw new l("Consumer group was not initialized, consumer#run must be called first");const r=Object.keys(t);return F.commitOffsets({topics:r.map((e=>({topic:e,partitions:t[e]})))})},seek:({topic:e,partition:t,offset:r})=>{if(!e)throw new l(`Invalid topic ${e}`);if(isNaN(t))throw new l(`Invalid partition, expected a number received ${t}`);let n;try{n=o.fromValue(r)}catch(e){throw new l(`Invalid offset, expected a long received ${r}`)}if(n.lessThan(0)&&!A.includes(n.toString()))throw new l("Offset must not be a negative number");if(!G)throw new l("Consumer group was not initialized, consumer#run must be called first");G.seek({topic:e,partition:t,offset:n.toString()})},describeGroup:async()=>{const o=await e.findGroupCoordinator({groupId:t});return n(r)((async()=>{const{groups:e}=await o.describeGroups({groupIds:[t]});return e.find((e=>e.groupId===t))}))},pause:(e=[])=>{for(const t of e){if(!t||!t.topic)throw new l(`Invalid topic ${t&&t.topic||t}`);if(void 0!==t.partitions&&(!Array.isArray(t.partitions)||t.partitions.some(isNaN)))throw new l(`Array of valid partitions required to pause specific partitions instead of ${t.partitions}`)}if(!G)throw new l("Consumer group was not initialized, consumer#run must be called first");G.pause(e)},paused:()=>G?G.paused():[],resume:(e=[])=>{for(const t of e){if(!t||!t.topic)throw new l(`Invalid topic ${t&&t.topic||t}`);if(void 0!==t.partitions&&(!Array.isArray(t.partitions)||t.partitions.some(isNaN)))throw new l(`Array of valid partitions required to resume specific partitions instead of ${t.partitions}`)}if(!G)throw new l("Consumer group was not initialized, consumer#run must be called first");G.resume(e)},on:(e,t)=>{if(!S.includes(e))throw new l(`Event name should be one of ${C}`);return M.addListener(d(e),(r=>{r.type=u(r.type),Promise.resolve(t(r)).catch((t=>{D.error(`Failed to execute listener: ${t.message}`,{eventName:e,stack:t.stack})}))}))},events:c,logger:()=>D}}},39311:function(e,t,r){const o=r(76),n=r(51429),s=r(28202),i=n("consumer"),a={HEARTBEAT:i("heartbeat"),COMMIT_OFFSETS:i("commit_offsets"),GROUP_JOIN:i("group_join"),FETCH:i("fetch"),FETCH_START:i("fetch_start"),START_BATCH_PROCESS:i("start_batch_process"),END_BATCH_PROCESS:i("end_batch_process"),CONNECT:i("connect"),DISCONNECT:i("disconnect"),STOP:i("stop"),CRASH:i("crash"),REBALANCING:i("rebalancing"),RECEIVED_UNSUBSCRIBED_TOPICS:i("received_unsubscribed_topics"),REQUEST:i(s.NETWORK_REQUEST),REQUEST_TIMEOUT:i(s.NETWORK_REQUEST_TIMEOUT),REQUEST_QUEUE_SIZE:i(s.NETWORK_REQUEST_QUEUE_SIZE)},c={[a.REQUEST]:s.NETWORK_REQUEST,[a.REQUEST_TIMEOUT]:s.NETWORK_REQUEST_TIMEOUT,[a.REQUEST_QUEUE_SIZE]:s.NETWORK_REQUEST_QUEUE_SIZE},u=o(c);e.exports={events:a,wrap:e=>u[e]||e,unwrap:e=>c[e]||e}},61770:function(e,t,r){const o=r(73278),n=r(74358),s=r(96390),i=r(54137),{events:{COMMIT_OFFSETS:a}}=r(39311),{keys:c,assign:u}=Object,d=Symbol("private:OffsetManager:committedOffsets");e.exports=class{constructor({cluster:e,coordinator:t,memberAssignment:r,autoCommit:o,autoCommitInterval:n,autoCommitThreshold:s,topicConfigurations:i,instrumentationEmitter:a,groupId:u,generationId:d,memberId:p}){this.cluster=e,this.coordinator=t,this.memberAssignment=r,this.topicConfigurations=i,this.instrumentationEmitter=a,this.groupId=u,this.generationId=d,this.memberId=p,this.autoCommit=o,this.autoCommitInterval=n,this.autoCommitThreshold=s,this.lastCommit=Date.now(),this.topics=c(r),this.clearAllOffsets()}nextOffset(e,t){this.resolvedOffsets[e][t]||(this.resolvedOffsets[e][t]=this.committedOffsets()[e][t]);let r=this.resolvedOffsets[e][t];return s(r)&&(r="0"),o.fromValue(r)}async getCoordinator(){return this.coordinator.isConnected()||(this.coordinator=await this.cluster.findBroker(this.coordinator)),this.coordinator}resetOffset({topic:e,partition:t}){this.resolvedOffsets[e][t]=this.committedOffsets()[e][t]}resolveOffset({topic:e,partition:t,offset:r}){this.resolvedOffsets[e][t]=o.fromValue(r).add(1).toString()}countResolvedOffsets(){const e=this.committedOffsets(),t=this.topics.map((t=>{return r=this.resolvedOffsets[t],n=e[t],c(r).map((e=>((e,t)=>{const r=o.fromValue(e);return s(t)?r:r.subtract(o.fromValue(t))})(r[e],n[e])));var r,n}));return n(t).reduce(((e,t)=>e.add(t)),o.fromValue(0))}async setDefaultOffset({topic:e,partition:t}){const{groupId:r,generationId:o,memberId:n}=this,s=this.cluster.defaultOffset(this.topicConfigurations[e]),i=await this.getCoordinator();await i.offsetCommit({groupId:r,memberId:n,groupGenerationId:o,topics:[{topic:e,partitions:[{partition:t,offset:s}]}]}),this.clearOffsets({topic:e,partition:t})}async seek({topic:e,partition:t,offset:r}){if(!this.memberAssignment[e]||!this.memberAssignment[e].includes(t))return;if(!this.autoCommit)return void this.resolveOffset({topic:e,partition:t,offset:o.fromValue(r).subtract(1).toString()});const{groupId:n,generationId:s,memberId:i}=this,a=await this.getCoordinator();await a.offsetCommit({groupId:n,memberId:i,groupGenerationId:s,topics:[{topic:e,partitions:[{partition:t,offset:r}]}]}),this.clearOffsets({topic:e,partition:t})}async commitOffsetsIfNecessary(){const e=Date.now(),t=null!=this.autoCommitInterval&&e>=this.lastCommit+this.autoCommitInterval,r=null!=this.autoCommitThreshold&&this.countResolvedOffsets().gte(o.fromValue(this.autoCommitThreshold));if(t||r)return this.commitOffsets()}uncommittedOffsets(){const e=e=>c(this.resolvedOffsets[e]),t=e=>t=>({partition:t,offset:this.resolvedOffsets[e][t]}),r=e=>({partition:t,offset:r})=>r!==this.committedOffsets()[e][t]&&o.fromValue(r).greaterThanOrEqual(0);return{topics:this.topics.map((o=>({topic:o,partitions:e(o).map(t(o)).filter(r(o))}))).filter((({partitions:e})=>e.length>0))}}async commitOffsets(e={}){const{groupId:t,generationId:r,memberId:o}=this,{topics:n=this.uncommittedOffsets().topics}=e;if(0===n.length)return void(this.lastCommit=Date.now());const s={groupId:t,memberId:o,groupGenerationId:r,topics:n};try{const e=await this.getCoordinator();await e.offsetCommit(s),this.instrumentationEmitter.emit(a,s),n.forEach((({topic:e,partitions:t})=>{const r=t.reduce(((e,{partition:t,offset:r})=>u(e,{[t]:r})),{});this[d][e]=u({},this.committedOffsets()[e],r)})),this.lastCommit=Date.now()}catch(e){throw"NOT_COORDINATOR_FOR_GROUP"===e.type&&await this.cluster.refreshMetadata(),e}}async resolveOffsets(){const{groupId:e}=this,t=e=>t=>s(this.committedOffsets()[e][t]),r=this.topics.map((e=>({topic:e,partitions:this.memberAssignment[e].filter(t(e)).map((e=>({partition:e})))}))).filter((e=>e.partitions.length>0));if(0===r.length)return;const o=await this.getCoordinator(),{responses:n}=await o.offsetFetch({groupId:e,topics:r}),a=n.map((({topic:e,partitions:t})=>u({topic:e,partitions:t.filter((({offset:e})=>s(e))).map((({partition:e})=>u({partition:e})))},this.topicConfigurations[e]))),c=(e,{partition:t,offset:r})=>u(e,{[t]:r});let d=n;if(a.some((e=>e.partitions.length>0))){const e=await this.cluster.fetchTopicsOffset(a);d=i(n,e)}d.forEach((({topic:e,partitions:t})=>{this.committedOffsets()[e]=t.reduce(c,{...this.committedOffsets()[e]})}))}clearOffsets({topic:e,partition:t}){delete this.committedOffsets()[e][t],delete this.resolvedOffsets[e][t]}clearAllOffsets(){const e=this.committedOffsets();for(const t in e)delete e[t];for(const t of this.topics)e[t]={};this.resolvedOffsets=this.topics.reduce(((e,t)=>u(e,{[t]:{}})),{})}committedOffsets(){return this[d]||(this[d]=this.groupId?this.cluster.committedOffsets({groupId:this.groupId}):{}),this[d]}}},54137:function(e,t,r){const o=r(96390),{keys:n,assign:s}=Object,i=(e,{partition:t,offset:r})=>s(e,{[t]:r}),a=(e,{topic:t,partitions:r})=>s(e,{[t]:r.reduce(i,{})});e.exports=(e,t)=>{const r=e.reduce(a,{}),s=t.reduce(a,{});return n(r).map((e=>{const t=r[e];return{topic:e,partitions:n(t).map((r=>{const n=t[r],i=o(n)?s[e][r]:n;return{partition:Number(r),offset:i}}))}}))}},96390:function(e,t,r){const o=r(73278);e.exports=e=>!e&&0!==e||o.fromValue(e).isNegative()},82436:function(e,t,r){const{EventEmitter:o}=r(82361),n=r(73278),s=r(99701),i=r(24230),{KafkaJSError:a}=r(29879),c=r(24722),{events:{FETCH:u,FETCH_START:d,START_BATCH_PROCESS:p,END_BATCH_PROCESS:l,REBALANCING:h}}=r(39311),f=e=>"REBALANCE_IN_PROGRESS"===e.type||"NOT_COORDINATOR_FOR_GROUP"===e.type,m=e=>e instanceof a,g="consuming-stop";e.exports=class extends o{constructor({logger:e,consumerGroup:t,instrumentationEmitter:r,eachBatchAutoResolve:o=!0,partitionsConsumedConcurrently:n,eachBatch:i,eachMessage:a,heartbeatInterval:c,onCrash:u,retry:d,autoCommit:p=!0}){super(),this.logger=e.namespace("Runner"),this.consumerGroup=t,this.instrumentationEmitter=r,this.eachBatchAutoResolve=o,this.eachBatch=i,this.eachMessage=a,this.heartbeatInterval=c,this.retrier=s(Object.assign({},d)),this.onCrash=u,this.autoCommit=p,this.partitionsConsumedConcurrently=n,this.running=!1,this.consuming=!1}get consuming(){return this._consuming}set consuming(e){this._consuming!==e&&(this._consuming=e,this.emit(e?"consuming-start":g))}async join(){await this.consumerGroup.joinAndSync(),this.running=!0}async scheduleJoin(){if(this.running)return this.join().catch(this.onCrash);this.logger.debug("consumer not running, exiting",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId})}async start(){if(!this.running)try{await this.consumerGroup.connect(),await this.join(),this.running=!0,this.scheduleFetch()}catch(e){this.onCrash(e)}}async stop(){if(this.running){this.logger.debug("stop consumer group",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId}),this.running=!1;try{await this.waitForConsumer(),await this.consumerGroup.leave()}catch(e){}}}waitForConsumer(){return new Promise((e=>{if(!this.consuming)return e();this.logger.debug("waiting for consumer to finish...",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId}),this.once(g,(()=>e()))}))}async processEachMessage(e){const{topic:t,partition:r}=e;for(const o of e.messages){if(!this.running||this.consumerGroup.hasSeekOffset({topic:t,partition:r}))break;try{await this.eachMessage({topic:t,partition:r,message:o,heartbeat:async()=>{await this.consumerGroup.heartbeat({interval:this.heartbeatInterval})}})}catch(e){throw m(e)||this.logger.error("Error when calling eachMessage",{topic:t,partition:r,offset:o.offset,stack:e.stack,error:e}),await this.autoCommitOffsets(),e}this.consumerGroup.resolveOffset({topic:t,partition:r,offset:o.offset}),await this.consumerGroup.heartbeat({interval:this.heartbeatInterval}),await this.autoCommitOffsetsIfNecessary()}}async processEachBatch(e){const{topic:t,partition:r}=e,o=e.messages[e.messages.length-1];try{await this.eachBatch({batch:e,resolveOffset:s=>{const i=o&&(a=s,c=o.offset,n.fromValue(a).equals(n.fromValue(c)))?e.lastOffset():s;var a,c;this.consumerGroup.resolveOffset({topic:t,partition:r,offset:i})},heartbeat:async()=>{await this.consumerGroup.heartbeat({interval:this.heartbeatInterval})},commitOffsetsIfNecessary:async e=>e?this.consumerGroup.commitOffsets(e):this.consumerGroup.commitOffsetsIfNecessary(),uncommittedOffsets:()=>this.consumerGroup.uncommittedOffsets(),isRunning:()=>this.running,isStale:()=>this.consumerGroup.hasSeekOffset({topic:t,partition:r})})}catch(o){throw m(o)||this.logger.error("Error when calling eachBatch",{topic:t,partition:r,offset:e.firstOffset(),stack:o.stack,error:o}),await this.autoCommitOffsets(),o}this.eachBatchAutoResolve&&this.consumerGroup.resolveOffset({topic:t,partition:r,offset:e.lastOffset()})}async fetch(){const e=Date.now();this.instrumentationEmitter.emit(d,{});const t=await this.consumerGroup.fetch();this.instrumentationEmitter.emit(u,{numberOfBatches:0,duration:Date.now()-e});const r=async e=>{const t=Date.now(),r={topic:e.topic,partition:e.partition,highWatermark:e.highWatermark,offsetLag:e.offsetLag(),offsetLagLow:e.offsetLagLow(),batchSize:e.messages.length,firstOffset:e.firstOffset(),lastOffset:e.lastOffset()};if(e.isEmptyDueToFiltering())return this.instrumentationEmitter.emit(p,r),this.consumerGroup.resolveOffset({topic:e.topic,partition:e.partition,offset:e.lastOffset()}),await this.autoCommitOffsetsIfNecessary(),void this.instrumentationEmitter.emit(l,{...r,duration:Date.now()-t});e.isEmpty()||(this.instrumentationEmitter.emit(p,r),this.eachMessage?await this.processEachMessage(e):this.eachBatch&&await this.processEachBatch(e),this.instrumentationEmitter.emit(l,{...r,duration:Date.now()-t}),await this.consumerGroup.heartbeat({interval:this.heartbeatInterval}))},{lock:o,unlock:n,unlockWithError:s}=c(),a=i({limit:this.partitionsConsumedConcurrently});let h=!1,f=0,m=0;const g=[];for(;;){const e=t.next();if(e.done)break;this.running?g.push((async()=>{const t=await e.value;m+=t.length,t.map((e=>a((async()=>{try{if(!this.running)return;await r(e)}catch(e){s(e)}finally{f++,h&&f===m&&n()}})).catch(s)))})):e.value.catch((e=>{this.logger.debug("Ignoring error in fetch request while stopping runner",{error:e.message||e,stack:e.stack})}))}await Promise.all(g.map((e=>e()))),h=!0,m===f&&n();const y=await o;if(y)throw y;await this.autoCommitOffsets(),await this.consumerGroup.heartbeat({interval:this.heartbeatInterval})}async scheduleFetch(){if(this.running)return this.retrier((async(e,t,r)=>{try{this.consuming=!0,await this.fetch(),this.consuming=!1,this.running&&setImmediate((()=>this.scheduleFetch()))}catch(o){if(!this.running)return void this.logger.debug("consumer not running, exiting",{error:o.message,groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId});if(f(o))return this.logger.warn("The group is rebalancing, re-joining",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,error:o.message,retryCount:t,retryTime:r}),this.instrumentationEmitter.emit(h,{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId}),await this.join(),void setImmediate((()=>this.scheduleFetch()));if("UNKNOWN_MEMBER_ID"===o.type)return this.logger.error("The coordinator is not aware of this member, re-joining the group",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,error:o.message,retryCount:t,retryTime:r}),this.consumerGroup.memberId=null,await this.join(),void setImmediate((()=>this.scheduleFetch()));if("KafkaJSOffsetOutOfRange"===o.name)return void setImmediate((()=>this.scheduleFetch()));if("KafkaJSNotImplemented"===o.name)return e(o);throw this.logger.debug("Error while fetching data, trying again...",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,error:o.message,stack:o.stack,retryCount:t,retryTime:r}),o}finally{this.consuming=!1}})).catch(this.onCrash);this.logger.debug("consumer not running, exiting",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId})}autoCommitOffsets(){if(this.autoCommit)return this.consumerGroup.commitOffsets()}autoCommitOffsetsIfNecessary(){if(this.autoCommit)return this.consumerGroup.commitOffsetsIfNecessary()}commitOffsets(e){if(this.running)return this.retrier((async(t,r,o)=>{try{await this.consumerGroup.commitOffsets(e)}catch(n){if(!this.running)return void this.logger.debug("consumer not running, exiting",{error:n.message,groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,offsets:e});if(f(n)&&(this.logger.warn("The group is rebalancing, re-joining",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,error:n.message,retryCount:r,retryTime:o}),this.instrumentationEmitter.emit(h,{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId}),setImmediate((()=>this.scheduleJoin())),t(new a(n))),"UNKNOWN_MEMBER_ID"===n.type&&(this.logger.error("The coordinator is not aware of this member, re-joining the group",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,error:n.message,retryCount:r,retryTime:o}),this.consumerGroup.memberId=null,setImmediate((()=>this.scheduleJoin())),t(new a(n))),"KafkaJSNotImplemented"===n.name)return t(n);throw this.logger.debug("Error while committing offsets, trying again...",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,error:n.message,stack:n.stack,retryCount:r,retryTime:o,offsets:e}),n}}));this.logger.debug("consumer not running, exiting",{groupId:this.consumerGroup.groupId,memberId:this.consumerGroup.memberId,offsets:e})}}},42499:function(e){e.exports=class extends Map{set(e,t,r){super.set([e,t],r)}has(e,t){return Array.from(this.keys()).some((([r,o])=>r===e&&o===t))}pop(){if(0===this.size)return;const[e,t]=this.entries().next().value;this.delete(e);const[r,o]=e;return{topic:r,partition:o,offset:t}}}},11381:function(e){const t=e=>({topic:e,paused:new Set,pauseAll:!1,resumed:new Set});e.exports=class{constructor(){this.assignedPartitionsByTopic={},this.subscriptionStatesByTopic={}}assign(e=[]){this.assignedPartitionsByTopic=e.reduce(((e,{topic:t,partitions:r=[]})=>({...e,[t]:{topic:t,partitions:r}})),{})}pause(e=[]){e.forEach((({topic:e,partitions:r})=>{const o=this.subscriptionStatesByTopic[e]||t(e);void 0===r?(o.paused.clear(),o.resumed.clear(),o.pauseAll=!0):Array.isArray(r)&&(r.forEach((e=>{o.paused.add(e),o.resumed.delete(e)})),o.pauseAll=!1),this.subscriptionStatesByTopic[e]=o}))}resume(e=[]){e.forEach((({topic:e,partitions:r})=>{const o=this.subscriptionStatesByTopic[e]||t(e);void 0===r?(o.paused.clear(),o.resumed.clear(),o.pauseAll=!1):Array.isArray(r)&&r.forEach((e=>{o.paused.delete(e),o.pauseAll&&o.resumed.add(e)})),this.subscriptionStatesByTopic[e]=o}))}assigned(){return Object.values(this.assignedPartitionsByTopic).map((({topic:e,partitions:t})=>({topic:e,partitions:t.sort()})))}active(){return Object.values(this.assignedPartitionsByTopic).map((({topic:e,partitions:t})=>({topic:e,partitions:t.filter((t=>!this.isPaused(e,t))).sort()})))}paused(){return Object.values(this.assignedPartitionsByTopic).map((({topic:e,partitions:t})=>({topic:e,partitions:t.filter((t=>this.isPaused(e,t))).sort()}))).filter((({partitions:e})=>0!==e.length))}isPaused(e,t){const r=this.subscriptionStatesByTopic[e];if(!r)return!1;const o=r.resumed.has(t),n=r.paused.has(t);return r.pauseAll&&!o||n}}},79152:function(e){e.exports=()=>({KAFKAJS_DEBUG_PROTOCOL_BUFFERS:process.env.KAFKAJS_DEBUG_PROTOCOL_BUFFERS,KAFKAJS_DEBUG_EXTENDED_PROTOCOL_BUFFERS:process.env.KAFKAJS_DEBUG_EXTENDED_PROTOCOL_BUFFERS})},29879:function(e,t,r){const o=r(65557),{bugs:n}=o;class s extends Error{constructor(e,{retriable:t=!0}={}){super(e),Error.captureStackTrace(this,this.constructor),this.message=e.message||e,this.name="KafkaJSError",this.retriable=t,this.helpUrl=e.helpUrl}}class i extends s{constructor(e){super(e,{retriable:!1}),this.name="KafkaJSNonRetriableError",this.originalError=e}}class a extends s{constructor(e,{retriable:t=e.retriable}={}){super(e,{retriable:t}),this.type=e.type,this.code=e.code,this.name="KafkaJSProtocolError"}}class c extends s{constructor(e,{broker:t,code:r}={}){super(e),this.broker=t,this.code=r,this.name="KafkaJSConnectionError"}}class u extends s{constructor(){super(...arguments),this.name="KafkaJSMetadataNotLoaded"}}class d extends i{constructor(){super(...arguments),this.name="KafkaJSTimeout"}}const p=n?n.url:null;class l extends Error{constructor(e,t){super(e),this.errors=t,this.name="KafkaJSAggregateError"}}e.exports={KafkaJSError:s,KafkaJSNonRetriableError:i,KafkaJSPartialMessageError:class extends i{constructor(){super(...arguments),this.name="KafkaJSPartialMessageError"}},KafkaJSBrokerNotFound:class extends s{constructor(){super(...arguments),this.name="KafkaJSBrokerNotFound"}},KafkaJSProtocolError:a,KafkaJSConnectionError:c,KafkaJSConnectionClosedError:class extends c{constructor(e,{host:t,port:r}={}){super(e,{broker:`${t}:${r}`}),this.host=t,this.port=r,this.name="KafkaJSConnectionClosedError"}},KafkaJSRequestTimeoutError:class extends s{constructor(e,{broker:t,correlationId:r,createdAt:o,sentAt:n,pendingDuration:s}={}){super(e),this.broker=t,this.correlationId=r,this.createdAt=o,this.sentAt=n,this.pendingDuration=s,this.name="KafkaJSRequestTimeoutError"}},KafkaJSSASLAuthenticationError:class extends i{constructor(){super(...arguments),this.name="KafkaJSSASLAuthenticationError"}},KafkaJSNumberOfRetriesExceeded:class extends i{constructor(e,{retryCount:t,retryTime:r}){super(e),this.stack=`${this.name}\n  Caused by: ${e.stack}`,this.originalError=e,this.retryCount=t,this.retryTime=r,this.name="KafkaJSNumberOfRetriesExceeded"}},KafkaJSOffsetOutOfRange:class extends a{constructor(e,{topic:t,partition:r}){super(e),this.topic=t,this.partition=r,this.name="KafkaJSOffsetOutOfRange"}},KafkaJSMemberIdRequired:class extends a{constructor(e,{memberId:t}){super(e),this.memberId=t,this.name="KafkaJSMemberIdRequired"}},KafkaJSGroupCoordinatorNotFound:class extends i{constructor(){super(...arguments),this.name="KafkaJSGroupCoordinatorNotFound"}},KafkaJSNotImplemented:class extends i{constructor(){super(...arguments),this.name="KafkaJSNotImplemented"}},KafkaJSMetadataNotLoaded:u,KafkaJSTopicMetadataNotLoaded:class extends u{constructor(e,{topic:t}={}){super(e),this.topic=t,this.name="KafkaJSTopicMetadataNotLoaded"}},KafkaJSStaleTopicMetadataAssignment:class extends s{constructor(e,{topic:t,unknownPartitions:r}={}){super(e),this.topic=t,this.unknownPartitions=r,this.name="KafkaJSStaleTopicMetadataAssignment"}},KafkaJSDeleteGroupsError:class extends s{constructor(e,t=[]){super(e),this.groups=t,this.name="KafkaJSDeleteGroupsError"}},KafkaJSTimeout:d,KafkaJSLockTimeout:class extends d{constructor(){super(...arguments),this.name="KafkaJSLockTimeout"}},KafkaJSServerDoesNotSupportApiKey:class extends i{constructor(e,{apiKey:t,apiName:r}={}){super(e),this.apiKey=t,this.apiName=r,this.name="KafkaJSServerDoesNotSupportApiKey"}},KafkaJSUnsupportedMagicByteInMessageSet:class extends i{constructor(){super(...arguments),this.name="KafkaJSUnsupportedMagicByteInMessageSet"}},KafkaJSDeleteTopicRecordsError:class extends s{constructor({partitions:e}){super("Error while deleting records",{retriable:e.filter((({error:e})=>null!=e)).every((({error:e})=>!0===e.retriable))}),this.name="KafkaJSDeleteTopicRecordsError",this.partitions=e}},KafkaJSInvariantViolation:class extends i{constructor(e){const t=e.message||e;if(super(`Invariant violated: ${t}. This is likely a bug and should be reported.`),this.name="KafkaJSInvariantViolation",null!==p){const e=encodeURIComponent(`Invariant violation: ${t}`);this.helpUrl=`${p}/new?assignees=&labels=bug&template=bug_report.md&title=${e}`}}},KafkaJSInvalidVarIntError:class extends i{constructor(){super(...arguments),this.name="KafkaJSNonRetriableError"}},KafkaJSInvalidLongError:class extends i{constructor(){super(...arguments),this.name="KafkaJSNonRetriableError"}},KafkaJSCreateTopicError:class extends a{constructor(e,t){super(e),this.topic=t,this.name="KafkaJSCreateTopicError"}},KafkaJSAggregateError:l}},873:function(e,t,r){const{createLogger:o,LEVELS:{INFO:n}}=r(10354),s=r(52190),i=r(91230),a=r(8048),c=r(73798),u=r(40763),d=r(55929),p=r(52845),l=r(89992),h=Symbol("private:Kafka:createCluster"),f=Symbol("private:Kafka:clusterRetry"),m=Symbol("private:Kafka:logger"),g=Symbol("private:Kafka:offsets");e.exports=class{constructor({brokers:e,ssl:t,sasl:r,clientId:s,connectionTimeout:c,authenticationTimeout:u,reauthenticationThreshold:d,requestTimeout:p,enforceRequestTimeout:y=!1,retry:I,socketFactory:w=l(),logLevel:T=n,logCreator:b=i}){this[g]=new Map,this[m]=o({level:T,logCreator:b}),this[f]=I,this[h]=({metadataMaxAge:o,allowAutoTopicCreation:n=!0,maxInFlightRequests:i=null,instrumentationEmitter:l=null,isolationLevel:h})=>new a({logger:this[m],retry:this[f],offsets:this[g],socketFactory:w,brokers:e,ssl:t,sasl:r,clientId:s,connectionTimeout:c,authenticationTimeout:u,reauthenticationThreshold:d,requestTimeout:p,enforceRequestTimeout:y,metadataMaxAge:o,instrumentationEmitter:l,allowAutoTopicCreation:n,maxInFlightRequests:i,isolationLevel:h})}producer({createPartitioner:e,retry:t,metadataMaxAge:r=3e5,allowAutoTopicCreation:o,idempotent:n,transactionalId:i,transactionTimeout:a,maxInFlightRequests:u}={}){const d=new s,p=this[h]({metadataMaxAge:r,allowAutoTopicCreation:o,maxInFlightRequests:u,instrumentationEmitter:d});return c({retry:{...this[f],...t},logger:this[m],cluster:p,createPartitioner:e,idempotent:n,transactionalId:i,transactionTimeout:a,instrumentationEmitter:d})}consumer({groupId:e,partitionAssigners:t,metadataMaxAge:r=3e5,sessionTimeout:o,rebalanceTimeout:n,heartbeatInterval:i,maxBytesPerPartition:a,minBytes:c,maxBytes:d,maxWaitTimeInMs:l,retry:g={retries:5},allowAutoTopicCreation:y,maxInFlightRequests:I,readUncommitted:w=!1,rackId:T=""}={}){const b=w?p.READ_UNCOMMITTED:p.READ_COMMITTED,E=new s,S=this[h]({metadataMaxAge:r,allowAutoTopicCreation:y,maxInFlightRequests:I,isolationLevel:b,instrumentationEmitter:E});return u({retry:{...this[f],...g},logger:this[m],cluster:S,groupId:e,partitionAssigners:t,sessionTimeout:o,rebalanceTimeout:n,heartbeatInterval:i,maxBytesPerPartition:a,minBytes:c,maxBytes:d,maxWaitTimeInMs:l,isolationLevel:b,instrumentationEmitter:E,rackId:T,metadataMaxAge:r})}admin({retry:e}={}){const t=new s,r=this[h]({allowAutoTopicCreation:!1,instrumentationEmitter:t});return d({retry:{...this[f],...e},logger:this[m],instrumentationEmitter:t,cluster:r})}logger(){return this[m]}}},52190:function(e,t,r){const{EventEmitter:o}=r(82361),n=r(40267),{KafkaJSError:s}=r(29879);e.exports=class{constructor(){this.emitter=new o}emit(e,t){if(!e)throw new s("Invalid event name",{retriable:!1});if(this.emitter.listenerCount(e)>0){const r=new n(e,t);this.emitter.emit(e,r)}}addListener(e,t){return this.emitter.addListener(e,t),()=>this.emitter.removeListener(e,t)}}},40267:function(e){let t=0;e.exports=class{constructor(e,r){this.id=(t===Number.MAX_VALUE&&(t=0),t++),this.type=e,this.timestamp=Date.now(),this.payload=r}}},51429:function(e){e.exports=e=>t=>`${e}.${t}`},91230:function(e,t,r){const{LEVELS:o}=r(10354);e.exports=()=>({namespace:e,level:t,label:r,log:n})=>{const s=e?`[${e}] `:"",i=JSON.stringify(Object.assign({level:r},n,{message:`${s}${n.message}`}));switch(t){case o.INFO:return console.info(i);case o.ERROR:return console.error(i);case o.WARN:return console.warn(i);case o.DEBUG:return console.log(i)}}},10354:function(e){const{assign:t}=Object,r={NOTHING:0,ERROR:1,WARN:2,INFO:4,DEBUG:5},o=(e,r,o,n,s)=>(i,a={})=>{r>o()||s({namespace:n,level:r,label:e,log:t({timestamp:(new Date).toISOString(),logger:"kafkajs",message:i},a)})},n=e=>{const t=(process.env.KAFKAJS_LOG_LEVEL||"").toUpperCase();return null==r[t]?e:r[t]};e.exports={LEVELS:r,createLogger:({level:e=r.INFO,logCreator:s}={})=>{let i=n(e);const a=s(i),c=(e,t=null)=>{const r=n(t);return u(e,r)},u=(e,n=null)=>{const s=()=>null==n?i:n,u={info:o("INFO",r.INFO,s,e,a),error:o("ERROR",r.ERROR,s,e,a),warn:o("WARN",r.WARN,s,e,a),debug:o("DEBUG",r.DEBUG,s,e,a)};return t(u,{namespace:c,setLogLevel:e=>{i=e}})};return u()}}},62109:function(e,t,r){const o=r(36829),n=r(52882),s=r(56341),{KafkaJSConnectionError:i,KafkaJSConnectionClosedError:a}=r(29879),{INT_32_MAX_VALUE:c}=r(53904),u=r(79152),d=r(6472),{CONNECTION_STATUS:p,CONNECTED_STATUS:l}=r(35315),h=({apiName:e,apiKey:t,apiVersion:r})=>`${e}(key: ${t}, version: ${r})`;e.exports=class{constructor({host:e,port:t,logger:r,socketFactory:o,requestTimeout:n,rack:i=null,ssl:a=null,sasl:c=null,clientId:l="kafkajs",connectionTimeout:h=1e3,enforceRequestTimeout:f=!1,maxInFlightRequests:m=null,instrumentationEmitter:g=null}){this.host=e,this.port=t,this.rack=i,this.clientId=l,this.broker=`${this.host}:${this.port}`,this.logger=r.namespace("Connection"),this.socketFactory=o,this.ssl=a,this.sasl=c,this.requestTimeout=n,this.connectionTimeout=h,this.bytesBuffered=0,this.bytesNeeded=s.int32Size(),this.chunks=[],this.connectionStatus=p.DISCONNECTED,this.correlationId=0,this.requestQueue=new d({instrumentationEmitter:g,maxInFlightRequests:m,requestTimeout:n,enforceRequestTimeout:f,clientId:l,broker:this.broker,logger:r.namespace("RequestQueue"),isConnected:()=>this.connected}),this.authHandlers=null,this.authExpectResponse=!1;const y=e=>(t,r={})=>{(0,this.logger[e])(t,{broker:this.broker,clientId:l,...r})};this.logDebug=y("debug"),this.logError=y("error");const I=u();this.shouldLogBuffers="1"===I.KAFKAJS_DEBUG_PROTOCOL_BUFFERS,this.shouldLogFetchBuffer=this.shouldLogBuffers&&"1"===I.KAFKAJS_DEBUG_EXTENDED_PROTOCOL_BUFFERS}get connected(){return l.includes(this.connectionStatus)}connect(){return new Promise(((e,t)=>{if(this.connected)return e(!0);let r;const n=()=>{clearTimeout(r),this.connectionStatus=p.CONNECTED,this.requestQueue.scheduleRequestTimeoutCheck(),e(!0)},s=e=>{this.processData(e)},c=async()=>{clearTimeout(r);const e=this.connected;this.authHandlers?this.authHandlers.onError():e&&(this.logDebug("Kafka server has closed connection"),this.rejectRequests(new a("Closed connection",{host:this.host,port:this.port}))),await this.disconnect()},u=async e=>{clearTimeout(r);const o=new i(`Connection error: ${e.message}`,{broker:`${this.host}:${this.port}`,code:e.code});this.logError(o.message,{stack:e.stack}),this.rejectRequests(o),await this.disconnect(),t(o)},d=async()=>{const e=new i("Connection timeout",{broker:`${this.host}:${this.port}`});this.logError(e.message),this.rejectRequests(e),await this.disconnect(),t(e)};this.logDebug("Connecting",{ssl:!!this.ssl,sasl:!!this.sasl});try{r=setTimeout(d,this.connectionTimeout),this.socket=o({socketFactory:this.socketFactory,host:this.host,port:this.port,ssl:this.ssl,onConnect:n,onData:s,onEnd:c,onError:u,onTimeout:d})}catch(e){clearTimeout(r),t(new i(`Failed to connect: ${e.message}`,{broker:`${this.host}:${this.port}`}))}}))}async disconnect(){return this.connectionStatus=p.DISCONNECTING,this.logDebug("disconnecting..."),await this.requestQueue.waitForPendingRequests(),this.requestQueue.destroy(),this.socket&&(this.socket.end(),this.socket.unref()),this.connectionStatus=p.DISCONNECTED,this.logDebug("disconnected"),!0}authenticate({authExpectResponse:e=!1,request:t,response:r}){return this.authExpectResponse=e,new Promise((async(e,o)=>{this.authHandlers={onSuccess:t=>{this.authHandlers=null,this.authExpectResponse=!1,r.decode(t).then((e=>r.parse(e))).then(e).catch(o)},onError:()=>{this.authHandlers=null,this.authExpectResponse=!1,o(new i("Connection closed by the server",{broker:`${this.host}:${this.port}`}))}};try{const e=await t.encode();this.failIfNotConnected(),this.socket.write(e.buffer,"binary")}catch(e){o(e)}}))}async send({request:e,response:t,requestTimeout:r=null,logResponseError:o=!0}){this.failIfNotConnected();const s=!e.expectResponse||e.expectResponse(),{correlationId:i,size:a,entry:c,payload:u}=await(async()=>{const{clientId:t}=this,o=this.nextCorrelationId(),i=await n({request:e,correlationId:o,clientId:t}),{apiKey:a,apiName:c,apiVersion:u}=e;return this.logDebug(`Request ${h(e)}`,{correlationId:o,expectResponse:s,size:Buffer.byteLength(i.buffer)}),new Promise(((e,t)=>{try{this.failIfNotConnected();const n={apiKey:a,apiName:c,apiVersion:u,correlationId:o,resolve:e,reject:t};this.requestQueue.push({entry:n,expectResponse:s,requestTimeout:r,sendRequest:()=>{this.socket.write(i.buffer,"binary")}})}catch(e){t(e)}}))})();if(s)try{const e=await t.decode(u);this.requestQueue.maybeThrottle(e.clientSideThrottleTime);const r=await t.parse(e),o="Fetch"===c.apiName;return this.logDebug(`Response ${h(c)}`,{correlationId:i,size:a,data:o&&!this.shouldLogFetchBuffer?"[filtered]":r}),r}catch(e){o&&this.logError(`Response ${h(c)}`,{error:e.message,correlationId:i,size:a});const t=Buffer.isBuffer(u);throw this.logDebug(`Response ${h(c)}`,{error:e.message,correlationId:i,payload:t&&!this.shouldLogBuffers?{type:"Buffer",data:"[filtered]"}:u}),e}}failIfNotConnected(){if(!this.connected)throw new i("Not connected",{broker:`${this.host}:${this.port}`})}nextCorrelationId(){return this.correlationId>=c&&(this.correlationId=0),this.correlationId++}processData(e){if(this.authHandlers&&!this.authExpectResponse)return this.authHandlers.onSuccess(e);for(this.chunks.push(e),this.bytesBuffered+=Buffer.byteLength(e);this.bytesNeeded<=this.bytesBuffered;){const e=this.chunks.length>1?Buffer.concat(this.chunks):this.chunks[0],t=new s(e),r=t.readInt32();if(!t.canReadBytes(r))return this.chunks=[e],this.bytesBuffered=Buffer.byteLength(e),void(this.bytesNeeded=s.int32Size()+r);const o=new s(t.readBytes(r)),n=t.readAll();if(this.chunks=[n],this.bytesBuffered=Buffer.byteLength(n),this.bytesNeeded=s.int32Size(),this.authHandlers){const t=s.int32Size()+r,o=e.slice(0,t);return this.authHandlers.onSuccess(o)}const i=o.readInt32(),a=o.readAll();this.requestQueue.fulfillRequest({size:r,correlationId:i,payload:a})}}rejectRequests(e){this.requestQueue.rejectAll(e)}}},35315:function(e){const t={CONNECTED:"connected",DISCONNECTING:"disconnecting",DISCONNECTED:"disconnected"},r=[t.CONNECTED,t.DISCONNECTING];e.exports={CONNECTION_STATUS:t,CONNECTED_STATUS:r}},28202:function(e,t,r){const o=r(51429)("network");e.exports={NETWORK_REQUEST:o("request"),NETWORK_REQUEST_TIMEOUT:o("request_timeout"),NETWORK_REQUEST_QUEUE_SIZE:o("request_queue_size")}},6472:function(e,t,r){const{EventEmitter:o}=r(82361),n=r(32764),s=r(28202),{KafkaJSInvariantViolation:i}=r(29879),a=Symbol("private:RequestQueue:emitQueueSizeEvent"),c=Symbol("private:RequestQueue:emitQueueEmpty"),u="requestQueueEmpty";e.exports=class extends o{constructor({instrumentationEmitter:e=null,maxInFlightRequests:t,requestTimeout:r,enforceRequestTimeout:o,clientId:n,broker:i,logger:d,isConnected:p=(()=>!0)}){super(),this.instrumentationEmitter=e,this.maxInFlightRequests=t,this.requestTimeout=r,this.enforceRequestTimeout=o,this.clientId=n,this.broker=i,this.logger=d,this.isConnected=p,this.inflight=new Map,this.pending=[],this.throttledUntil=-1,this.throttleCheckTimeoutId=null,this[c]=()=>{0===this.pending.length&&0===this.inflight.size&&this.emit(u)},this[a]=()=>{e&&e.emit(s.NETWORK_REQUEST_QUEUE_SIZE,{broker:this.broker,clientId:this.clientId,queueSize:this.pending.length}),this[c]()}}scheduleRequestTimeoutCheck(){this.enforceRequestTimeout&&(this.destroy(),this.requestTimeoutIntervalId=setInterval((()=>{this.inflight.forEach((e=>{Date.now()-e.sentAt>e.requestTimeout&&e.timeoutRequest()})),this.isConnected()||this.destroy()}),Math.min(this.requestTimeout,100)))}maybeThrottle(e){if(e){const t=Date.now()+e;this.throttledUntil=Math.max(t,this.throttledUntil)}}push(e){const{correlationId:t}=e.entry,r=this.requestTimeout,o=e.requestTimeout,s=Math.max(r,o||0),u=new n({entry:e.entry,expectResponse:e.expectResponse,broker:this.broker,clientId:this.clientId,instrumentationEmitter:this.instrumentationEmitter,requestTimeout:s,send:()=>{if(this.inflight.has(t))throw new i("Correlation id already exists");this.inflight.set(t,u),e.sendRequest()},timeout:()=>{this.inflight.delete(t),this.checkPendingRequests(),this[c]()}});this.canSendSocketRequestImmediately()?this.sendSocketRequest(u):(this.pending.push(u),this.scheduleCheckPendingRequests(),this.logger.debug("Request enqueued",{clientId:this.clientId,broker:this.broker,correlationId:t}),this[a]())}sendSocketRequest(e){e.send(),e.expectResponse||(this.logger.debug("Request does not expect a response, resolving immediately",{clientId:this.clientId,broker:this.broker,correlationId:e.correlationId}),this.inflight.delete(e.correlationId),e.completed({size:0,payload:null}))}fulfillRequest({correlationId:e,payload:t,size:r}){const o=this.inflight.get(e);this.inflight.delete(e),this.checkPendingRequests(),o?o.completed({size:r,payload:t}):this.logger.warn("Response without match",{clientId:this.clientId,broker:this.broker,correlationId:e}),this[c]()}rejectAll(e){const t=[...this.inflight.values(),...this.pending];for(const r of t)r.rejected(e),this.inflight.delete(r.correlationId);this.pending=[],this.inflight.clear(),this[a]()}waitForPendingRequests(){return new Promise((e=>{if(0===this.pending.length&&0===this.inflight.size)return e();this.logger.debug("Waiting for pending requests",{clientId:this.clientId,broker:this.broker,currentInflightRequests:this.inflight.size,currentPendingQueueSize:this.pending.length}),this.once(u,(()=>e()))}))}destroy(){clearInterval(this.requestTimeoutIntervalId),clearTimeout(this.throttleCheckTimeoutId),this.throttleCheckTimeoutId=null}canSendSocketRequestImmediately(){return!(null!=this.maxInFlightRequests&&this.inflight.size>=this.maxInFlightRequests||this.throttledUntil>Date.now())}checkPendingRequests(){for(;this.pending.length>0&&this.canSendSocketRequestImmediately();){const e=this.pending.shift();this.sendSocketRequest(e),this.logger.debug("Consumed pending request",{clientId:this.clientId,broker:this.broker,correlationId:e.correlationId,pendingDuration:e.pendingDuration,currentPendingQueueSize:this.pending.length}),this[a]()}this.scheduleCheckPendingRequests()}scheduleCheckPendingRequests(){const e=this.throttledUntil-Date.now();e>0&&!this.throttleCheckTimeoutId&&(this.throttleCheckTimeoutId=setTimeout((()=>{this.throttleCheckTimeoutId=null,this.checkPendingRequests()}),e))}}},32764:function(e,t,r){const{KafkaJSRequestTimeoutError:o,KafkaJSNonRetriableError:n}=r(29879),s=r(28202),i=Symbol("private:SocketRequest:state"),a=Symbol("private:SocketRequest:emitEvent"),c={PENDING:Symbol("PENDING"),SENT:Symbol("SENT"),COMPLETED:Symbol("COMPLETED"),REJECTED:Symbol("REJECTED")};e.exports=class{constructor({requestTimeout:e,broker:t,clientId:r,entry:o,expectResponse:n,send:s,timeout:u,instrumentationEmitter:d=null}){this.createdAt=Date.now(),this.requestTimeout=e,this.broker=t,this.clientId=r,this.entry=o,this.correlationId=o.correlationId,this.expectResponse=n,this.sendRequest=s,this.timeoutHandler=u,this.sentAt=null,this.duration=null,this.pendingDuration=null,this[i]=c.PENDING,this[a]=(e,t)=>d&&d.emit(e,t)}send(){this.throwIfInvalidState({accepted:[c.PENDING],next:c.SENT}),this.sendRequest(),this.sentAt=Date.now(),this.pendingDuration=this.sentAt-this.createdAt,this[i]=c.SENT}timeoutRequest(){const{apiName:e,apiKey:t,apiVersion:r}=this.entry,n=`${e}(key: ${t}, version: ${r})`,i={broker:this.broker,clientId:this.clientId,correlationId:this.correlationId,createdAt:this.createdAt,sentAt:this.sentAt,pendingDuration:this.pendingDuration};this.timeoutHandler(),this.rejected(new o(`Request ${n} timed out`,i)),this[a](s.NETWORK_REQUEST_TIMEOUT,{...i,apiName:e,apiKey:t,apiVersion:r})}completed({size:e,payload:t}){this.throwIfInvalidState({accepted:[c.SENT],next:c.COMPLETED});const{entry:r,correlationId:o,broker:n,clientId:u,createdAt:d,sentAt:p,pendingDuration:l}=this;this[i]=c.COMPLETED,this.duration=Date.now()-this.sentAt,r.resolve({correlationId:o,entry:r,size:e,payload:t}),this[a](s.NETWORK_REQUEST,{broker:n,clientId:u,correlationId:o,size:e,createdAt:d,sentAt:p,pendingDuration:l,duration:this.duration,apiName:r.apiName,apiKey:r.apiKey,apiVersion:r.apiVersion})}rejected(e){this.throwIfInvalidState({accepted:[c.PENDING,c.SENT],next:c.REJECTED}),this[i]=c.REJECTED,this.duration=Date.now()-this.sentAt,this.entry.reject(e)}throwIfInvalidState({accepted:e,next:t}){if(e.includes(this[i]))return;const r=this[i].toString();throw new n(`Invalid state, can't transition from ${r} to ${t.toString()}`)}}},36829:function(e){e.exports=({socketFactory:e,host:t,port:r,ssl:o,onConnect:n,onData:s,onEnd:i,onError:a,onTimeout:c})=>{const u=e({host:t,port:r,ssl:o,onConnect:n});return u.on("data",s),u.on("end",i),u.on("error",a),u.on("timeout",c),u}},89992:function(e,t,r){e.exports=()=>{const e=r(41808),t=r(24404);return({host:r,port:o,ssl:n,onConnect:s})=>{const i=n?t.connect(Object.assign({host:r,port:o,servername:r},n),s):e.connect({host:r,port:o},s);return i.setKeepAlive(!0,6e4),i}}},88460:function(e){e.exports=e=>e.map((({topic:e,partitions:t,messagesPerPartition:r,sequencePerPartition:o})=>({topic:e,partitions:t.map((e=>({partition:e,firstSequence:o[e],messages:r[e]})))})))},56236:function(e,t,r){const o=r(99701),{KafkaJSNonRetriableError:n}=r(29879),s=r(7022),i=r(81352),a=r(39491),c=r(75497),u=Math.pow(2,32),d=["NOT_COORDINATOR_FOR_GROUP","GROUP_COORDINATOR_NOT_AVAILABLE","GROUP_LOAD_IN_PROGRESS","CONCURRENT_TRANSACTIONS"],p=["UNKNOWN_TOPIC_OR_PARTITION","COORDINATOR_LOAD_IN_PROGRESS"],l=["COORDINATOR_NOT_AVAILABLE","NOT_COORDINATOR"];e.exports=({logger:e,cluster:t,transactionTimeout:r=6e4,transactional:h,transactionalId:f})=>{if(h&&!f)throw new n("Cannot manage transactions without a transactionalId");const m=o(t.retry);let g=-1,y=0,I={},w={};const T=i({logger:e});T.on("transition",(({to:e})=>{e===c.READY&&(w={})}));const b=()=>t.findGroupCoordinator({groupId:f,coordinatorType:s.TRANSACTION}),E=()=>{if(!h)throw new n("Method unavailable if non-transactional")},S=T.createGuarded({getProducerId:()=>g,getProducerEpoch:()=>y,getTransactionalId:()=>f,initProducerId:async()=>m((async(o,n,s)=>{try{await t.refreshMetadataIfNecessary();const o=await(h?b():t.findControllerBroker()),n=await o.initProducerId({transactionalId:h?f:void 0,transactionTimeout:r});T.transitionTo(c.READY),g=n.producerId,y=n.producerEpoch,I={},e.debug("Initialized producer id & epoch",{producerId:g,producerEpoch:y})}catch(t){if(d.includes(t.type))throw"CONCURRENT_TRANSACTIONS"===t.type&&e.debug("There is an ongoing transaction on this transactionId, retrying",{error:t.message,stack:t.stack,transactionalId:f,retryCount:n,retryTime:s}),t;o(t)}})),getSequence:(e,t)=>S.isInitialized()?(I[e]=I[e]||{},I[e][t]=I[e][t]||0,I[e][t]):0,updateSequence(t,r,o){if(!S.isInitialized())return;let n=S.getSequence(t,r)+o;n>=u&&(e.debug(`Sequence for ${t} ${r} exceeds max value (${n}). Rotating to 0.`),n=0),I[t][r]=n},beginTransaction(){E(),T.transitionTo(c.TRANSACTING)},async addPartitionsToTransaction(e){E();const t={};e.forEach((({topic:e,partitions:r})=>{w[e]=w[e]||{},r.forEach((({partition:r})=>{w[e][r]||(t[e]=t[e]||[],t[e].push(r))}))}));const r=Object.keys(t).map((e=>({topic:e,partitions:t[e]})));if(r.length){const e=await b();await e.addPartitionsToTxn({transactionalId:f,producerId:g,producerEpoch:y,topics:r})}r.forEach((({topic:e,partitions:t})=>{t.forEach((t=>{w[e][t]=!0}))}))},async commit(){E(),T.transitionTo(c.COMMITTING);const e=await b();await e.endTxn({producerId:g,producerEpoch:y,transactionalId:f,transactionResult:!0}),T.transitionTo(c.READY)},async abort(){E(),T.transitionTo(c.ABORTING);const e=await b();await e.endTxn({producerId:g,producerEpoch:y,transactionalId:f,transactionResult:!1}),T.transitionTo(c.READY)},isInitialized:()=>-1!==g,isTransactional:()=>h,isInTransaction:()=>T.state()===c.TRANSACTING,async sendOffsets({consumerGroupId:r,topics:o}){a(r,"Missing consumerGroupId"),a(o,"Missing offset topics");const n=await b();await n.addOffsetsToTxn({transactionalId:f,producerId:g,producerEpoch:y,groupId:r});let i=await t.findGroupCoordinator({groupId:r,coordinatorType:s.GROUP});return m((async(n,a,c)=>{try{await i.txnOffsetCommit({transactionalId:f,producerId:g,producerEpoch:y,groupId:r,topics:o})}catch(o){if(p.includes(o.type))throw e.debug("Group coordinator is not ready yet, retrying",{error:o.message,stack:o.stack,transactionalId:f,retryCount:a,retryTime:c}),o;if(l.includes(o.type)||"ECONNREFUSED"===o.code)throw e.debug("Invalid group coordinator, finding new group coordinator and retrying",{error:o.message,stack:o.stack,transactionalId:f,retryCount:a,retryTime:c}),i=await t.findGroupCoordinator({groupId:r,coordinatorType:s.GROUP}),o;n(o)}}))}},{initProducerId:{legalStates:[c.UNINITIALIZED,c.READY]},beginTransaction:{legalStates:[c.READY],async:!1},addPartitionsToTransaction:{legalStates:[c.TRANSACTING]},sendOffsets:{legalStates:[c.TRANSACTING]},commit:{legalStates:[c.TRANSACTING]},abort:{legalStates:[c.TRANSACTING]}});return S}},81352:function(e,t,r){const{EventEmitter:o}=r(82361),{KafkaJSNonRetriableError:n}=r(29879),s=r(75497),i={[s.UNINITIALIZED]:[s.READY],[s.READY]:[s.READY,s.TRANSACTING],[s.TRANSACTING]:[s.COMMITTING,s.ABORTING],[s.COMMITTING]:[s.READY],[s.ABORTING]:[s.READY]};e.exports=({logger:e,initialState:t=s.UNINITIALIZED})=>{let r=t;const a=Object.assign(new o,{createGuarded(e,t){const o=Object.keys(t).reduce(((o,s)=>(o[s]=((e,t,{legalStates:o,async:s=!0})=>{if(!e[t])throw new n(`Cannot add guard on missing method "${t}"`);return(...i)=>{const a=e[t];if(!o.includes(r)){const e=new n(`Transaction state exception: Cannot call "${t}" in state "${r}"`);if(s)return Promise.reject(e);throw e}return a.apply(e,i)}})(e,s,t[s]),o)),{});return{...e,...o}},transitionTo(t){if(e.debug(`Transaction state transition ${r} --\x3e ${t}`),!i[r].includes(t))throw new n(`Transaction state exception: Invalid transition ${r} --\x3e ${t}`);a.emit("transition",{to:t,from:r}),r=t},state:()=>r});return a}},75497:function(e){e.exports={UNINITIALIZED:"UNINITIALIZED",READY:"READY",TRANSACTING:"TRANSACTING",COMMITTING:"COMMITTING",ABORTING:"ABORTING"}},80065:function(e){e.exports=({topic:e,partitionMetadata:t,messages:r,partitioner:o})=>0===t.length?{}:r.reduce(((r,n)=>{const s=o({topic:e,partitionMetadata:t,message:n}),i=r[s]||[];return Object.assign(r,{[s]:[...i,n]})}),{})},73798:function(e,t,r){const o=r(99701),{CONNECTION_STATUS:n}=r(35315),{DefaultPartitioner:s}=r(88691),i=r(52190),a=r(56236),c=r(33062),{events:u,wrap:d,unwrap:p}=r(17293),{KafkaJSNonRetriableError:l}=r(29879),{values:h,keys:f}=Object,m=h(u),g=f(u).map((e=>`producer.events.${e}`)).join(", "),{CONNECT:y,DISCONNECT:I}=u;e.exports=({cluster:e,logger:t,createPartitioner:r=s,retry:h,idempotent:f=!1,transactionalId:w,transactionTimeout:T,instrumentationEmitter:b})=>{let E=n.DISCONNECTED;if(h=h||{retries:f?Number.MAX_SAFE_INTEGER:5},f&&h.retries<1)throw new l("Idempotent producer must allow retries to protect against transient errors");const S=t.namespace("Producer");f&&h.retries<Number.MAX_SAFE_INTEGER&&S.warn("Limiting retries for the idempotent producer may invalidate EoS guarantees");const C=r(),A=o(Object.assign({},e.retry,h)),v=b||new i,O=a({logger:S,cluster:e,transactionTimeout:T,transactional:!1,transactionalId:w}),{send:x,sendBatch:R}=c({logger:S,cluster:e,partitioner:C,eosManager:O,idempotent:f,retrier:A,getConnectionStatus:()=>E});let _;return{connect:async()=>{await e.connect(),E=n.CONNECTED,v.emit(y),f&&!O.isInitialized()&&await O.initProducerId()},disconnect:async()=>{E=n.DISCONNECTING,await e.disconnect(),E=n.DISCONNECTED,v.emit(I)},isIdempotent:()=>f,events:u,on:(e,t)=>{if(!m.includes(e))throw new l(`Event name should be one of ${g}`);return v.addListener(p(e),(r=>{r.type=d(r.type),Promise.resolve(t(r)).catch((t=>{S.error(`Failed to execute listener: ${t.message}`,{eventName:e,stack:t.stack})}))}))},send:x,sendBatch:R,transaction:async()=>{if(!w)throw new l("Must provide transactional id for transactional producer");let t=!1;if(_=_||a({logger:S,cluster:e,transactionTimeout:T,transactional:!0,transactionalId:w}),_.isInTransaction())throw new l("There is already an ongoing transaction for this producer. Please end the transaction before beginning another.");_.isInitialized()||await _.initProducerId(),_.beginTransaction();const{send:r,sendBatch:o}=c({logger:S,cluster:e,partitioner:C,retrier:A,eosManager:_,idempotent:!0,getConnectionStatus:()=>E}),n=()=>_.isInTransaction()&&!t,s=e=>(...t)=>n()?e(...t):Promise.reject(new l("Cannot continue to use transaction once ended"));return{sendBatch:s(o),send:s(r),abort:s((async()=>{await _.abort(),t=!0})),commit:s((async()=>{await _.commit(),t=!0})),sendOffsets:s((async({consumerGroupId:t,topics:r})=>{await _.sendOffsets({consumerGroupId:t,topics:r});for(const o of r){const{topic:r,partitions:n}=o;for(const{partition:o,offset:s}of n)e.markOffsetAsCommitted({groupId:t,topic:r,partition:o,offset:s})}})),isActive:n}},logger:()=>S}}},17293:function(e,t,r){const o=r(76),n=r(28202),s=r(51429)("producer"),i={CONNECT:s("connect"),DISCONNECT:s("disconnect"),REQUEST:s(n.NETWORK_REQUEST),REQUEST_TIMEOUT:s(n.NETWORK_REQUEST_TIMEOUT),REQUEST_QUEUE_SIZE:s(n.NETWORK_REQUEST_QUEUE_SIZE)},a={[i.REQUEST]:n.NETWORK_REQUEST,[i.REQUEST_TIMEOUT]:n.NETWORK_REQUEST_TIMEOUT,[i.REQUEST_QUEUE_SIZE]:n.NETWORK_REQUEST_QUEUE_SIZE},c=o(a);e.exports={events:i,wrap:e=>c[e]||e,unwrap:e=>a[e]||e}},33062:function(e,t,r){const o=r(39326),{KafkaJSError:n,KafkaJSNonRetriableError:s}=r(29879),{CONNECTION_STATUS:i}=r(35315);e.exports=({logger:e,cluster:t,partitioner:r,eosManager:a,idempotent:c,retrier:u,getConnectionStatus:d})=>{const p=o({logger:e,cluster:t,retrier:u,partitioner:r,eosManager:a}),l=async({acks:e=-1,timeout:t,compression:r,topicMessages:o=[]})=>{if(o.some((({topic:e})=>!e)))throw new s("Invalid topic");if(c&&-1!==e)throw new s("Not requiring ack for all messages invalidates the idempotent producer's EoS guarantees");for(const{topic:e,messages:t}of o){if(!t)throw new s(`Invalid messages array [${t}] for topic "${e}"`);const r=t.find((e=>void 0===e.value));if(r)throw new s(`Invalid message without value for topic "${e}": ${JSON.stringify(r)}`)}(()=>{switch(d()){case i.DISCONNECTING:throw new s("The producer is disconnecting; therefore, it can't safely accept messages anymore");case i.DISCONNECTED:throw new n("The producer is disconnected")}})();const a=o.reduce(((e,{topic:t,messages:r})=>{const o=e.findIndex((({topic:e})=>t===e));return-1===o?e.push({topic:t,messages:r}):e[o].messages=[...e[o].messages,...r],e}),[]);return await p({acks:e,timeout:t,compression:r,topicMessages:a})};return{send:async({acks:e,timeout:t,compression:r,topic:o,messages:n})=>l({acks:e,timeout:t,compression:r,topicMessages:[{topic:o,messages:n}]}),sendBatch:l}}},14655:function(e,t,r){const o=r(79416),n=r(13583);e.exports=n(o)},79416:function(e){const t=1540483477;e.exports=e=>{const r=Buffer.isBuffer(e)?e:Buffer.from(String(e)),o=r.length;let n=2538058380^o,s=o/4;for(let e=0;e<s;e++){const o=4*e;let s=(255&r[o+0])+((255&r[o+1])<<8)+((255&r[o+2])<<16)+((255&r[o+3])<<24);s*=t,s^=s>>>24,s*=t,n*=t,n^=s}switch(o%4){case 3:n^=(255&r[2+(-4&o)])<<16;case 2:n^=(255&r[1+(-4&o)])<<8;case 1:n^=255&r[-4&o],n*=t}return n^=n>>>13,n*=t,n^=n>>>15,n}},13583:function(e,t,r){const o=r(35427),n=e=>2147483647&e;e.exports=e=>()=>{const t={};return({topic:r,partitionMetadata:s,message:i})=>{r in t||(t[r]=o(32).readUInt32BE(0));const a=s.length,c=s.filter((e=>e.leader>=0)),u=c.length;return null!==i.partition&&void 0!==i.partition?i.partition:null!==i.key&&void 0!==i.key?n(e(i.key))%a:u>0?c[n(++t[r])%u].partitionId:n(++t[r])%a}}},35427:function(e,t,r){const{KafkaJSNonRetriableError:o}=r(29879),n=e=>({randomBytes:t=>e.getRandomValues(Buffer.allocUnsafe(t))});let s=null;r.g&&r.g.crypto?s=void 0===r.g.crypto.randomBytes?n(r.g.crypto):r.g.crypto:r.g&&r.g.msCrypto?s=n(r.g.msCrypto):r.g&&!r.g.crypto&&(s=r(6113)),e.exports=e=>{if(e>65536)throw new o(`Byte length (${e}) exceeds the max number of bytes of entropy available (65536)`);if(!s)throw new o("No available crypto implementation");return s.randomBytes(e)}},55476:function(e,t,r){const o=r(64953),n=r(13583);e.exports=n(o)},64953:function(e,t,r){const o=r(73278),n=o.fromValue(2538058380),s=o.fromValue(1540483477),i=o.fromValue(24);e.exports=e=>{const t=Buffer.isBuffer(e)?e:Buffer.from(String(e)),r=t.length;let a=o.fromValue(n.xor(r)),c=Math.floor(r/4);for(let e=0;e<c;e++){const r=4*e;let n=(255&t[r+0])+((255&t[r+1])<<8)+((255&t[r+2])<<16)+((255&t[r+3])<<24);n=o.fromValue(n),n=n.multiply(s),n=n.xor(n.toInt()>>>i),n=o.fromValue(n).multiply(s),a=a.multiply(s),a=a.xor(n)}switch(r%4){case 3:a=a.xor((255&t[2+(-4&r)])<<16);case 2:a=a.xor((255&t[1+(-4&r)])<<8);case 1:a=a.xor(255&t[-4&r]),a=a.multiply(s)}return a=a.xor(a.toInt()>>>13),a=a.multiply(s),a=a.xor(a.toInt()>>>15),a.toInt()}},88691:function(e,t,r){const o=r(14655),n=r(55476);e.exports={DefaultPartitioner:o,JavaCompatiblePartitioner:n}},10922:function(e,t,r){const o=r(74358);e.exports=({topics:e})=>{const t=e.map((({topicName:e,partitions:t})=>t.map((t=>({topicName:e,...t})))));return o(t)}},39326:function(e,t,r){const o=r(74358),{KafkaJSMetadataNotLoaded:n}=r(29879),{staleMetadata:s}=r(21701),i=r(80065),a=r(88460),c=r(10922),{keys:u}=Object;e.exports=({logger:e,cluster:t,partitioner:r,eosManager:d,retrier:p})=>async({acks:l,timeout:h,compression:f,topicMessages:m})=>{const g=new Map;return p((async(p,y,I)=>{const w=m.map((({topic:e})=>e));await t.addMultipleTargetTopics(w);try{const s=await(async o=>{const s=new Map;await t.refreshMetadataIfNecessary();for(const{topic:a,messages:c}of m){const p=t.findTopicPartitionMetadata(a);if(0===p.length)throw e.debug("Producing to topic without metadata",{topic:a,targetTopics:Array.from(t.targetTopics)}),new n("Producing to topic without metadata");const l=i({topic:a,partitionMetadata:p,messages:c,partitioner:r}),h=u(l),f=h.reduce(((e,t)=>(e[t]=d.getSequence(a,t),e)),{}),m=t.findLeaderForPartitions(a,h),g=u(m);s.set(a,{partitionsPerLeader:m,messagesPerPartition:l,sequencePerPartition:f});for(const e of g){const r=await t.findBroker({nodeId:e});o.has(r)||o.set(r,null)}}return Array.from(o.keys()).filter((e=>!o.get(e))).map((async e=>{const t=Array.from(s.entries()).filter((([t,{partitionsPerLeader:r}])=>!!r[e.nodeId])).map((([t,{partitionsPerLeader:r,messagesPerPartition:o,sequencePerPartition:n}])=>({topic:t,partitions:r[e.nodeId],sequencePerPartition:n,messagesPerPartition:o}))),r=a(t);try{d.isTransactional()&&await d.addPartitionsToTransaction(r);const t=await e.produce({transactionalId:d.isTransactional()?d.getTransactionalId():void 0,producerId:d.getProducerId(),producerEpoch:d.getProducerEpoch(),acks:l,timeout:h,compression:f,topicData:r}),n=0!==l?c(t):[];n.forEach((({topicName:e,partition:t})=>{const r=s.get(e).messagesPerPartition[t].length;d.updateSequence(e,t,r)})),o.set(e,n)}catch(t){throw o.delete(e),t}}))})(g);await Promise.all(s);const p=Array.from(g.values());return o(p)}catch(r){if("KafkaJSConnectionClosedError"===r.name&&t.removeBroker({host:r.host,port:r.port}),!t.isConnected())throw e.debug(`Cluster has disconnected, reconnecting: ${r.message}`,{retryCount:y,retryTime:I}),await t.connect(),await t.refreshMetadata(),r;if(s(r)||"KafkaJSMetadataNotLoaded"===r.name||"KafkaJSConnectionError"===r.name||"KafkaJSConnectionClosedError"===r.name||"KafkaJSProtocolError"===r.name&&r.retriable)throw e.error(`Failed to send messages: ${r.message}`,{retryCount:y,retryTime:I}),await t.refreshMetadata(),r;if(e.error(`${r.message}`,{retryCount:y,retryTime:I}),r.retriable)throw r;p(r)}}))}},13595:function(e){e.exports={UNKNOWN:0,ANY:1,ALL:2,READ:3,WRITE:4,CREATE:5,DELETE:6,ALTER:7,DESCRIBE:8,CLUSTER_ACTION:9,DESCRIBE_CONFIGS:10,ALTER_CONFIGS:11,IDEMPOTENT_WRITE:12}},34517:function(e){e.exports={UNKNOWN:0,ANY:1,DENY:2,ALLOW:3}},77666:function(e){e.exports={UNKNOWN:0,ANY:1,TOPIC:2,GROUP:3,CLUSTER:4,TRANSACTIONAL_ID:5,DELEGATION_TOKEN:6}},18279:function(e){e.exports={UNKNOWN:0,TOPIC:2,BROKER:4,BROKER_LOGGER:8}},9955:function(e){e.exports={UNKNOWN:0,TOPIC_CONFIG:1,DYNAMIC_BROKER_CONFIG:2,DYNAMIC_DEFAULT_BROKER_CONFIG:3,STATIC_BROKER_CONFIG:4,DEFAULT_CONFIG:5,DYNAMIC_BROKER_LOGGER_CONFIG:6}},7022:function(e){e.exports={GROUP:0,TRANSACTION:1}},21574:function(e){var t=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);e.exports=e=>{const{buffer:r}=e,o=r.length;let n=-1;for(let e=0;e<o;e++)n=t[255&(n^r[e])]^n>>>8;return-1^n}},56341:function(e,t,r){const{KafkaJSInvalidVarIntError:o,KafkaJSInvalidLongError:n}=r(29879),s=r(73278);e.exports=class e{static int32Size(){return 4}static decodeZigZag(e){return e>>>1^-(1&e)}static decodeZigZag64(e){return e.shiftRightUnsigned(1).xor(e.and(s.fromInt(1)).negate())}constructor(e){this.buffer=e,this.offset=0}readInt8(){const e=this.buffer.readInt8(this.offset);return this.offset+=1,e}canReadInt16(){return this.canReadBytes(2)}readInt16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}canReadInt32(){return this.canReadBytes(4)}readInt32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}canReadInt64(){return this.canReadBytes(8)}readInt64(){const e=this.buffer[this.offset],t=this.buffer[this.offset+7],r=(e<<24)+65536*this.buffer[this.offset+1]+256*this.buffer[this.offset+2]+this.buffer[this.offset+3],o=this.buffer[this.offset+4]*2**24+65536*this.buffer[this.offset+5]+256*this.buffer[this.offset+6]+t;return this.offset+=8,(BigInt(r)<<32n)+BigInt(o)}readDouble(){const e=this.buffer.readDoubleBE(this.offset);return this.offset+=8,e}readString(){const e=this.readInt16();if(-1===e)return null;const t=this.buffer.slice(this.offset,this.offset+e).toString("utf8");return this.offset+=e,t}readVarIntString(){const e=this.readVarInt();if(-1===e)return null;const t=this.buffer.slice(this.offset,this.offset+e).toString("utf8");return this.offset+=e,t}readUVarIntString(){const e=this.readUVarInt();if(0===e)return null;const t=this.buffer.slice(this.offset,this.offset+e).toString("utf8");return this.offset+=e,t}canReadBytes(e){return Buffer.byteLength(this.buffer)-this.offset>=e}readBytes(e=this.readInt32()){if(-1===e)return null;const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarIntBytes(){const e=this.readVarInt();if(-1===e)return null;const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readUVarIntBytes(){const e=this.readUVarInt();if(0===e)return null;const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readBoolean(){return 1===this.readInt8()}readAll(){const e=this.buffer.slice(this.offset);return this.offset+=Buffer.byteLength(this.buffer),e}readArray(e){const t=this.readInt32();if(-1===t)return[];const r=new Array(t);for(let o=0;o<t;o++)r[o]=e(this);return r}readVarIntArray(e){const t=this.readVarInt();if(-1===t)return[];const r=new Array(t);for(let o=0;o<t;o++)r[o]=e(this);return r}readUVarIntArray(e){const t=this.readUVarInt();if(0===t)return[];const r=new Array(t-1);for(let o=0;o<t-1;o++)r[o]=e(this);return r}async readArrayAsync(e){const t=this.readInt32();if(-1===t)return[];const r=new Array(t);for(let o=0;o<t;o++)r[o]=await e(this);return r}readVarInt(){let t,r=0,o=0;do{t=this.buffer[this.offset++],r+=(127&t)<<o,o+=7}while(t>=128);return e.decodeZigZag(r)}readUVarInt(){let e,t=0,r=0;for(;0!=(128&(e=this.buffer[this.offset++]));)if(t|=(127&e)<<r,r+=7,r>28)throw new o("Invalid VarInt, must contain 5 bytes or less");return t|=e<<r,t>>>0}readVarLong(){let t,r=s.fromInt(0),o=0;do{if(o>63)throw new n("Invalid Long, must contain 9 bytes or less");t=this.buffer[this.offset++],r=r.add(s.fromInt(127&t).shiftLeft(o)),o+=7}while(t>=128);return e.decodeZigZag64(r)}slice(t){return new e(this.buffer.slice(this.offset,this.offset+t))}forward(e){this.offset+=e}}},28783:function(e,t,r){const o=r(73278),n=4294967168,s=0xffffffffffffff80n;e.exports=class e{static encodeZigZag(e){return e<<1^e>>31}static encodeZigZag64(e){const t=o.fromValue(e);return t.shiftLeft(1).xor(t.shiftRight(63))}static sizeOfVarInt(e){let t=this.encodeZigZag(e),r=1;for(;0!=(t&n);)r+=1,t>>>=7;return r}static sizeOfVarLong(t){let r=e.encodeZigZag64(t),n=1;for(;r.and(s).notEquals(o.fromInt(0));)n+=1,r=r.shiftRightUnsigned(7);return n}static sizeOfVarIntBytes(t){const r=null==t?-1:Buffer.byteLength(t);return r<0?e.sizeOfVarInt(-1):e.sizeOfVarInt(r)+r}static nextPowerOfTwo(e){return 1<<31-Math.clz32(e)+1}constructor(t=511){this.buf=Buffer.alloc(e.nextPowerOfTwo(t)),this.offset=0}writeBufferInternal(e){const t=e.length;this.ensureAvailable(t),e.copy(this.buf,this.offset,0),this.offset+=t}ensureAvailable(t){if(this.offset+t>this.buf.length){const r=e.nextPowerOfTwo(this.offset+t),o=Buffer.alloc(r);this.buf.copy(o,0,0,this.offset),this.buf=o}}get buffer(){return this.buf.slice(0,this.offset)}writeInt8(e){return this.ensureAvailable(1),this.buf.writeInt8(e,this.offset),this.offset+=1,this}writeInt16(e){return this.ensureAvailable(2),this.buf.writeInt16BE(e,this.offset),this.offset+=2,this}writeInt32(e){return this.ensureAvailable(4),this.buf.writeInt32BE(e,this.offset),this.offset+=4,this}writeUInt32(e){return this.ensureAvailable(4),this.buf.writeUInt32BE(e,this.offset),this.offset+=4,this}writeInt64(e){this.ensureAvailable(8);const t=o.fromValue(e);return this.buf.writeInt32BE(t.getHighBits(),this.offset),this.buf.writeInt32BE(t.getLowBits(),this.offset+4),this.offset+=8,this}writeDouble(e){return this.ensureAvailable(8),this.buf.writeDoubleBE(e,this.offset),this.offset+=8,this}writeBoolean(e){return e?this.writeInt8(1):this.writeInt8(0),this}writeString(e){if(null==e)return this.writeInt16(-1),this;const t=Buffer.byteLength(e,"utf8");return this.ensureAvailable(2+t),this.writeInt16(t),this.buf.write(e,this.offset,t,"utf8"),this.offset+=t,this}writeVarIntString(e){if(null==e)return this.writeVarInt(-1),this;const t=Buffer.byteLength(e,"utf8");return this.writeVarInt(t),this.ensureAvailable(t),this.buf.write(e,this.offset,t,"utf8"),this.offset+=t,this}writeUVarIntString(e){if(null==e)return this.writeUVarInt(0),this;const t=Buffer.byteLength(e,"utf8");return this.writeUVarInt(t+1),this.ensureAvailable(t),this.buf.write(e,this.offset,t,"utf8"),this.offset+=t,this}writeBytes(e){if(null==e)return this.writeInt32(-1),this;if(Buffer.isBuffer(e))this.ensureAvailable(4+e.length),this.writeInt32(e.length),this.writeBufferInternal(e);else{const t=String(e),r=Buffer.byteLength(t,"utf8");this.ensureAvailable(4+r),this.writeInt32(r),this.buf.write(t,this.offset,r,"utf8"),this.offset+=r}return this}writeVarIntBytes(e){if(null==e)return this.writeVarInt(-1),this;if(Buffer.isBuffer(e))this.writeVarInt(e.length),this.writeBufferInternal(e);else{const t=String(e),r=Buffer.byteLength(t,"utf8");this.writeVarInt(r),this.ensureAvailable(r),this.buf.write(t,this.offset,r,"utf8"),this.offset+=r}return this}writeUVarIntBytes(e){if(null==e)return this.writeVarInt(0),this;if(Buffer.isBuffer(e))this.writeUVarInt(e.length+1),this.writeBufferInternal(e);else{const t=String(e),r=Buffer.byteLength(t,"utf8");this.writeUVarInt(r+1),this.ensureAvailable(r),this.buf.write(t,this.offset,r,"utf8"),this.offset+=r}return this}writeEncoder(e){if(null==e||!Buffer.isBuffer(e.buf))throw new Error("value should be an instance of Encoder");return this.writeBufferInternal(e.buffer),this}writeEncoderArray(e){if(!Array.isArray(e)||e.some((e=>null==e||!Buffer.isBuffer(e.buf))))throw new Error("all values should be an instance of Encoder[]");return e.forEach((e=>{this.writeBufferInternal(e.buffer)})),this}writeBuffer(e){if(!Buffer.isBuffer(e))throw new Error("value should be an instance of Buffer");return this.writeBufferInternal(e),this}writeNullableArray(e,t){const r=0!==e.length?e.length:-1;return this.writeArray(e,t,r),this}writeArray(e,t,r){const o=null==r?e.length:r;if(this.writeInt32(o),void 0!==t)switch(t){case"int32":case"number":e.forEach((e=>this.writeInt32(e)));break;case"string":e.forEach((e=>this.writeString(e)));break;case"object":this.writeEncoderArray(e)}else e.forEach((e=>{switch(typeof e){case"number":this.writeInt32(e);break;case"string":this.writeString(e);break;case"object":this.writeEncoder(e)}}));return this}writeVarIntArray(e,t){if("object"===t)this.writeVarInt(e.length),this.writeEncoderArray(e);else{const t=e.filter((e=>"object"==typeof e));this.writeVarInt(t.length),this.writeEncoderArray(t)}return this}writeUVarIntArray(e,t){if("object"===t)this.writeUVarInt(e.length+1),this.writeEncoderArray(e);else{const t=e.filter((e=>"object"==typeof e));this.writeUVarInt(t.length+1),this.writeEncoderArray(t)}return this}writeVarInt(t){return this.writeUVarInt(e.encodeZigZag(t))}writeUVarInt(e){const t=[];for(;0!=(e&n);)t.push(127&e|128),e>>>=7;return t.push(127&e),this.writeBufferInternal(Buffer.from(t)),this}writeVarLong(t){const r=[];let n=e.encodeZigZag64(t);for(;n.and(s).notEquals(o.fromInt(0));)r.push(n.and(127).or(128).toInt()),n=n.shiftRightUnsigned(7);return r.push(n.toInt()),this.writeBufferInternal(Buffer.from(r)),this}size(){return this.offset}toJSON(){return this.buffer.toJSON()}}},21701:function(e,t,r){const{KafkaJSProtocolError:o}=r(29879),n=r(6779),s=[{type:"UNKNOWN",code:-1,retriable:!1,message:"The server experienced an unexpected error when processing the request"},{type:"OFFSET_OUT_OF_RANGE",code:1,retriable:!1,message:"The requested offset is not within the range of offsets maintained by the server"},{type:"CORRUPT_MESSAGE",code:2,retriable:!0,message:"This message has failed its CRC checksum, exceeds the valid size, or is otherwise corrupt"},{type:"UNKNOWN_TOPIC_OR_PARTITION",code:3,retriable:!0,message:"This server does not host this topic-partition"},{type:"INVALID_FETCH_SIZE",code:4,retriable:!1,message:"The requested fetch size is invalid"},{type:"LEADER_NOT_AVAILABLE",code:5,retriable:!0,message:"There is no leader for this topic-partition as we are in the middle of a leadership election"},{type:"NOT_LEADER_FOR_PARTITION",code:6,retriable:!0,message:"This server is not the leader for that topic-partition"},{type:"REQUEST_TIMED_OUT",code:7,retriable:!0,message:"The request timed out"},{type:"BROKER_NOT_AVAILABLE",code:8,retriable:!1,message:"The broker is not available"},{type:"REPLICA_NOT_AVAILABLE",code:9,retriable:!1,message:"The replica is not available for the requested topic-partition"},{type:"MESSAGE_TOO_LARGE",code:10,retriable:!1,message:"The request included a message larger than the max message size the server will accept"},{type:"STALE_CONTROLLER_EPOCH",code:11,retriable:!1,message:"The controller moved to another broker"},{type:"OFFSET_METADATA_TOO_LARGE",code:12,retriable:!1,message:"The metadata field of the offset request was too large"},{type:"NETWORK_EXCEPTION",code:13,retriable:!0,message:"The server disconnected before a response was received"},{type:"GROUP_LOAD_IN_PROGRESS",code:14,retriable:!0,message:"The coordinator is loading and hence can't process requests for this group"},{type:"GROUP_COORDINATOR_NOT_AVAILABLE",code:15,retriable:!0,message:"The group coordinator is not available"},{type:"NOT_COORDINATOR_FOR_GROUP",code:16,retriable:!0,message:"This is not the correct coordinator for this group"},{type:"INVALID_TOPIC_EXCEPTION",code:17,retriable:!1,message:"The request attempted to perform an operation on an invalid topic"},{type:"RECORD_LIST_TOO_LARGE",code:18,retriable:!1,message:"The request included message batch larger than the configured segment size on the server"},{type:"NOT_ENOUGH_REPLICAS",code:19,retriable:!0,message:"Messages are rejected since there are fewer in-sync replicas than required"},{type:"NOT_ENOUGH_REPLICAS_AFTER_APPEND",code:20,retriable:!0,message:"Messages are written to the log, but to fewer in-sync replicas than required"},{type:"INVALID_REQUIRED_ACKS",code:21,retriable:!1,message:"Produce request specified an invalid value for required acks"},{type:"ILLEGAL_GENERATION",code:22,retriable:!1,message:"Specified group generation id is not valid"},{type:"INCONSISTENT_GROUP_PROTOCOL",code:23,retriable:!1,message:"The group member's supported protocols are incompatible with those of existing members"},{type:"INVALID_GROUP_ID",code:24,retriable:!1,message:"The configured groupId is invalid"},{type:"UNKNOWN_MEMBER_ID",code:25,retriable:!1,message:"The coordinator is not aware of this member"},{type:"INVALID_SESSION_TIMEOUT",code:26,retriable:!1,message:"The session timeout is not within the range allowed by the broker (as configured by group.min.session.timeout.ms and group.max.session.timeout.ms)"},{type:"REBALANCE_IN_PROGRESS",code:27,retriable:!1,message:"The group is rebalancing, so a rejoin is needed",helpUrl:n("docs/faq","what-does-it-mean-to-get-rebalance-in-progress-errors")},{type:"INVALID_COMMIT_OFFSET_SIZE",code:28,retriable:!1,message:"The committing offset data size is not valid"},{type:"TOPIC_AUTHORIZATION_FAILED",code:29,retriable:!1,message:"Not authorized to access topics: [Topic authorization failed]"},{type:"GROUP_AUTHORIZATION_FAILED",code:30,retriable:!1,message:"Not authorized to access group: Group authorization failed"},{type:"CLUSTER_AUTHORIZATION_FAILED",code:31,retriable:!1,message:"Cluster authorization failed"},{type:"INVALID_TIMESTAMP",code:32,retriable:!1,message:"The timestamp of the message is out of acceptable range"},{type:"UNSUPPORTED_SASL_MECHANISM",code:33,retriable:!1,message:"The broker does not support the requested SASL mechanism"},{type:"ILLEGAL_SASL_STATE",code:34,retriable:!1,message:"Request is not valid given the current SASL state"},{type:"UNSUPPORTED_VERSION",code:35,retriable:!1,message:"The version of API is not supported"},{type:"TOPIC_ALREADY_EXISTS",code:36,retriable:!1,message:"Topic with this name already exists"},{type:"INVALID_PARTITIONS",code:37,retriable:!1,message:"Number of partitions is invalid"},{type:"INVALID_REPLICATION_FACTOR",code:38,retriable:!1,message:"Replication-factor is invalid"},{type:"INVALID_REPLICA_ASSIGNMENT",code:39,retriable:!1,message:"Replica assignment is invalid"},{type:"INVALID_CONFIG",code:40,retriable:!1,message:"Configuration is invalid"},{type:"NOT_CONTROLLER",code:41,retriable:!0,message:"This is not the correct controller for this cluster"},{type:"INVALID_REQUEST",code:42,retriable:!1,message:"This most likely occurs because of a request being malformed by the client library or the message was sent to an incompatible broker. See the broker logs for more details"},{type:"UNSUPPORTED_FOR_MESSAGE_FORMAT",code:43,retriable:!1,message:"The message format version on the broker does not support the request"},{type:"POLICY_VIOLATION",code:44,retriable:!1,message:"Request parameters do not satisfy the configured policy"},{type:"OUT_OF_ORDER_SEQUENCE_NUMBER",code:45,retriable:!1,message:"The broker received an out of order sequence number"},{type:"DUPLICATE_SEQUENCE_NUMBER",code:46,retriable:!1,message:"The broker received a duplicate sequence number"},{type:"INVALID_PRODUCER_EPOCH",code:47,retriable:!1,message:"Producer attempted an operation with an old epoch. Either there is a newer producer with the same transactionalId, or the producer's transaction has been expired by the broker"},{type:"INVALID_TXN_STATE",code:48,retriable:!1,message:"The producer attempted a transactional operation in an invalid state"},{type:"INVALID_PRODUCER_ID_MAPPING",code:49,retriable:!1,message:"The producer attempted to use a producer id which is not currently assigned to its transactional id"},{type:"INVALID_TRANSACTION_TIMEOUT",code:50,retriable:!1,message:"The transaction timeout is larger than the maximum value allowed by the broker (as configured by max.transaction.timeout.ms)"},{type:"CONCURRENT_TRANSACTIONS",code:51,retriable:!0,message:"The producer attempted to update a transaction while another concurrent operation on the same transaction was ongoing"},{type:"TRANSACTION_COORDINATOR_FENCED",code:52,retriable:!1,message:"Indicates that the transaction coordinator sending a WriteTxnMarker is no longer the current coordinator for a given producer"},{type:"TRANSACTIONAL_ID_AUTHORIZATION_FAILED",code:53,retriable:!1,message:"Transactional Id authorization failed"},{type:"SECURITY_DISABLED",code:54,retriable:!1,message:"Security features are disabled"},{type:"OPERATION_NOT_ATTEMPTED",code:55,retriable:!1,message:"The broker did not attempt to execute this operation. This may happen for batched RPCs where some operations in the batch failed, causing the broker to respond without trying the rest"},{type:"KAFKA_STORAGE_ERROR",code:56,retriable:!0,message:"Disk error when trying to access log file on the disk"},{type:"LOG_DIR_NOT_FOUND",code:57,retriable:!1,message:"The user-specified log directory is not found in the broker config"},{type:"SASL_AUTHENTICATION_FAILED",code:58,retriable:!1,message:"SASL Authentication failed",helpUrl:n("docs/configuration","sasl")},{type:"UNKNOWN_PRODUCER_ID",code:59,retriable:!1,message:"This exception is raised by the broker if it could not locate the producer metadata associated with the producerId in question. This could happen if, for instance, the producer's records were deleted because their retention time had elapsed. Once the last records of the producerId are removed, the producer's metadata is removed from the broker, and future appends by the producer will return this exception"},{type:"REASSIGNMENT_IN_PROGRESS",code:60,retriable:!1,message:"A partition reassignment is in progress"},{type:"DELEGATION_TOKEN_AUTH_DISABLED",code:61,retriable:!1,message:"Delegation Token feature is not enabled"},{type:"DELEGATION_TOKEN_NOT_FOUND",code:62,retriable:!1,message:"Delegation Token is not found on server"},{type:"DELEGATION_TOKEN_OWNER_MISMATCH",code:63,retriable:!1,message:"Specified Principal is not valid Owner/Renewer"},{type:"DELEGATION_TOKEN_REQUEST_NOT_ALLOWED",code:64,retriable:!1,message:"Delegation Token requests are not allowed on PLAINTEXT/1-way SSL channels and on delegation token authenticated channels"},{type:"DELEGATION_TOKEN_AUTHORIZATION_FAILED",code:65,retriable:!1,message:"Delegation Token authorization failed"},{type:"DELEGATION_TOKEN_EXPIRED",code:66,retriable:!1,message:"Delegation Token is expired"},{type:"INVALID_PRINCIPAL_TYPE",code:67,retriable:!1,message:"Supplied principalType is not supported"},{type:"NON_EMPTY_GROUP",code:68,retriable:!1,message:"The group is not empty"},{type:"GROUP_ID_NOT_FOUND",code:69,retriable:!1,message:"The group id was not found"},{type:"FETCH_SESSION_ID_NOT_FOUND",code:70,retriable:!0,message:"The fetch session ID was not found"},{type:"INVALID_FETCH_SESSION_EPOCH",code:71,retriable:!0,message:"The fetch session epoch is invalid"},{type:"LISTENER_NOT_FOUND",code:72,retriable:!0,message:"There is no listener on the leader broker that matches the listener on which metadata request was processed"},{type:"TOPIC_DELETION_DISABLED",code:73,retriable:!1,message:"Topic deletion is disabled"},{type:"FENCED_LEADER_EPOCH",code:74,retriable:!0,message:"The leader epoch in the request is older than the epoch on the broker"},{type:"UNKNOWN_LEADER_EPOCH",code:75,retriable:!0,message:"The leader epoch in the request is newer than the epoch on the broker"},{type:"UNSUPPORTED_COMPRESSION_TYPE",code:76,retriable:!1,message:"The requesting client does not support the compression type of given partition"},{type:"STALE_BROKER_EPOCH",code:77,retriable:!1,message:"Broker epoch has changed"},{type:"OFFSET_NOT_AVAILABLE",code:78,retriable:!0,message:"The leader high watermark has not caught up from a recent leader election so the offsets cannot be guaranteed to be monotonically increasing"},{type:"MEMBER_ID_REQUIRED",code:79,retriable:!1,message:"The group member needs to have a valid member id before actually entering a consumer group"},{type:"PREFERRED_LEADER_NOT_AVAILABLE",code:80,retriable:!0,message:"The preferred leader was not available"},{type:"GROUP_MAX_SIZE_REACHED",code:81,retriable:!1,message:"The consumer group has reached its max size. It already has the configured maximum number of members"},{type:"FENCED_INSTANCE_ID",code:82,retriable:!1,message:"The broker rejected this static consumer since another consumer with the same group instance id has registered with a different member id"},{type:"ELIGIBLE_LEADERS_NOT_AVAILABLE",code:83,retriable:!0,message:"Eligible topic partition leaders are not available"},{type:"ELECTION_NOT_NEEDED",code:84,retriable:!0,message:"Leader election not needed for topic partition"},{type:"NO_REASSIGNMENT_IN_PROGRESS",code:85,retriable:!1,message:"No partition reassignment is in progress"},{type:"GROUP_SUBSCRIBED_TO_TOPIC",code:86,retriable:!1,message:"Deleting offsets of a topic is forbidden while the consumer group is actively subscribed to it"},{type:"INVALID_RECORD",code:87,retriable:!1,message:"This record has failed the validation on broker and hence be rejected"},{type:"UNSTABLE_OFFSET_COMMIT",code:88,retriable:!0,message:"There are unstable offsets that need to be cleared"}],i=e=>new o(s.find((t=>t.code===e))||{type:"KAFKAJS_UNKNOWN_ERROR_CODE",code:-99,retriable:!1,message:`Unknown error code ${e}`});e.exports={failure:e=>0!==e,errorCodes:s,createErrorFromCode:i,failIfVersionNotSupported:e=>{if(35===e)throw i(35)},staleMetadata:e=>["UNKNOWN_TOPIC_OR_PARTITION","LEADER_NOT_AVAILABLE","NOT_LEADER_FOR_PARTITION"].includes(e.type)}},52845:function(e){e.exports={READ_UNCOMMITTED:0,READ_COMMITTED:1}},16332:function(e,t,r){const{promisify:o}=r(73837),n=r(59796),s=o(n.gzip),i=o(n.unzip);e.exports={compress:async e=>await s(e.buffer),decompress:async e=>await i(e)}},42972:function(e,t,r){const{KafkaJSNotImplemented:o}=r(29879),n={None:0,GZIP:1,Snappy:2,LZ4:3,ZSTD:4},s={[n.GZIP]:()=>r(16332),[n.Snappy]:()=>{throw new o("Snappy compression not implemented")},[n.LZ4]:()=>{throw new o("LZ4 compression not implemented")},[n.ZSTD]:()=>{throw new o("ZSTD compression not implemented")}};e.exports={Types:n,Codecs:s,lookupCodec:e=>s[e]?s[e]():null,lookupCodecByAttributes:e=>{const t=s[7&e];return t?t():null},COMPRESSION_CODEC_MASK:7}},82691:function(e,t,r){const{KafkaJSPartialMessageError:o,KafkaJSUnsupportedMagicByteInMessageSet:n}=r(29879),s=r(72650),i=r(72801);e.exports=(e,t,r)=>{const a=Buffer.byteLength(r.slice(t).buffer);if(a<t)throw new o(`Tried to decode a partial message: remainingBytes(${a}) < messageSize(${t})`);const c=r.readInt32(),u=r.readInt8(),d=((e,t)=>{switch(t){case 0:return s(e);case 1:return i(e);default:throw new n(`Unsupported MessageSet message version, magic byte: ${t}`)}})(r,u);return Object.assign({offset:e,size:t,crc:c,magicByte:u},d)}},56615:function(e,t,r){const o={0:r(3154),1:r(86740)};e.exports=({version:e=0})=>o[e]},72650:function(e){e.exports=e=>({attributes:e.readInt8(),key:e.readBytes(),value:e.readBytes()})},3154:function(e,t,r){const o=r(28783),n=r(21574),{Types:s,COMPRESSION_CODEC_MASK:i}=r(42972);e.exports=({compression:e=s.None,key:t,value:r})=>{const a=(new o).writeInt8(0).writeInt8(e&i).writeBytes(t).writeBytes(r),c=n(a);return(new o).writeInt32(c).writeEncoder(a)}},72801:function(e){e.exports=e=>({attributes:e.readInt8(),timestamp:e.readInt64().toString(),key:e.readBytes(),value:e.readBytes()})},86740:function(e,t,r){const o=r(28783),n=r(21574),{Types:s,COMPRESSION_CODEC_MASK:i}=r(42972);e.exports=({compression:e=s.None,timestamp:t=Date.now(),key:r,value:a})=>{const c=(new o).writeInt8(1).writeInt8(e&i).writeInt64(t).writeBytes(r).writeBytes(a),u=n(c);return(new o).writeInt32(u).writeEncoder(c)}},44321:function(e,t,r){const o=r(73278),n=r(56341),s=r(82691),{lookupCodecByAttributes:i}=r(42972),{KafkaJSPartialMessageError:a}=r(29879);e.exports=async(e,t=null)=>{const r=[],o=t||e.readInt32(),s=e.slice(o);for(;s.offset<o;)try{const e=u(s),t=i(e.attributes);if(t){const o=await t.decompress(e.value);r.push(...c(new n(o),e))}else r.push(e)}catch(e){if("KafkaJSPartialMessageError"===e.name)break;if("KafkaJSUnsupportedMagicByteInMessageSet"===e.name)break;throw e}return e.forward(o),r};const c=(e,t)=>{const r=[];for(;e.offset<e.buffer.length;)r.push(u(e));if(t.magicByte>0&&t.offset>=0){const e=o.fromValue(t.offset)-o.fromValue(r[r.length-1].offset);for(const t of r)t.offset=o.fromValue(t.offset).add(e).toString()}return r},u=e=>{if(!e.canReadInt64())throw new a("Tried to decode a partial message: There isn't enough bytes to read the offset");const t=e.readInt64().toString();if(!e.canReadInt32())throw new a("Tried to decode a partial message: There isn't enough bytes to read the message size");const r=e.readInt32();return s(t,r,e)}},42032:function(e,t,r){const o=r(28783),n=r(56615),{Types:s}=r(42972);e.exports=({messageVersion:e=0,compression:t,entries:r})=>{const i=t!==s.None,a=n({version:e}),c=new o;return r.forEach(((e,t)=>{const r=a(e);c.writeInt64(i?t:-1),c.writeInt32(r.size()),c.writeEncoder(r)})),c}},46911:function(e){e.exports=e=>{let r=-1;for(let o=0;o<e.length;o++)r=t[255&(r^e[o])]^r>>>8;return(-1^r)>>>0};var t=new Int32Array([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697])},83398:function(e,t,r){const o=r(46911);e.exports=e=>{return t=o(e),Uint32Array.from([t])[0];var t}},37778:function(e){e.exports=e=>({key:e.readVarIntString(),value:e.readVarIntBytes()})},39537:function(e,t,r){const o=r(28783);e.exports=({key:e,value:t})=>(new o).writeVarIntString(e).writeVarIntBytes(t)},21240:function(e,t,r){const o=r(73278),n=r(37778),s=r(62515);e.exports=(e,t={})=>{const{firstOffset:r,firstTimestamp:i,magicByte:a,isControlBatch:c=!1,timestampType:u,maxTimestamp:d}=t,p=e.readInt8(),l=e.readVarLong(),h=u===s.LOG_APPEND_TIME&&d?d:o.fromValue(i).add(l).toString(),f=e.readVarInt(),m=o.fromValue(r).add(f).toString(),g=e.readVarIntBytes(),y=e.readVarIntBytes(),I=e.readVarIntArray(n).reduce(((e,{key:t,value:r})=>({...e,[t]:r})),{});return{magicByte:a,attributes:p,timestamp:h,offset:m,key:g,value:y,headers:I,isControlRecord:c,batchContext:t}}},16575:function(e,t,r){const o=r(28783),n=r(39537);e.exports=({offsetDelta:e=0,timestampDelta:t=0,key:r,value:i,headers:a={}})=>{const c=Object.keys(a).map((e=>({key:e,value:a[e]}))),u=1+o.sizeOfVarLong(t)+o.sizeOfVarInt(e)+o.sizeOfVarIntBytes(r)+o.sizeOfVarIntBytes(i)+s(c);return(new o).writeVarInt(u).writeInt8(0).writeVarLong(t).writeVarInt(e).writeVarIntBytes(r).writeVarIntBytes(i).writeVarIntArray(c.map(n))};const s=e=>{let t=o.sizeOfVarInt(e.length);for(const r of e){const e=Buffer.byteLength(r.key),n=Buffer.byteLength(r.value);t+=o.sizeOfVarInt(e)+e,null===r.value?t+=o.sizeOfVarInt(-1):t+=o.sizeOfVarInt(n)+n}return t}},43294:function(e,t,r){const o=r(56341),{KafkaJSPartialMessageError:n}=r(29879),{lookupCodecByAttributes:s}=r(42972),i=r(21240),a=r(62515);e.exports=async e=>{const t=e.readInt64().toString(),r=e.readInt32(),o=e.slice(r);e.forward(r);const i=Buffer.byteLength(o.buffer);if(i<r)throw new n(`Tried to decode a partial record batch: remainingBytes(${i}) < recordBatchLength(${r})`);const u=o.readInt32(),d=o.readInt8(),p=(o.readInt32(),o.readInt16()),l=o.readInt32(),h=o.readInt64().toString(),f=o.readInt64().toString(),m=o.readInt64().toString(),g=o.readInt16(),y=o.readInt32(),I=(16&p)>0,w=(32&p)>0,T=(8&p)>0?a.LOG_APPEND_TIME:a.CREATE_TIME,b=s(p),E={firstOffset:t,firstTimestamp:h,partitionLeaderEpoch:u,inTransaction:I,isControlBatch:w,lastOffsetDelta:l,producerId:m,producerEpoch:g,firstSequence:y,maxTimestamp:f,timestampType:T},S=await c(b,o,{...E,magicByte:d});return{...E,records:S}};const c=async(e,t,r)=>{if(!e)return t.readArray((e=>u(e,r)));const n=t.readInt32();if(n<=0)return[];const s=t.readAll(),i=await e.decompress(s),a=new o(i),c=new Array(n);for(let e=0;e<n;e++)c[e]=u(a,r);return c},u=(e,t)=>{const r=e.readVarIntBytes();return i(new o(r),t)}},72872:function(e,t,r){const o=r(73278),n=r(28783),s=r(83398),{Types:i,lookupCodec:a,COMPRESSION_CODEC_MASK:c}=r(42972);e.exports={RecordBatch:async({compression:e=i.None,firstOffset:t=o.fromInt(0),firstTimestamp:r=Date.now(),maxTimestamp:u=Date.now(),partitionLeaderEpoch:d=0,lastOffsetDelta:p=0,transactional:l=!1,producerId:h=o.fromValue(-1),producerEpoch:f=0,firstSequence:m=0,records:g=[]})=>{const y=0|e&c|(l?16:0),I=(new n).writeInt16(y).writeInt32(p).writeInt64(r).writeInt64(u).writeInt64(h).writeInt16(f).writeInt32(m);if(e===i.None)g.every((e=>typeof e==typeof g[0]))?I.writeArray(g,typeof g[0]):I.writeArray(g);else{const t=await(async(e,t)=>{const r=a(e),o=new n;return o.writeEncoderArray(t),r.compress(o)})(e,g);I.writeInt32(g.length).writeBuffer(t)}const w=(new n).writeInt32(d).writeInt8(2).writeUInt32(s(I.buffer)).writeEncoder(I);return(new n).writeInt64(t).writeBytes(w.buffer)},MAGIC_BYTE:2}},52882:function(e,t,r){const o=r(28783);e.exports=async({correlationId:e,clientId:t,request:{apiKey:r,apiVersion:n,encode:s}})=>{const i=await s(),a=(new o).writeInt16(r).writeInt16(n).writeInt32(e).writeString(t).writeEncoder(i);return(new o).writeInt32(a.size()).writeEncoder(a)}},4530:function(e,t,r){const o={0:({transactionalId:e,producerId:t,producerEpoch:o,groupId:n})=>{const s=r(28831),i=r(92374);return{request:s({transactionalId:e,producerId:t,producerEpoch:o,groupId:n}),response:i}},1:({transactionalId:e,producerId:t,producerEpoch:o,groupId:n})=>{const s=r(73347),i=r(62058);return{request:s({transactionalId:e,producerId:t,producerEpoch:o,groupId:n}),response:i}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},28831:function(e,t,r){const o=r(28783),{AddOffsetsToTxn:n}=r(99211);e.exports=({transactionalId:e,producerId:t,producerEpoch:r,groupId:s})=>({apiKey:n,apiVersion:0,apiName:"AddOffsetsToTxn",encode:async()=>(new o).writeString(e).writeInt64(t).writeInt16(r).writeString(s)})},92374:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),n=t.readInt16();return i(n),{throttleTime:r,errorCode:n}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},73347:function(e,t,r){const o=r(28831);e.exports=({transactionalId:e,producerId:t,producerEpoch:r,groupId:n})=>Object.assign(o({transactionalId:e,producerId:t,producerEpoch:r,groupId:n}),{apiVersion:1})},62058:function(e,t,r){const{parse:o,decode:n}=r(92374);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},73350:function(e,t,r){const o={0:({transactionalId:e,producerId:t,producerEpoch:o,topics:n})=>{const s=r(1805),i=r(75256);return{request:s({transactionalId:e,producerId:t,producerEpoch:o,topics:n}),response:i}},1:({transactionalId:e,producerId:t,producerEpoch:o,topics:n})=>{const s=r(37919),i=r(41361);return{request:s({transactionalId:e,producerId:t,producerEpoch:o,topics:n}),response:i}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},1805:function(e,t,r){const o=r(28783),{AddPartitionsToTxn:n}=r(99211);e.exports=({transactionalId:e,producerId:t,producerEpoch:r,topics:i})=>({apiKey:n,apiVersion:0,apiName:"AddPartitionsToTxn",encode:async()=>(new o).writeString(e).writeInt64(t).writeInt16(r).writeArray(i.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=e=>(new o).writeInt32(e)},75256:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=async e=>({topic:e.readString(),partitionErrors:await e.readArrayAsync(a)}),a=e=>({partition:e.readInt32(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),errors:await t.readArrayAsync(i)}},parse:async e=>{const t=e.errors.map((({partitionErrors:e})=>({partitionsWithErrors:e.filter((({errorCode:e})=>n(e)))}))).filter((({partitionsWithErrors:e})=>e.length));if(t.length>0)throw s(t[0].partitionsWithErrors[0].errorCode);return e}}},37919:function(e,t,r){const o=r(1805);e.exports=({transactionalId:e,producerId:t,producerEpoch:r,topics:n})=>Object.assign(o({transactionalId:e,producerId:t,producerEpoch:r,topics:n}),{apiVersion:1})},41361:function(e,t,r){const{parse:o,decode:n}=r(75256);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},31858:function(e,t,r){const o={0:({resources:e,validateOnly:t})=>{const o=r(57654),n=r(93829);return{request:o({resources:e,validateOnly:t}),response:n}},1:({resources:e,validateOnly:t})=>{const o=r(54836),n=r(49739);return{request:o({resources:e,validateOnly:t}),response:n}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},57654:function(e,t,r){const o=r(28783),{AlterConfigs:n}=r(99211);e.exports=({resources:e,validateOnly:t=!1})=>({apiKey:n,apiVersion:0,apiName:"AlterConfigs",encode:async()=>(new o).writeArray(e.map(s)).writeBoolean(t)});const s=({type:e,name:t,configEntries:r})=>(new o).writeInt8(e).writeString(t).writeArray(r.map(i)),i=({name:e,value:t})=>(new o).writeString(e).writeString(t)},93829:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({errorCode:e.readInt16(),errorMessage:e.readString(),resourceType:e.readInt8(),resourceName:e.readString()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),resources:t.readArray(i)}},parse:async e=>{const t=e.resources.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);return e}}},54836:function(e,t,r){const o=r(57654);e.exports=({resources:e,validateOnly:t})=>Object.assign(o({resources:e,validateOnly:t}),{apiVersion:1})},49739:function(e,t,r){const{parse:o,decode:n}=r(93829);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},99211:function(e){e.exports={Produce:0,Fetch:1,ListOffsets:2,Metadata:3,LeaderAndIsr:4,StopReplica:5,UpdateMetadata:6,ControlledShutdown:7,OffsetCommit:8,OffsetFetch:9,GroupCoordinator:10,JoinGroup:11,Heartbeat:12,LeaveGroup:13,SyncGroup:14,DescribeGroups:15,ListGroups:16,SaslHandshake:17,ApiVersions:18,CreateTopics:19,DeleteTopics:20,DeleteRecords:21,InitProducerId:22,OffsetForLeaderEpoch:23,AddPartitionsToTxn:24,AddOffsetsToTxn:25,EndTxn:26,WriteTxnMarkers:27,TxnOffsetCommit:28,DescribeAcls:29,CreateAcls:30,DeleteAcls:31,DescribeConfigs:32,AlterConfigs:33,AlterReplicaLogDirs:34,DescribeLogDirs:35,SaslAuthenticate:36,CreatePartitions:37,CreateDelegationToken:38,RenewDelegationToken:39,ExpireDelegationToken:40,DescribeDelegationToken:41,DeleteGroups:42,ElectPreferredLeaders:43}},67020:function(e,t,r){const o={0:()=>{const e=r(20092),t=r(62839);return{request:e(),response:t,logResponseError:!0}},1:()=>{const e=r(14778),t=r(64313);return{request:e(),response:t,logResponseError:!1}},2:()=>{const e=r(94125),t=r(43267);return{request:e(),response:t,logResponseError:!1}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},20092:function(e,t,r){const o=r(28783),{ApiVersions:n}=r(99211);e.exports=()=>({apiKey:n,apiVersion:0,apiName:"ApiVersions",encode:async()=>new o})},62839:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701),a=e=>({apiKey:e.readInt16(),minVersion:e.readInt16(),maxVersion:e.readInt16()});e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return i(r),{errorCode:r,apiVersions:t.readArray(a)}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},14778:function(e,t,r){const o=r(20092);e.exports=()=>({...o(),apiVersion:1})},64313:function(e,t,r){const o=r(56341),{failIfVersionNotSupported:n}=r(21701),{parse:s}=r(62839),i=e=>({apiKey:e.readInt16(),minVersion:e.readInt16(),maxVersion:e.readInt16()});e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return n(r),{errorCode:r,apiVersions:t.readArray(i),throttleTime:t.canReadInt32()?t.readInt32():0}},parse:s}},94125:function(e,t,r){const o=r(20092);e.exports=()=>({...o(),apiVersion:2})},43267:function(e,t,r){const{parse:o,decode:n}=r(64313);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},64950:function(e,t,r){const o={0:({creations:e})=>{const t=r(92073),o=r(98650);return{request:t({creations:e}),response:o}},1:({creations:e})=>{const t=r(60160),o=r(11274);return{request:t({creations:e}),response:o}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},92073:function(e,t,r){const o=r(28783),{CreateAcls:n}=r(99211),s=({resourceType:e,resourceName:t,principal:r,host:n,operation:s,permissionType:i})=>(new o).writeInt8(e).writeString(t).writeString(r).writeString(n).writeInt8(s).writeInt8(i);e.exports=({creations:e})=>({apiKey:n,apiVersion:0,apiName:"CreateAcls",encode:async()=>(new o).writeArray(e.map(s))})},98650:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({errorCode:e.readInt16(),errorMessage:e.readString()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),creationResponses:t.readArray(i)}},parse:async e=>{const t=e.creationResponses.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);return e}}},60160:function(e,t,r){const o=r(28783),{CreateAcls:n}=r(99211),s=({resourceType:e,resourceName:t,resourcePatternType:r,principal:n,host:s,operation:i,permissionType:a})=>(new o).writeInt8(e).writeString(t).writeInt8(r).writeString(n).writeString(s).writeInt8(i).writeInt8(a);e.exports=({creations:e})=>({apiKey:n,apiVersion:1,apiName:"CreateAcls",encode:async()=>(new o).writeArray(e.map(s))})},11274:function(e,t,r){const{parse:o,decode:n}=r(98650);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},14842:function(e,t,r){const o={0:({topicPartitions:e,timeout:t,validateOnly:o})=>{const n=r(53272),s=r(31451);return{request:n({topicPartitions:e,timeout:t,validateOnly:o}),response:s}},1:({topicPartitions:e,validateOnly:t,timeout:o})=>{const n=r(72620),s=r(71932);return{request:n({topicPartitions:e,validateOnly:t,timeout:o}),response:s}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},53272:function(e,t,r){const o=r(28783),{CreatePartitions:n}=r(99211);e.exports=({topicPartitions:e,validateOnly:t=!1,timeout:r=5e3})=>({apiKey:n,apiVersion:0,apiName:"CreatePartitions",encode:async()=>(new o).writeArray(e.map(s)).writeInt32(r).writeBoolean(t)});const s=({topic:e,count:t,assignments:r=[]})=>(new o).writeString(e).writeInt32(t).writeNullableArray(r.map(i)),i=e=>(new o).writeNullableArray(e)},31451:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=(e,t)=>e.topic.localeCompare(t.topic),a=e=>({topic:e.readString(),errorCode:e.readInt16(),errorMessage:e.readString()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),topicErrors:t.readArray(a).sort(i)}},parse:async e=>{const t=e.topicErrors.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);return e}}},72620:function(e,t,r){const o=r(53272);e.exports=({topicPartitions:e,validateOnly:t,timeout:r})=>Object.assign(o({topicPartitions:e,validateOnly:t,timeout:r}),{apiVersion:1})},71932:function(e,t,r){const{parse:o,decode:n}=r(31451);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},42346:function(e,t,r){const o={0:({topics:e,timeout:t})=>{const o=r(69752),n=r(74108);return{request:o({topics:e,timeout:t}),response:n}},1:({topics:e,validateOnly:t,timeout:o})=>{const n=r(54098),s=r(38053);return{request:n({topics:e,validateOnly:t,timeout:o}),response:s}},2:({topics:e,validateOnly:t,timeout:o})=>{const n=r(55669),s=r(79695);return{request:n({topics:e,validateOnly:t,timeout:o}),response:s}},3:({topics:e,validateOnly:t,timeout:o})=>{const n=r(24208),s=r(9264);return{request:n({topics:e,validateOnly:t,timeout:o}),response:s}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},69752:function(e,t,r){const o=r(28783),{CreateTopics:n}=r(99211);e.exports=({topics:e,timeout:t=5e3})=>({apiKey:n,apiVersion:0,apiName:"CreateTopics",encode:async()=>(new o).writeArray(e.map(s)).writeInt32(t)});const s=({topic:e,numPartitions:t=1,replicationFactor:r=1,replicaAssignment:n=[],configEntries:s=[]})=>(new o).writeString(e).writeInt32(t).writeInt16(r).writeArray(n.map(i)).writeArray(s.map(a)),i=({partition:e,replicas:t})=>(new o).writeInt32(e).writeArray(t),a=({name:e,value:t})=>(new o).writeString(e).writeString(t)},74108:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),{KafkaJSAggregateError:i,KafkaJSCreateTopicError:a}=r(29879),c=(e,t)=>e.topic.localeCompare(t.topic),u=e=>({topic:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>({topicErrors:new o(e).readArray(u).sort(c)}),parse:async e=>{const t=e.topicErrors.filter((({errorCode:e})=>n(e)));if(t.length>0)throw new i("Topic creation errors",t.map((e=>new a(s(e.errorCode),e.topic))));return e}}},54098:function(e,t,r){const o=r(28783),{CreateTopics:n}=r(99211);e.exports=({topics:e,validateOnly:t=!1,timeout:r=5e3})=>({apiKey:n,apiVersion:1,apiName:"CreateTopics",encode:async()=>(new o).writeArray(e.map(s)).writeInt32(r).writeBoolean(t)});const s=({topic:e,numPartitions:t=1,replicationFactor:r=1,replicaAssignment:n=[],configEntries:s=[]})=>(new o).writeString(e).writeInt32(t).writeInt16(r).writeArray(n.map(i)).writeArray(s.map(a)),i=({partition:e,replicas:t})=>(new o).writeInt32(e).writeArray(t),a=({name:e,value:t})=>(new o).writeString(e).writeString(t)},38053:function(e,t,r){const o=r(56341),{parse:n}=r(74108),s=(e,t)=>e.topic.localeCompare(t.topic),i=e=>({topic:e.readString(),errorCode:e.readInt16(),errorMessage:e.readString()});e.exports={decode:async e=>({topicErrors:new o(e).readArray(i).sort(s)}),parse:n}},55669:function(e,t,r){const o=r(54098);e.exports=({topics:e,validateOnly:t,timeout:r})=>Object.assign(o({topics:e,validateOnly:t,timeout:r}),{apiVersion:2})},79695:function(e,t,r){const o=r(56341),{parse:n}=r(38053),s=(e,t)=>e.topic.localeCompare(t.topic),i=e=>({topic:e.readString(),errorCode:e.readInt16(),errorMessage:e.readString()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),topicErrors:t.readArray(i).sort(s)}},parse:n}},24208:function(e,t,r){const o=r(55669);e.exports=({topics:e,validateOnly:t,timeout:r})=>Object.assign(o({topics:e,validateOnly:t,timeout:r}),{apiVersion:3})},9264:function(e,t,r){const{parse:o,decode:n}=r(79695);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},11491:function(e,t,r){const o={0:({filters:e})=>{const t=r(96054),o=r(56061);return{request:t({filters:e}),response:o}},1:({filters:e})=>{const t=r(52349),o=r(41765);return{request:t({filters:e}),response:o}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},96054:function(e,t,r){const o=r(28783),{DeleteAcls:n}=r(99211),s=({resourceType:e,resourceName:t,principal:r,host:n,operation:s,permissionType:i})=>(new o).writeInt8(e).writeString(t).writeString(r).writeString(n).writeInt8(s).writeInt8(i);e.exports=({filters:e})=>({apiKey:n,apiVersion:0,apiName:"DeleteAcls",encode:async()=>(new o).writeArray(e.map(s))})},56061:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({errorCode:e.readInt16(),errorMessage:e.readString(),resourceType:e.readInt8(),resourceName:e.readString(),principal:e.readString(),host:e.readString(),operation:e.readInt8(),permissionType:e.readInt8()}),a=e=>({errorCode:e.readInt16(),errorMessage:e.readString(),matchingAcls:e.readArray(i)});e.exports={decodeMatchingAcls:i,decodeFilterResponse:a,decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),filterResponses:t.readArray(a)}},parse:async e=>{const t=e.filterResponses.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);for(const t of e.filterResponses){const e=t.matchingAcls.filter((({errorCode:e})=>n(e)));if(e.length>0)throw s(e[0].errorCode)}return e}}},52349:function(e,t,r){const o=r(28783),{DeleteAcls:n}=r(99211),s=({resourceType:e,resourceName:t,resourcePatternType:r,principal:n,host:s,operation:i,permissionType:a})=>(new o).writeInt8(e).writeString(t).writeInt8(r).writeString(n).writeString(s).writeInt8(i).writeInt8(a);e.exports=({filters:e})=>({apiKey:n,apiVersion:1,apiName:"DeleteAcls",encode:async()=>(new o).writeArray(e.map(s))})},41765:function(e,t,r){const o=r(56341),{parse:n}=r(56061),s=e=>({errorCode:e.readInt16(),errorMessage:e.readString(),resourceType:e.readInt8(),resourceName:e.readString(),resourcePatternType:e.readInt8(),principal:e.readString(),host:e.readString(),operation:e.readInt8(),permissionType:e.readInt8()}),i=e=>({errorCode:e.readInt16(),errorMessage:e.readString(),matchingAcls:e.readArray(s)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:0,clientSideThrottleTime:t.readInt32(),filterResponses:t.readArray(i)}},parse:n}},62086:function(e,t,r){const o={0:e=>{const t=r(91254),o=r(95276);return{request:t(e),response:o}},1:e=>{const t=r(47967),o=r(74782);return{request:t(e),response:o}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},91254:function(e,t,r){const o=r(28783),{DeleteGroups:n}=r(99211);e.exports=e=>({apiKey:n,apiVersion:0,apiName:"DeleteGroups",encode:async()=>(new o).writeArray(e.map(s))});const s=e=>(new o).writeString(e)},95276:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({groupId:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),a=t.readArray(i);for(const e of a)n(e.errorCode)&&(e.error=s(e.errorCode));return{throttleTimeMs:r,results:a}},parse:async e=>e}},47967:function(e,t,r){const o=r(91254);e.exports=e=>Object.assign(o(e),{apiVersion:1})},74782:function(e,t,r){const{parse:o,decode:n}=r(95276);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},28035:function(e,t,r){const o={0:({topics:e,timeout:t})=>{const o=r(92970),n=r(89645);return{request:o({topics:e,timeout:t}),response:n({topics:e})}},1:({topics:e,timeout:t})=>{const o=r(38993),n=r(2328);return{request:o({topics:e,timeout:t}),response:n({topics:e})}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},92970:function(e,t,r){const o=r(28783),{DeleteRecords:n}=r(99211);e.exports=({topics:e,timeout:t=5e3})=>({apiKey:n,apiVersion:0,apiName:"DeleteRecords",encode:async()=>(new o).writeArray(e.map((({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map((({partition:e,offset:t})=>(new o).writeInt32(e).writeInt64(t))))))).writeInt32(t)})},89645:function(e,t,r){const o=r(56341),{KafkaJSDeleteTopicRecordsError:n}=r(29879),{failure:s,createErrorFromCode:i}=r(21701),a=(e,t)=>e.topic.localeCompare(t.topic),c=async e=>{const t=new o(e);return{throttleTime:t.readInt32(),topics:t.readArray((e=>({topic:e.readString(),partitions:e.readArray((e=>({partition:e.readInt32(),lowWatermark:e.readInt64(),errorCode:e.readInt16()})))}))).sort(a)}};e.exports=({topics:e})=>{return{decode:c,parse:(t=e,async e=>{const r=e.topics.map((({partitions:e})=>({partitionsWithErrors:e.filter((({errorCode:e})=>s(e)))}))).filter((({partitionsWithErrors:e})=>e.length));if(r.length>0){const[{topic:o}]=e.topics,[{partitions:s}]=t,[{partitionsWithErrors:a}]=r;throw new n({topic:o,partitions:a.map((({partition:e,errorCode:t})=>({partition:e,error:i(t),offset:s.find((t=>t.partition===e)).offset})))})}return e})};var t}},38993:function(e,t,r){const o=r(92970);e.exports=({topics:e,timeout:t})=>Object.assign(o({topics:e,timeout:t}),{apiVersion:1})},2328:function(e,t,r){const o=r(89645);e.exports=({topics:e})=>{const{parse:t,decode:r}=o({topics:e});return{decode:async e=>{const t=await r(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:t}}},29038:function(e,t,r){const o={0:({topics:e,timeout:t})=>{const o=r(44255),n=r(88534);return{request:o({topics:e,timeout:t}),response:n}},1:({topics:e,timeout:t})=>{const o=r(57827),n=r(27530);return{request:o({topics:e,timeout:t}),response:n}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},44255:function(e,t,r){const o=r(28783),{DeleteTopics:n}=r(99211);e.exports=({topics:e,timeout:t=5e3})=>({apiKey:n,apiVersion:0,apiName:"DeleteTopics",encode:async()=>(new o).writeArray(e).writeInt32(t)})},88534:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=(e,t)=>e.topic.localeCompare(t.topic),a=e=>({topic:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>({topicErrors:new o(e).readArray(a).sort(i)}),parse:async e=>{const t=e.topicErrors.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);return e}}},57827:function(e,t,r){const o=r(44255);e.exports=({topics:e,timeout:t})=>Object.assign(o({topics:e,timeout:t}),{apiVersion:1})},27530:function(e,t,r){const o=r(56341),{parse:n}=r(88534),s=(e,t)=>e.topic.localeCompare(t.topic),i=e=>({topic:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:0,clientSideThrottleTime:t.readInt32(),topicErrors:t.readArray(i).sort(s)}},parse:n}},45665:function(e,t,r){const o={0:({resourceType:e,resourceName:t,principal:o,host:n,operation:s,permissionType:i})=>{const a=r(81106),c=r(22590);return{request:a({resourceType:e,resourceName:t,principal:o,host:n,operation:s,permissionType:i}),response:c}},1:({resourceType:e,resourceName:t,resourcePatternType:o,principal:n,host:s,operation:i,permissionType:a})=>{const c=r(7696),u=r(47952);return{request:c({resourceType:e,resourceName:t,resourcePatternType:o,principal:n,host:s,operation:i,permissionType:a}),response:u}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},81106:function(e,t,r){const o=r(28783),{DescribeAcls:n}=r(99211);e.exports=({resourceType:e,resourceName:t,principal:r,host:s,operation:i,permissionType:a})=>({apiKey:n,apiVersion:0,apiName:"DescribeAcls",encode:async()=>(new o).writeInt8(e).writeString(t).writeString(r).writeString(s).writeInt8(i).writeInt8(a)})},22590:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({principal:e.readString(),host:e.readString(),operation:e.readInt8(),permissionType:e.readInt8()}),a=e=>({resourceType:e.readInt8(),resourceName:e.readString(),acls:e.readArray(i)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),errorCode:t.readInt16(),errorMessage:t.readString(),resources:t.readArray(a)}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},7696:function(e,t,r){const o=r(28783),{DescribeAcls:n}=r(99211);e.exports=({resourceType:e,resourceName:t,resourcePatternType:r,principal:s,host:i,operation:a,permissionType:c})=>({apiKey:n,apiVersion:1,apiName:"DescribeAcls",encode:async()=>(new o).writeInt8(e).writeString(t).writeInt8(r).writeString(s).writeString(i).writeInt8(a).writeInt8(c)})},47952:function(e,t,r){const{parse:o}=r(22590),n=r(56341),s=e=>({principal:e.readString(),host:e.readString(),operation:e.readInt8(),permissionType:e.readInt8()}),i=e=>({resourceType:e.readInt8(),resourceName:e.readString(),resourcePatternType:e.readInt8(),acls:e.readArray(s)});e.exports={decode:async e=>{const t=new n(e);return{throttleTime:0,clientSideThrottleTime:t.readInt32(),errorCode:t.readInt16(),errorMessage:t.readString(),resources:t.readArray(i)}},parse:o}},26450:function(e,t,r){const o={0:({resources:e})=>{const t=r(77511),o=r(73707);return{request:t({resources:e}),response:o}},1:({resources:e,includeSynonyms:t})=>{const o=r(94017),n=r(71636);return{request:o({resources:e,includeSynonyms:t}),response:n}},2:({resources:e,includeSynonyms:t})=>{const o=r(60942),n=r(84410);return{request:o({resources:e,includeSynonyms:t}),response:n}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},77511:function(e,t,r){const o=r(28783),{DescribeConfigs:n}=r(99211);e.exports=({resources:e})=>({apiKey:n,apiVersion:0,apiName:"DescribeConfigs",encode:async()=>(new o).writeArray(e.map(s))});const s=({type:e,name:t,configNames:r=[]})=>(new o).writeInt8(e).writeString(t).writeNullableArray(r)},73707:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(9955),a=r(18279),c=e=>{const t=e.readInt16(),r=e.readString(),o=e.readInt8(),n=e.readString(),s=e.readArray((e=>((e,t)=>{const r=e.readString(),o=e.readString(),n=e.readBoolean(),s=e.readBoolean(),c=e.readBoolean();let u;if(s)u=i.DEFAULT_CONFIG;else switch(t){case a.BROKER:u=i.STATIC_BROKER_CONFIG;break;case a.TOPIC:u=i.TOPIC_CONFIG;break;default:u=i.UNKNOWN}return{configName:r,configValue:o,readOnly:n,isDefault:s,configSource:u,isSensitive:c}})(e,o)));return{errorCode:t,errorMessage:r,resourceType:o,resourceName:n,configEntries:s}};e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),resources:t.readArray(c)}},parse:async e=>{const t=e.resources.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);return e}}},94017:function(e,t,r){const o=r(28783),{DescribeConfigs:n}=r(99211);e.exports=({resources:e,includeSynonyms:t=!1})=>({apiKey:n,apiVersion:1,apiName:"DescribeConfigs",encode:async()=>(new o).writeArray(e.map(s)).writeBoolean(t)});const s=({type:e,name:t,configNames:r=[]})=>(new o).writeInt8(e).writeString(t).writeNullableArray(r)},71636:function(e,t,r){const o=r(56341),{parse:n}=r(73707),{DEFAULT_CONFIG:s}=r(9955),i=e=>({configName:e.readString(),configValue:e.readString(),configSource:e.readInt8()}),a=e=>{const t=e.readString(),r=e.readString(),o=e.readBoolean(),n=e.readInt8(),a=e.readBoolean(),c=e.readArray(i);return{configName:t,configValue:r,readOnly:o,isDefault:n===s,configSource:n,isSensitive:a,configSynonyms:c}},c=e=>({errorCode:e.readInt16(),errorMessage:e.readString(),resourceType:e.readInt8(),resourceName:e.readString(),configEntries:e.readArray(a)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),resources:t.readArray(c)}},parse:n}},60942:function(e,t,r){const o=r(94017);e.exports=({resources:e,includeSynonyms:t})=>Object.assign(o({resources:e,includeSynonyms:t}),{apiVersion:2})},84410:function(e,t,r){const{parse:o,decode:n}=r(71636);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},57927:function(e,t,r){const o={0:({groupIds:e})=>{const t=r(42228),o=r(53251);return{request:t({groupIds:e}),response:o}},1:({groupIds:e})=>{const t=r(86106),o=r(84332);return{request:t({groupIds:e}),response:o}},2:({groupIds:e})=>{const t=r(94106),o=r(85902);return{request:t({groupIds:e}),response:o}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},42228:function(e,t,r){const o=r(28783),{DescribeGroups:n}=r(99211);e.exports=({groupIds:e})=>({apiKey:n,apiVersion:0,apiName:"DescribeGroups",encode:async()=>(new o).writeArray(e)})},53251:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({memberId:e.readString(),clientId:e.readString(),clientHost:e.readString(),memberMetadata:e.readBytes(),memberAssignment:e.readBytes()}),a=e=>({errorCode:e.readInt16(),groupId:e.readString(),state:e.readString(),protocolType:e.readString(),protocol:e.readString(),members:e.readArray(i)});e.exports={decode:async e=>({groups:new o(e).readArray(a)}),parse:async e=>{const t=e.groups.filter((({errorCode:e})=>n(e)));if(t.length>0)throw s(t[0].errorCode);return e}}},86106:function(e,t,r){const o=r(42228);e.exports=({groupIds:e})=>Object.assign(o({groupIds:e}),{apiVersion:1})},84332:function(e,t,r){const o=r(56341),{parse:n}=r(53251),s=e=>({memberId:e.readString(),clientId:e.readString(),clientHost:e.readString(),memberMetadata:e.readBytes(),memberAssignment:e.readBytes()}),i=e=>({errorCode:e.readInt16(),groupId:e.readString(),state:e.readString(),protocolType:e.readString(),protocol:e.readString(),members:e.readArray(s)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),groups:t.readArray(i)}},parse:n}},94106:function(e,t,r){const o=r(86106);e.exports=({groupIds:e})=>Object.assign(o({groupIds:e}),{apiVersion:2})},85902:function(e,t,r){const{parse:o,decode:n}=r(84332);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},32059:function(e,t,r){const o={0:({transactionalId:e,producerId:t,producerEpoch:o,transactionResult:n})=>{const s=r(87446),i=r(1707);return{request:s({transactionalId:e,producerId:t,producerEpoch:o,transactionResult:n}),response:i}},1:({transactionalId:e,producerId:t,producerEpoch:o,transactionResult:n})=>{const s=r(25306),i=r(54786);return{request:s({transactionalId:e,producerId:t,producerEpoch:o,transactionResult:n}),response:i}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},87446:function(e,t,r){const o=r(28783),{EndTxn:n}=r(99211);e.exports=({transactionalId:e,producerId:t,producerEpoch:r,transactionResult:s})=>({apiKey:n,apiVersion:0,apiName:"EndTxn",encode:async()=>(new o).writeString(e).writeInt64(t).writeInt16(r).writeBoolean(s)})},1707:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),n=t.readInt16();return i(n),{throttleTime:r,errorCode:n}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},25306:function(e,t,r){const o=r(87446);e.exports=({transactionalId:e,producerId:t,producerEpoch:r,transactionResult:n})=>Object.assign(o({transactionalId:e,producerId:t,producerEpoch:r,transactionResult:n}),{apiVersion:1})},54786:function(e,t,r){const{parse:o,decode:n}=r(1707);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},98681:function(e,t,r){const o=r(52845),n=e=>Number.isSafeInteger(e+100)?e+100:e,s={0:({replicaId:e=-1,maxWaitTime:t,minBytes:o,topics:s})=>{const i=r(12818),a=r(43583);return{request:i({replicaId:e,maxWaitTime:t,minBytes:o,topics:s}),response:a,requestTimeout:n(t)}},1:({replicaId:e=-1,maxWaitTime:t,minBytes:o,topics:s})=>{const i=r(48087),a=r(2155);return{request:i({replicaId:e,maxWaitTime:t,minBytes:o,topics:s}),response:a,requestTimeout:n(t)}},2:({replicaId:e=-1,maxWaitTime:t,minBytes:o,topics:s})=>{const i=r(62045),a=r(7628);return{request:i({replicaId:e,maxWaitTime:t,minBytes:o,topics:s}),response:a,requestTimeout:n(t)}},3:({replicaId:e=-1,maxWaitTime:t,minBytes:o,maxBytes:s,topics:i})=>{const a=r(84704),c=r(11828);return{request:a({replicaId:e,maxWaitTime:t,minBytes:o,maxBytes:s,topics:i}),response:c,requestTimeout:n(t)}},4:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,maxWaitTime:s,minBytes:i,maxBytes:a,topics:c})=>{const u=r(97737),d=r(76668);return{request:u({replicaId:e,isolationLevel:t,maxWaitTime:s,minBytes:i,maxBytes:a,topics:c}),response:d,requestTimeout:n(s)}},5:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,maxWaitTime:s,minBytes:i,maxBytes:a,topics:c})=>{const u=r(52881),d=r(19214);return{request:u({replicaId:e,isolationLevel:t,maxWaitTime:s,minBytes:i,maxBytes:a,topics:c}),response:d,requestTimeout:n(s)}},6:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,maxWaitTime:s,minBytes:i,maxBytes:a,topics:c})=>{const u=r(4939),d=r(35646);return{request:u({replicaId:e,isolationLevel:t,maxWaitTime:s,minBytes:i,maxBytes:a,topics:c}),response:d,requestTimeout:n(s)}},7:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,sessionId:s=0,sessionEpoch:i=-1,forgottenTopics:a=[],maxWaitTime:c,minBytes:u,maxBytes:d,topics:p})=>{const l=r(73431),h=r(33456);return{request:l({replicaId:e,isolationLevel:t,sessionId:s,sessionEpoch:i,forgottenTopics:a,maxWaitTime:c,minBytes:u,maxBytes:d,topics:p}),response:h,requestTimeout:n(c)}},8:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,sessionId:s=0,sessionEpoch:i=-1,forgottenTopics:a=[],maxWaitTime:c,minBytes:u,maxBytes:d,topics:p})=>{const l=r(54427),h=r(47004);return{request:l({replicaId:e,isolationLevel:t,sessionId:s,sessionEpoch:i,forgottenTopics:a,maxWaitTime:c,minBytes:u,maxBytes:d,topics:p}),response:h,requestTimeout:n(c)}},9:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,sessionId:s=0,sessionEpoch:i=-1,forgottenTopics:a=[],maxWaitTime:c,minBytes:u,maxBytes:d,topics:p})=>{const l=r(17988),h=r(39272);return{request:l({replicaId:e,isolationLevel:t,sessionId:s,sessionEpoch:i,forgottenTopics:a,maxWaitTime:c,minBytes:u,maxBytes:d,topics:p}),response:h,requestTimeout:n(c)}},10:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,sessionId:s=0,sessionEpoch:i=-1,forgottenTopics:a=[],maxWaitTime:c,minBytes:u,maxBytes:d,topics:p})=>{const l=r(3504),h=r(53882);return{request:l({replicaId:e,isolationLevel:t,sessionId:s,sessionEpoch:i,forgottenTopics:a,maxWaitTime:c,minBytes:u,maxBytes:d,topics:p}),response:h,requestTimeout:n(c)}},11:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,sessionId:s=0,sessionEpoch:i=-1,forgottenTopics:a=[],maxWaitTime:c,minBytes:u,maxBytes:d,topics:p,rackId:l})=>{const h=r(51592),f=r(98405);return{request:h({replicaId:e,isolationLevel:t,sessionId:s,sessionEpoch:i,forgottenTopics:a,maxWaitTime:c,minBytes:u,maxBytes:d,topics:p,rackId:l}),response:f,requestTimeout:n(c)}}};e.exports={versions:Object.keys(s),protocol:({version:e})=>s[e]}},12818:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,topics:i})=>({apiKey:n,apiVersion:0,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeArray(i.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,fetchOffset:t,maxBytes:r})=>(new o).writeInt32(e).writeInt64(t).writeInt32(r)},43583:function(e,t,r){const o=r(56341),{KafkaJSOffsetOutOfRange:n}=r(29879),{failure:s,createErrorFromCode:i,errorCodes:a}=r(21701),c=r(74358),u=r(44321),d=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),messages:await u(e)}),p=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(d)}),{code:l}=a.find((e=>"OFFSET_OUT_OF_RANGE"===e.type));e.exports={decode:async e=>{const t=new o(e);return{responses:await t.readArrayAsync(p)}},parse:async e=>{const t=e.responses.map((({topicName:e,partitions:t})=>t.filter((e=>s(e.errorCode))).map((t=>Object.assign({},t,{topic:e}))))),r=c(t);if(r.length>0){const{errorCode:e,topic:t,partition:o}=r[0];if(e===l)throw new n(i(e),{topic:t,partition:o});throw i(e)}return e}}},48087:function(e,t,r){const o=r(12818);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,topics:n})=>Object.assign(o({replicaId:e,maxWaitTime:t,minBytes:r,topics:n}),{apiVersion:1})},2155:function(e,t,r){const o=r(56341),{parse:n}=r(43583),s=r(44321),i=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),messages:await s(e)}),a=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(i)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),responses:await t.readArrayAsync(a)}},parse:n}},3504:function(e,t,r){const o=r(52845),n=r(17988);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:s,topics:i,isolationLevel:a=o.READ_COMMITTED,sessionId:c=0,sessionEpoch:u=-1,forgottenTopics:d=[]})=>Object.assign(n({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:s,topics:i,isolationLevel:a,sessionId:c,sessionEpoch:u,forgottenTopics:d}),{apiVersion:10})},53882:function(e,t,r){const{decode:o,parse:n}=r(39272);e.exports={decode:o,parse:n}},51592:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211),s=r(52845);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:c,topics:u,rackId:d="",isolationLevel:p=s.READ_COMMITTED,sessionId:l=0,sessionEpoch:h=-1,forgottenTopics:f=[]})=>({apiKey:n,apiVersion:11,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeInt32(c).writeInt8(p).writeInt32(l).writeInt32(h).writeArray(u.map(a)).writeArray(f.map(i)).writeString(d)});const i=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t),a=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(c)),c=({partition:e,currentLeaderEpoch:t=-1,fetchOffset:r,logStartOffset:n=-1,maxBytes:s})=>(new o).writeInt32(e).writeInt32(t).writeInt64(r).writeInt64(n).writeInt32(s)},98405:function(e,t,r){const o=r(56341),{parse:n}=r(2155),s=r(45643),i=e=>({producerId:e.readInt64().toString(),firstOffset:e.readInt64().toString()}),a=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),lastStableOffset:e.readInt64().toString(),lastStartOffset:e.readInt64().toString(),abortedTransactions:e.readArray(i),preferredReadReplica:e.readInt32(),messages:await s(e)}),c=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(a)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:0,clientSideThrottleTime:t.readInt32(),errorCode:t.readInt16(),sessionId:t.readInt32(),responses:await t.readArrayAsync(c)}},parse:n}},62045:function(e,t,r){const o=r(12818);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,topics:n})=>Object.assign(o({replicaId:e,maxWaitTime:t,minBytes:r,topics:n}),{apiVersion:2})},7628:function(e,t,r){const{decode:o,parse:n}=r(2155);e.exports={decode:o,parse:n}},84704:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:i,topics:a})=>({apiKey:n,apiVersion:3,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeInt32(i).writeArray(a.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,fetchOffset:t,maxBytes:r})=>(new o).writeInt32(e).writeInt64(t).writeInt32(r)},11828:function(e,t,r){const{decode:o,parse:n}=r(2155);e.exports={decode:o,parse:n}},45643:function(e,t,r){const o=r(56341),n=r(44321),s=r(43294),{MAGIC_BYTE:i}=r(72872);e.exports=async e=>{const t=e.readInt32();if(t<=0||!e.canReadBytes(t))return[];const r=e.readBytes(t),a=new o(r);if(r.slice(16).readInt8(0)===i){const e=[];for(;a.canReadBytes(49);)try{const t=await s(a);e.push(...t.records)}catch(e){if("KafkaJSPartialMessageError"===e.name)break;throw e}return e}return n(a,t)}},97737:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211),s=r(52845);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:a,topics:c,isolationLevel:u=s.READ_COMMITTED})=>({apiKey:n,apiVersion:4,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeInt32(a).writeInt8(u).writeArray(c.map(i))});const i=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(a)),a=({partition:e,fetchOffset:t,maxBytes:r})=>(new o).writeInt32(e).writeInt64(t).writeInt32(r)},76668:function(e,t,r){const o=r(56341),{parse:n}=r(2155),s=r(45643),i=e=>({producerId:e.readInt64().toString(),firstOffset:e.readInt64().toString()}),a=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),lastStableOffset:e.readInt64().toString(),abortedTransactions:e.readArray(i),messages:await s(e)}),c=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(a)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),responses:await t.readArrayAsync(c)}},parse:n}},52881:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211),s=r(52845);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:a,topics:c,isolationLevel:u=s.READ_COMMITTED})=>({apiKey:n,apiVersion:5,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeInt32(a).writeInt8(u).writeArray(c.map(i))});const i=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(a)),a=({partition:e,fetchOffset:t,logStartOffset:r=-1,maxBytes:n})=>(new o).writeInt32(e).writeInt64(t).writeInt64(r).writeInt32(n)},19214:function(e,t,r){const o=r(56341),{parse:n}=r(2155),s=r(45643),i=e=>({producerId:e.readInt64().toString(),firstOffset:e.readInt64().toString()}),a=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),lastStableOffset:e.readInt64().toString(),lastStartOffset:e.readInt64().toString(),abortedTransactions:e.readArray(i),messages:await s(e)}),c=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(a)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),responses:await t.readArrayAsync(c)}},parse:n}},4939:function(e,t,r){const o=r(52845),n=r(52881);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:s,topics:i,isolationLevel:a=o.READ_COMMITTED})=>Object.assign(n({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:s,topics:i,isolationLevel:a}),{apiVersion:6})},35646:function(e,t,r){const{decode:o,parse:n}=r(19214);e.exports={decode:o,parse:n}},73431:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211),s=r(52845);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:c,topics:u,isolationLevel:d=s.READ_COMMITTED,sessionId:p=0,sessionEpoch:l=-1,forgottenTopics:h=[]})=>({apiKey:n,apiVersion:7,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeInt32(c).writeInt8(d).writeInt32(p).writeInt32(l).writeArray(u.map(a)).writeArray(h.map(i))});const i=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t),a=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(c)),c=({partition:e,fetchOffset:t,logStartOffset:r=-1,maxBytes:n})=>(new o).writeInt32(e).writeInt64(t).writeInt64(r).writeInt32(n)},33456:function(e,t,r){const o=r(56341),{parse:n}=r(2155),s=r(45643),i=e=>({producerId:e.readInt64().toString(),firstOffset:e.readInt64().toString()}),a=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),lastStableOffset:e.readInt64().toString(),lastStartOffset:e.readInt64().toString(),abortedTransactions:e.readArray(i),messages:await s(e)}),c=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(a)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),errorCode:t.readInt16(),sessionId:t.readInt32(),responses:await t.readArrayAsync(c)}},parse:n}},54427:function(e,t,r){const o=r(52845),n=r(73431);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:s,topics:i,isolationLevel:a=o.READ_COMMITTED,sessionId:c=0,sessionEpoch:u=-1,forgottenTopics:d=[]})=>Object.assign(n({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:s,topics:i,isolationLevel:a,sessionId:c,sessionEpoch:u,forgottenTopics:d}),{apiVersion:8})},47004:function(e,t,r){const o=r(56341),{parse:n}=r(2155),s=r(45643),i=e=>({producerId:e.readInt64().toString(),firstOffset:e.readInt64().toString()}),a=async e=>({partition:e.readInt32(),errorCode:e.readInt16(),highWatermark:e.readInt64().toString(),lastStableOffset:e.readInt64().toString(),lastStartOffset:e.readInt64().toString(),abortedTransactions:e.readArray(i),messages:await s(e)}),c=async e=>({topicName:e.readString(),partitions:await e.readArrayAsync(a)});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:0,clientSideThrottleTime:t.readInt32(),errorCode:t.readInt16(),sessionId:t.readInt32(),responses:await t.readArrayAsync(c)}},parse:n}},17988:function(e,t,r){const o=r(28783),{Fetch:n}=r(99211),s=r(52845);e.exports=({replicaId:e,maxWaitTime:t,minBytes:r,maxBytes:c,topics:u,isolationLevel:d=s.READ_COMMITTED,sessionId:p=0,sessionEpoch:l=-1,forgottenTopics:h=[]})=>({apiKey:n,apiVersion:9,apiName:"Fetch",encode:async()=>(new o).writeInt32(e).writeInt32(t).writeInt32(r).writeInt32(c).writeInt8(d).writeInt32(p).writeInt32(l).writeArray(u.map(a)).writeArray(h.map(i))});const i=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t),a=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(c)),c=({partition:e,currentLeaderEpoch:t=-1,fetchOffset:r,logStartOffset:n=-1,maxBytes:s})=>(new o).writeInt32(e).writeInt32(t).writeInt64(r).writeInt64(n).writeInt32(s)},39272:function(e,t,r){const{decode:o,parse:n}=r(47004);e.exports={decode:o,parse:n}},30163:function(e,t,r){const o=r(7022),n={0:({groupId:e})=>{const t=r(66592),o=r(33419);return{request:t({groupId:e}),response:o}},1:({groupId:e,coordinatorType:t=o.GROUP})=>{const n=r(27664),s=r(87451);return{request:n({coordinatorKey:e,coordinatorType:t}),response:s}},2:({groupId:e,coordinatorType:t=o.GROUP})=>{const n=r(99050),s=r(18179);return{request:n({coordinatorKey:e,coordinatorType:t}),response:s}}};e.exports={versions:Object.keys(n),protocol:({version:e})=>n[e]}},66592:function(e,t,r){const o=r(28783),{GroupCoordinator:n}=r(99211);e.exports=({groupId:e})=>({apiKey:n,apiVersion:0,apiName:"GroupCoordinator",encode:async()=>(new o).writeString(e)})},33419:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return i(r),{errorCode:r,coordinator:{nodeId:t.readInt32(),host:t.readString(),port:t.readInt32()}}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},27664:function(e,t,r){const o=r(28783),{GroupCoordinator:n}=r(99211);e.exports=({coordinatorKey:e,coordinatorType:t})=>({apiKey:n,apiVersion:1,apiName:"GroupCoordinator",encode:async()=>(new o).writeString(e).writeInt8(t)})},87451:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),n=t.readInt16();return i(n),{throttleTime:r,errorCode:n,errorMessage:t.readString(),coordinator:{nodeId:t.readInt32(),host:t.readString(),port:t.readInt32()}}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},99050:function(e,t,r){const o=r(27664);e.exports=({coordinatorKey:e,coordinatorType:t})=>Object.assign(o({coordinatorKey:e,coordinatorType:t}),{apiVersion:2})},18179:function(e,t,r){const{parse:o,decode:n}=r(87451);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},46641:function(e,t,r){const o={0:({groupId:e,groupGenerationId:t,memberId:o})=>{const n=r(87533),s=r(94732);return{request:n({groupId:e,groupGenerationId:t,memberId:o}),response:s}},1:({groupId:e,groupGenerationId:t,memberId:o})=>{const n=r(57694),s=r(41199);return{request:n({groupId:e,groupGenerationId:t,memberId:o}),response:s}},2:({groupId:e,groupGenerationId:t,memberId:o})=>{const n=r(40686),s=r(42394);return{request:n({groupId:e,groupGenerationId:t,memberId:o}),response:s}},3:({groupId:e,groupGenerationId:t,memberId:o,groupInstanceId:n})=>{const s=r(10034),i=r(41194);return{request:s({groupId:e,groupGenerationId:t,memberId:o,groupInstanceId:n}),response:i}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},87533:function(e,t,r){const o=r(28783),{Heartbeat:n}=r(99211);e.exports=({groupId:e,groupGenerationId:t,memberId:r})=>({apiKey:n,apiVersion:0,apiName:"Heartbeat",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r)})},94732:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e).readInt16();return i(t),{errorCode:t}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},57694:function(e,t,r){const o=r(87533);e.exports=({groupId:e,groupGenerationId:t,memberId:r})=>Object.assign(o({groupId:e,groupGenerationId:t,memberId:r}),{apiVersion:1})},41199:function(e,t,r){const o=r(56341),{failIfVersionNotSupported:n}=r(21701),{parse:s}=r(94732);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),s=t.readInt16();return n(s),{throttleTime:r,errorCode:s}},parse:s}},40686:function(e,t,r){const o=r(57694);e.exports=({groupId:e,groupGenerationId:t,memberId:r})=>Object.assign(o({groupId:e,groupGenerationId:t,memberId:r}),{apiVersion:2})},42394:function(e,t,r){const{parse:o,decode:n}=r(41199);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},10034:function(e,t,r){const o=r(28783),{Heartbeat:n}=r(99211);e.exports=({groupId:e,groupGenerationId:t,memberId:r,groupInstanceId:s})=>({apiKey:n,apiVersion:3,apiName:"Heartbeat",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeString(s)})},41194:function(e,t,r){const{parse:o,decode:n}=r(42394);e.exports={decode:n,parse:o}},63146:function(e,t,r){const o=r(99211),{KafkaJSServerDoesNotSupportApiKey:n,KafkaJSNotImplemented:s}=r(29879),i={versions:[],protocol:()=>{throw new s}},a={Produce:r(67609),Fetch:r(98681),ListOffsets:r(20364),Metadata:r(41747),LeaderAndIsr:i,StopReplica:i,UpdateMetadata:i,ControlledShutdown:i,OffsetCommit:r(17789),OffsetFetch:r(21761),GroupCoordinator:r(30163),JoinGroup:r(60583),Heartbeat:r(46641),LeaveGroup:r(83083),SyncGroup:r(86096),DescribeGroups:r(57927),ListGroups:r(68119),SaslHandshake:r(26184),ApiVersions:r(67020),CreateTopics:r(42346),DeleteTopics:r(29038),DeleteRecords:r(28035),InitProducerId:r(36961),OffsetForLeaderEpoch:i,AddPartitionsToTxn:r(73350),AddOffsetsToTxn:r(4530),EndTxn:r(32059),WriteTxnMarkers:i,TxnOffsetCommit:r(35302),DescribeAcls:r(45665),CreateAcls:r(64950),DeleteAcls:r(11491),DescribeConfigs:r(26450),AlterConfigs:r(31858),AlterReplicaLogDirs:i,DescribeLogDirs:i,SaslAuthenticate:r(10886),CreatePartitions:r(14842),CreateDelegationToken:i,RenewDelegationToken:i,ExpireDelegationToken:i,DescribeDelegationToken:i,DeleteGroups:r(62086)},c=Object.keys(o),u=Object.values(o),d=e=>c[u.indexOf(e)];e.exports={requests:a,lookup:e=>(t,r)=>{const o=e[t],s=r.versions.map(Number),i=Math.max(...s);if(!o||null==o.maxVersion)throw new n("The Kafka server does not support the requested API version",{apiKey:t,apiName:d(t)});const a=Math.min(i,o.maxVersion);return r.protocol({version:a})}}},36961:function(e,t,r){const o={0:({transactionalId:e,transactionTimeout:t=5e3})=>{const o=r(76862),n=r(57280);return{request:o({transactionalId:e,transactionTimeout:t}),response:n}},1:({transactionalId:e,transactionTimeout:t=5e3})=>{const o=r(75427),n=r(32826);return{request:o({transactionalId:e,transactionTimeout:t}),response:n}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},76862:function(e,t,r){const o=r(28783),{InitProducerId:n}=r(99211);e.exports=({transactionalId:e,transactionTimeout:t})=>({apiKey:n,apiVersion:0,apiName:"InitProducerId",encode:async()=>(new o).writeString(e).writeInt32(t)})},57280:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),n=t.readInt16();return i(n),{throttleTime:r,errorCode:n,producerId:t.readInt64().toString(),producerEpoch:t.readInt16()}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},75427:function(e,t,r){const o=r(76862);e.exports=({transactionalId:e,transactionTimeout:t})=>Object.assign(o({transactionalId:e,transactionTimeout:t}),{apiVersion:1})},32826:function(e,t,r){const{parse:o,decode:n}=r(57280);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},60583:function(e,t,r){const o=({rebalanceTimeout:e,sessionTimeout:t})=>{const r=e||t;return Number.isSafeInteger(r+5e3)?r+5e3:r},n=e=>null!=e&&""!==e,s={0:({groupId:e,sessionTimeout:t,memberId:n,protocolType:s,groupProtocols:i})=>{const a=r(99369),c=r(90259);return{request:a({groupId:e,sessionTimeout:t,memberId:n,protocolType:s,groupProtocols:i}),response:c,requestTimeout:o({rebalanceTimeout:null,sessionTimeout:t})}},1:({groupId:e,sessionTimeout:t,rebalanceTimeout:n,memberId:s,protocolType:i,groupProtocols:a})=>{const c=r(59369),u=r(59801);return{request:c({groupId:e,sessionTimeout:t,rebalanceTimeout:n,memberId:s,protocolType:i,groupProtocols:a}),response:u,requestTimeout:o({rebalanceTimeout:n,sessionTimeout:t})}},2:({groupId:e,sessionTimeout:t,rebalanceTimeout:n,memberId:s,protocolType:i,groupProtocols:a})=>{const c=r(36146),u=r(21989);return{request:c({groupId:e,sessionTimeout:t,rebalanceTimeout:n,memberId:s,protocolType:i,groupProtocols:a}),response:u,requestTimeout:o({rebalanceTimeout:n,sessionTimeout:t})}},3:({groupId:e,sessionTimeout:t,rebalanceTimeout:n,memberId:s,protocolType:i,groupProtocols:a})=>{const c=r(15318),u=r(69106);return{request:c({groupId:e,sessionTimeout:t,rebalanceTimeout:n,memberId:s,protocolType:i,groupProtocols:a}),response:u,requestTimeout:o({rebalanceTimeout:n,sessionTimeout:t})}},4:({groupId:e,sessionTimeout:t,rebalanceTimeout:s,memberId:i,protocolType:a,groupProtocols:c})=>{const u=r(85125),d=r(32285);return{request:u({groupId:e,sessionTimeout:t,rebalanceTimeout:s,memberId:i,protocolType:a,groupProtocols:c}),response:d,requestTimeout:o({rebalanceTimeout:s,sessionTimeout:t}),logResponseError:n(i)}},5:({groupId:e,sessionTimeout:t,rebalanceTimeout:s,memberId:i,groupInstanceId:a,protocolType:c,groupProtocols:u})=>{const d=r(24454),p=r(36845);return{request:d({groupId:e,sessionTimeout:t,rebalanceTimeout:s,memberId:i,groupInstanceId:a,protocolType:c,groupProtocols:u}),response:p,requestTimeout:o({rebalanceTimeout:s,sessionTimeout:t}),logResponseError:n(i)}}};e.exports={versions:Object.keys(s),protocol:({version:e})=>s[e]}},99369:function(e,t,r){const o=r(28783),{JoinGroup:n}=r(99211);e.exports=({groupId:e,sessionTimeout:t,memberId:r,protocolType:i,groupProtocols:a})=>({apiKey:n,apiVersion:0,apiName:"JoinGroup",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeString(i).writeArray(a.map(s))});const s=({name:e,metadata:t=Buffer.alloc(0)})=>(new o).writeString(e).writeBytes(t)},90259:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return i(r),{errorCode:r,generationId:t.readInt32(),groupProtocol:t.readString(),leaderId:t.readString(),memberId:t.readString(),members:t.readArray((e=>({memberId:e.readString(),memberMetadata:e.readBytes()})))}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},59369:function(e,t,r){const o=r(28783),{JoinGroup:n}=r(99211);e.exports=({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:i,protocolType:a,groupProtocols:c})=>({apiKey:n,apiVersion:1,apiName:"JoinGroup",encode:async()=>(new o).writeString(e).writeInt32(t).writeInt32(r).writeString(i).writeString(a).writeArray(c.map(s))});const s=({name:e,metadata:t=Buffer.alloc(0)})=>(new o).writeString(e).writeBytes(t)},59801:function(e,t,r){const{parse:o,decode:n}=r(90259);e.exports={decode:n,parse:o}},36146:function(e,t,r){const o=r(59369);e.exports=({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:n,protocolType:s,groupProtocols:i})=>Object.assign(o({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:n,protocolType:s,groupProtocols:i}),{apiVersion:2})},21989:function(e,t,r){const o=r(56341),{failIfVersionNotSupported:n}=r(21701),{parse:s}=r(90259);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),s=t.readInt16();return n(s),{throttleTime:r,errorCode:s,generationId:t.readInt32(),groupProtocol:t.readString(),leaderId:t.readString(),memberId:t.readString(),members:t.readArray((e=>({memberId:e.readString(),memberMetadata:e.readBytes()})))}},parse:s}},15318:function(e,t,r){const o=r(36146);e.exports=({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:n,protocolType:s,groupProtocols:i})=>Object.assign(o({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:n,protocolType:s,groupProtocols:i}),{apiVersion:3})},69106:function(e,t,r){const{parse:o,decode:n}=r(21989);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},85125:function(e,t,r){const o=r(15318);e.exports=({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:n,protocolType:s,groupProtocols:i})=>Object.assign(o({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:n,protocolType:s,groupProtocols:i}),{apiVersion:4})},32285:function(e,t,r){const{decode:o}=r(69106),{KafkaJSMemberIdRequired:n}=r(29879),{failure:s,createErrorFromCode:i,errorCodes:a}=r(21701),{code:c}=a.find((e=>"MEMBER_ID_REQUIRED"===e.type));e.exports={decode:o,parse:async e=>{if(s(e.errorCode)){if(e.errorCode===c)throw new n(i(e.errorCode),{memberId:e.memberId});throw i(e.errorCode)}return e}}},24454:function(e,t,r){const o=r(28783),{JoinGroup:n}=r(99211);e.exports=({groupId:e,sessionTimeout:t,rebalanceTimeout:r,memberId:i,groupInstanceId:a=null,protocolType:c,groupProtocols:u})=>({apiKey:n,apiVersion:5,apiName:"JoinGroup",encode:async()=>(new o).writeString(e).writeInt32(t).writeInt32(r).writeString(i).writeString(a).writeString(c).writeArray(u.map(s))});const s=({name:e,metadata:t=Buffer.alloc(0)})=>(new o).writeString(e).writeBytes(t)},36845:function(e,t,r){const o=r(56341),{KafkaJSMemberIdRequired:n}=r(29879),{failure:s,createErrorFromCode:i,errorCodes:a,failIfVersionNotSupported:c}=r(21701),{code:u}=a.find((e=>"MEMBER_ID_REQUIRED"===e.type));e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),n=t.readInt16();return c(n),{throttleTime:0,clientSideThrottleTime:r,errorCode:n,generationId:t.readInt32(),groupProtocol:t.readString(),leaderId:t.readString(),memberId:t.readString(),members:t.readArray((e=>({memberId:e.readString(),groupInstanceId:e.readString(),memberMetadata:e.readBytes()})))}},parse:async e=>{if(s(e.errorCode)){if(e.errorCode===u)throw new n(i(e.errorCode),{memberId:e.memberId});throw i(e.errorCode)}return e}}},83083:function(e,t,r){const o={0:({groupId:e,memberId:t})=>{const o=r(26413),n=r(49376);return{request:o({groupId:e,memberId:t}),response:n}},1:({groupId:e,memberId:t})=>{const o=r(90885),n=r(80679);return{request:o({groupId:e,memberId:t}),response:n}},2:({groupId:e,memberId:t})=>{const o=r(25191),n=r(8235);return{request:o({groupId:e,memberId:t}),response:n}},3:({groupId:e,memberId:t,groupInstanceId:o})=>{const n=r(75680),s=r(51105);return{request:n({groupId:e,members:[{memberId:t,groupInstanceId:o}]}),response:s}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},26413:function(e,t,r){const o=r(28783),{LeaveGroup:n}=r(99211);e.exports=({groupId:e,memberId:t})=>({apiKey:n,apiVersion:0,apiName:"LeaveGroup",encode:async()=>(new o).writeString(e).writeString(t)})},49376:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e).readInt16();return i(t),{errorCode:t}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},90885:function(e,t,r){const o=r(26413);e.exports=({groupId:e,memberId:t})=>Object.assign(o({groupId:e,memberId:t}),{apiVersion:1})},80679:function(e,t,r){const o=r(56341),{failIfVersionNotSupported:n}=r(21701),{parse:s}=r(49376);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),s=t.readInt16();return n(s),{throttleTime:r,errorCode:s}},parse:s}},25191:function(e,t,r){const o=r(90885);e.exports=({groupId:e,memberId:t})=>Object.assign(o({groupId:e,memberId:t}),{apiVersion:2})},8235:function(e,t,r){const{parse:o,decode:n}=r(80679);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},75680:function(e,t,r){const o=r(28783),{LeaveGroup:n}=r(99211);e.exports=({groupId:e,members:t})=>({apiKey:n,apiVersion:3,apiName:"LeaveGroup",encode:async()=>(new o).writeString(e).writeArray(t.map((e=>s(e))))});const s=({memberId:e,groupInstanceId:t=null})=>(new o).writeString(e).writeString(t)},51105:function(e,t,r){const o=r(56341),{failIfVersionNotSupported:n,failure:s,createErrorFromCode:i}=r(21701),{parse:a}=r(8235),c=e=>({memberId:e.readString(),groupInstanceId:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),s=t.readInt16(),i=t.readArray(c);return n(s),{throttleTime:0,clientSideThrottleTime:r,errorCode:s,members:i}},parse:async e=>{const t=a(e),r=e.members.find((e=>s(e.errorCode)));if(r)throw i(r.errorCode);return t}}},68119:function(e,t,r){const o={0:()=>{const e=r(41660),t=r(41356);return{request:e(),response:t}},1:()=>{const e=r(50740),t=r(99644);return{request:e(),response:t}},2:()=>{const e=r(73058),t=r(17225);return{request:e(),response:t}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},41660:function(e,t,r){const o=r(28783),{ListGroups:n}=r(99211);e.exports=()=>({apiKey:n,apiVersion:0,apiName:"ListGroups",encode:async()=>new o})},41356:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=e=>({groupId:e.readString(),protocolType:e.readString()});e.exports={decodeGroup:i,decode:async e=>{const t=new o(e);return{errorCode:t.readInt16(),groups:t.readArray(i)}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},50740:function(e,t,r){const o=r(41660);e.exports=()=>Object.assign(o(),{apiVersion:1})},99644:function(e,t,r){const o=r(41356),n=r(56341);e.exports={decode:async e=>{const t=new n(e);return{throttleTime:t.readInt32(),errorCode:t.readInt16(),groups:t.readArray(o.decodeGroup)}},parse:o.parse}},73058:function(e,t,r){const o=r(50740);e.exports=()=>Object.assign(o(),{apiVersion:2})},17225:function(e,t,r){const{parse:o,decode:n}=r(99644);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},20364:function(e,t,r){const o=r(52845),n={0:({replicaId:e=-1,topics:t})=>{const o=r(20130),n=r(99440);return{request:o({replicaId:e,topics:t}),response:n}},1:({replicaId:e=-1,topics:t})=>{const o=r(11452),n=r(22922);return{request:o({replicaId:e,topics:t}),response:n}},2:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,topics:n})=>{const s=r(28246),i=r(30156);return{request:s({replicaId:e,isolationLevel:t,topics:n}),response:i}},3:({replicaId:e=-1,isolationLevel:t=o.READ_COMMITTED,topics:n})=>{const s=r(10330),i=r(32004);return{request:s({replicaId:e,isolationLevel:t,topics:n}),response:i}}};e.exports={versions:Object.keys(n),protocol:({version:e})=>n[e]}},20130:function(e,t,r){const o=r(28783),{ListOffsets:n}=r(99211);e.exports=({replicaId:e,topics:t})=>({apiKey:n,apiVersion:0,apiName:"ListOffsets",encode:async()=>(new o).writeInt32(e).writeArray(t.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,timestamp:t=-1,maxNumOffsets:r=1})=>(new o).writeInt32(e).writeInt64(t).writeInt32(r)},99440:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({topic:e.readString(),partitions:e.readArray(c)}),c=e=>({partition:e.readInt32(),errorCode:e.readInt16(),offsets:e.readArray(u)}),u=e=>e.readInt64().toString();e.exports={decode:async e=>({responses:new o(e).readArray(a)}),parse:async e=>{const t=e.responses.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t)[0];if(r)throw s(r.errorCode);return e}}},11452:function(e,t,r){const o=r(28783),{ListOffsets:n}=r(99211);e.exports=({replicaId:e,topics:t})=>({apiKey:n,apiVersion:1,apiName:"ListOffsets",encode:async()=>(new o).writeInt32(e).writeArray(t.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,timestamp:t=-1})=>(new o).writeInt32(e).writeInt64(t)},22922:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({topic:e.readString(),partitions:e.readArray(c)}),c=e=>({partition:e.readInt32(),errorCode:e.readInt16(),timestamp:e.readInt64().toString(),offset:e.readInt64().toString()});e.exports={decode:async e=>({responses:new o(e).readArray(a)}),parse:async e=>{const t=e.responses.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t)[0];if(r)throw s(r.errorCode);return e}}},28246:function(e,t,r){const o=r(28783),{ListOffsets:n}=r(99211);e.exports=({replicaId:e,isolationLevel:t,topics:r})=>({apiKey:n,apiVersion:2,apiName:"ListOffsets",encode:async()=>(new o).writeInt32(e).writeInt8(t).writeArray(r.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,timestamp:t=-1})=>(new o).writeInt32(e).writeInt64(t)},30156:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({topic:e.readString(),partitions:e.readArray(c)}),c=e=>({partition:e.readInt32(),errorCode:e.readInt16(),timestamp:e.readInt64().toString(),offset:e.readInt64().toString()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),responses:t.readArray(a)}},parse:async e=>{const t=e.responses.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t)[0];if(r)throw s(r.errorCode);return e}}},10330:function(e,t,r){const o=r(28246);e.exports=({replicaId:e,isolationLevel:t,topics:r})=>Object.assign(o({replicaId:e,isolationLevel:t,topics:r}),{apiVersion:3})},32004:function(e,t,r){const{parse:o,decode:n}=r(30156);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},41747:function(e,t,r){const o={0:({topics:e})=>{const t=r(88838),o=r(57995);return{request:t({topics:e}),response:o}},1:({topics:e})=>{const t=r(34063),o=r(48972);return{request:t({topics:e}),response:o}},2:({topics:e})=>{const t=r(89853),o=r(83248);return{request:t({topics:e}),response:o}},3:({topics:e})=>{const t=r(36067),o=r(60626);return{request:t({topics:e}),response:o}},4:({topics:e,allowAutoTopicCreation:t})=>{const o=r(40227),n=r(21901);return{request:o({topics:e,allowAutoTopicCreation:t}),response:n}},5:({topics:e,allowAutoTopicCreation:t})=>{const o=r(55620),n=r(2068);return{request:o({topics:e,allowAutoTopicCreation:t}),response:n}},6:({topics:e,allowAutoTopicCreation:t})=>{const o=r(64234),n=r(74771);return{request:o({topics:e,allowAutoTopicCreation:t}),response:n}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},88838:function(e,t,r){const o=r(28783),{Metadata:n}=r(99211);e.exports=({topics:e})=>({apiKey:n,apiVersion:0,apiName:"Metadata",encode:async()=>(new o).writeArray(e)})},57995:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({nodeId:e.readInt32(),host:e.readString(),port:e.readInt32()}),c=e=>({topicErrorCode:e.readInt16(),topic:e.readString(),partitionMetadata:e.readArray(u)}),u=e=>({partitionErrorCode:e.readInt16(),partitionId:e.readInt32(),leader:e.readInt32(),replicas:e.readArray((e=>e.readInt32())),isr:e.readArray((e=>e.readInt32()))});e.exports={decode:async e=>{const t=new o(e);return{brokers:t.readArray(a),topicMetadata:t.readArray(c)}},parse:async e=>{const t=e.topicMetadata.filter((e=>n(e.topicErrorCode)));if(t.length>0){const{topicErrorCode:e}=t[0];throw s(e)}const r=e.topicMetadata.map((e=>e.partitionMetadata.filter((e=>n(e.partitionErrorCode))))),o=i(r);if(o.length>0){const{partitionErrorCode:e}=o[0];throw s(e)}return e}}},34063:function(e,t,r){const o=r(28783),{Metadata:n}=r(99211);e.exports=({topics:e})=>({apiKey:n,apiVersion:1,apiName:"Metadata",encode:async()=>(new o).writeNullableArray(e)})},48972:function(e,t,r){const o=r(56341),{parse:n}=r(57995),s=e=>({nodeId:e.readInt32(),host:e.readString(),port:e.readInt32(),rack:e.readString()}),i=e=>({topicErrorCode:e.readInt16(),topic:e.readString(),isInternal:e.readBoolean(),partitionMetadata:e.readArray(a)}),a=e=>({partitionErrorCode:e.readInt16(),partitionId:e.readInt32(),leader:e.readInt32(),replicas:e.readArray((e=>e.readInt32())),isr:e.readArray((e=>e.readInt32()))});e.exports={decode:async e=>{const t=new o(e);return{brokers:t.readArray(s),controllerId:t.readInt32(),topicMetadata:t.readArray(i)}},parse:n}},89853:function(e,t,r){const o=r(34063);e.exports=({topics:e})=>Object.assign(o({topics:e}),{apiVersion:2})},83248:function(e,t,r){const o=r(56341),{parse:n}=r(57995),s=e=>({nodeId:e.readInt32(),host:e.readString(),port:e.readInt32(),rack:e.readString()}),i=e=>({topicErrorCode:e.readInt16(),topic:e.readString(),isInternal:e.readBoolean(),partitionMetadata:e.readArray(a)}),a=e=>({partitionErrorCode:e.readInt16(),partitionId:e.readInt32(),leader:e.readInt32(),replicas:e.readArray((e=>e.readInt32())),isr:e.readArray((e=>e.readInt32()))});e.exports={decode:async e=>{const t=new o(e);return{brokers:t.readArray(s),clusterId:t.readString(),controllerId:t.readInt32(),topicMetadata:t.readArray(i)}},parse:n}},36067:function(e,t,r){const o=r(34063);e.exports=({topics:e})=>Object.assign(o({topics:e}),{apiVersion:3})},60626:function(e,t,r){const o=r(56341),{parse:n}=r(57995),s=e=>({nodeId:e.readInt32(),host:e.readString(),port:e.readInt32(),rack:e.readString()}),i=e=>({topicErrorCode:e.readInt16(),topic:e.readString(),isInternal:e.readBoolean(),partitionMetadata:e.readArray(a)}),a=e=>({partitionErrorCode:e.readInt16(),partitionId:e.readInt32(),leader:e.readInt32(),replicas:e.readArray((e=>e.readInt32())),isr:e.readArray((e=>e.readInt32()))});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),brokers:t.readArray(s),clusterId:t.readString(),controllerId:t.readInt32(),topicMetadata:t.readArray(i)}},parse:n}},40227:function(e,t,r){const o=r(28783),{Metadata:n}=r(99211);e.exports=({topics:e,allowAutoTopicCreation:t=!0})=>({apiKey:n,apiVersion:4,apiName:"Metadata",encode:async()=>(new o).writeNullableArray(e).writeBoolean(t)})},21901:function(e,t,r){const{parse:o,decode:n}=r(60626);e.exports={parse:o,decode:n}},55620:function(e,t,r){const o=r(40227);e.exports=({topics:e,allowAutoTopicCreation:t=!0})=>Object.assign(o({topics:e,allowAutoTopicCreation:t}),{apiVersion:5})},2068:function(e,t,r){const o=r(56341),{parse:n}=r(57995),s=e=>({nodeId:e.readInt32(),host:e.readString(),port:e.readInt32(),rack:e.readString()}),i=e=>({topicErrorCode:e.readInt16(),topic:e.readString(),isInternal:e.readBoolean(),partitionMetadata:e.readArray(a)}),a=e=>({partitionErrorCode:e.readInt16(),partitionId:e.readInt32(),leader:e.readInt32(),replicas:e.readArray((e=>e.readInt32())),isr:e.readArray((e=>e.readInt32())),offlineReplicas:e.readArray((e=>e.readInt32()))});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),brokers:t.readArray(s),clusterId:t.readString(),controllerId:t.readInt32(),topicMetadata:t.readArray(i)}},parse:n}},64234:function(e,t,r){const o=r(55620);e.exports=({topics:e,allowAutoTopicCreation:t=!0})=>Object.assign(o({topics:e,allowAutoTopicCreation:t}),{apiVersion:6})},74771:function(e,t,r){const{parse:o,decode:n}=r(2068);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},17789:function(e,t,r){const o={0:({groupId:e,topics:t})=>{const o=r(70204),n=r(86941);return{request:o({groupId:e,topics:t}),response:n}},1:({groupId:e,groupGenerationId:t,memberId:o,topics:n})=>{const s=r(48698),i=r(6);return{request:s({groupId:e,groupGenerationId:t,memberId:o,topics:n}),response:i}},2:({groupId:e,groupGenerationId:t,memberId:o,retentionTime:n=-1,topics:s})=>{const i=r(14078),a=r(93865);return{request:i({groupId:e,groupGenerationId:t,memberId:o,retentionTime:n,topics:s}),response:a}},3:({groupId:e,groupGenerationId:t,memberId:o,retentionTime:n=-1,topics:s})=>{const i=r(7344),a=r(84369);return{request:i({groupId:e,groupGenerationId:t,memberId:o,retentionTime:n,topics:s}),response:a}},4:({groupId:e,groupGenerationId:t,memberId:o,retentionTime:n=-1,topics:s})=>{const i=r(50161),a=r(33831);return{request:i({groupId:e,groupGenerationId:t,memberId:o,retentionTime:n,topics:s}),response:a}},5:({groupId:e,groupGenerationId:t,memberId:o,topics:n})=>{const s=r(4024),i=r(70434);return{request:s({groupId:e,groupGenerationId:t,memberId:o,topics:n}),response:i}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},70204:function(e,t,r){const o=r(28783),{OffsetCommit:n}=r(99211);e.exports=({groupId:e,topics:t})=>({apiKey:n,apiVersion:0,apiName:"OffsetCommit",encode:async()=>(new o).writeString(e).writeArray(t.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,offset:t,metadata:r=null})=>(new o).writeInt32(e).writeInt64(t).writeString(r)},86941:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({topic:e.readString(),partitions:e.readArray(c)}),c=e=>({partition:e.readInt32(),errorCode:e.readInt16()});e.exports={decode:async e=>({responses:new o(e).readArray(a)}),parse:async e=>{const t=e.responses.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t)[0];if(r)throw s(r.errorCode);return e}}},48698:function(e,t,r){const o=r(28783),{OffsetCommit:n}=r(99211);e.exports=({groupId:e,groupGenerationId:t,memberId:r,topics:i})=>({apiKey:n,apiVersion:1,apiName:"OffsetCommit",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeArray(i.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,offset:t,timestamp:r=Date.now(),metadata:n=null})=>(new o).writeInt32(e).writeInt64(t).writeInt64(r).writeString(n)},6:function(e,t,r){const{parse:o,decode:n}=r(86941);e.exports={decode:n,parse:o}},14078:function(e,t,r){const o=r(28783),{OffsetCommit:n}=r(99211);e.exports=({groupId:e,groupGenerationId:t,memberId:r,retentionTime:i,topics:a})=>({apiKey:n,apiVersion:2,apiName:"OffsetCommit",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeInt64(i).writeArray(a.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,offset:t,metadata:r=null})=>(new o).writeInt32(e).writeInt64(t).writeString(r)},93865:function(e,t,r){const{parse:o,decode:n}=r(86941);e.exports={decode:n,parse:o}},7344:function(e,t,r){const o=r(14078);e.exports=({groupId:e,groupGenerationId:t,memberId:r,retentionTime:n,topics:s})=>Object.assign(o({groupId:e,groupGenerationId:t,memberId:r,retentionTime:n,topics:s}),{apiVersion:3})},84369:function(e,t,r){const o=r(56341),{parse:n}=r(86941),s=e=>({topic:e.readString(),partitions:e.readArray(i)}),i=e=>({partition:e.readInt32(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),responses:t.readArray(s)}},parse:n}},50161:function(e,t,r){const o=r(7344);e.exports=({groupId:e,groupGenerationId:t,memberId:r,retentionTime:n,topics:s})=>Object.assign(o({groupId:e,groupGenerationId:t,memberId:r,retentionTime:n,topics:s}),{apiVersion:4})},33831:function(e,t,r){const{parse:o,decode:n}=r(84369);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},4024:function(e,t,r){const o=r(28783),{OffsetCommit:n}=r(99211);e.exports=({groupId:e,groupGenerationId:t,memberId:r,topics:i})=>({apiKey:n,apiVersion:5,apiName:"OffsetCommit",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeArray(i.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,offset:t,metadata:r=null})=>(new o).writeInt32(e).writeInt64(t).writeString(r)},70434:function(e,t,r){const{parse:o,decode:n}=r(33831);e.exports={decode:n,parse:o}},21761:function(e,t,r){const o={1:({groupId:e,topics:t})=>{const o=r(98047),n=r(42522);return{request:o({groupId:e,topics:t}),response:n}},2:({groupId:e,topics:t})=>{const o=r(89519),n=r(37269);return{request:o({groupId:e,topics:t}),response:n}},3:({groupId:e,topics:t})=>{const o=r(51640),n=r(48414);return{request:o({groupId:e,topics:t}),response:n}},4:({groupId:e,topics:t})=>{const o=r(20633),n=r(42871);return{request:o({groupId:e,topics:t}),response:n}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},98047:function(e,t,r){const o=r(28783),{OffsetFetch:n}=r(99211);e.exports=({groupId:e,topics:t})=>({apiKey:n,apiVersion:1,apiName:"OffsetFetch",encode:async()=>(new o).writeString(e).writeArray(t.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e})=>(new o).writeInt32(e)},42522:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({topic:e.readString(),partitions:e.readArray(c)}),c=e=>({partition:e.readInt32(),offset:e.readInt64().toString(),metadata:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>({responses:new o(e).readArray(a)}),parse:async e=>{const t=e.responses.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t)[0];if(r)throw s(r.errorCode);return e}}},89519:function(e,t,r){const o=r(98047);e.exports=({groupId:e,topics:t})=>Object.assign(o({groupId:e,topics:t}),{apiVersion:2})},37269:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({topic:e.readString(),partitions:e.readArray(c)}),c=e=>({partition:e.readInt32(),offset:e.readInt64().toString(),metadata:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e);return{responses:t.readArray(a),errorCode:t.readInt16()}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);const t=e.responses.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t)[0];if(r)throw s(r.errorCode);return e}}},51640:function(e,t,r){const o=r(28783),{OffsetFetch:n}=r(99211);e.exports=({groupId:e,topics:t})=>({apiKey:n,apiVersion:3,apiName:"OffsetFetch",encode:async()=>(new o).writeString(e).writeNullableArray(t.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e})=>(new o).writeInt32(e)},48414:function(e,t,r){const o=r(56341),{parse:n}=r(37269),s=e=>({topic:e.readString(),partitions:e.readArray(i)}),i=e=>({partition:e.readInt32(),offset:e.readInt64().toString(),metadata:e.readString(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),responses:t.readArray(s),errorCode:t.readInt16()}},parse:n}},20633:function(e,t,r){const o=r(51640);e.exports=({groupId:e,topics:t})=>Object.assign(o({groupId:e,topics:t}),{apiVersion:4})},42871:function(e,t,r){const{parse:o,decode:n}=r(48414);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},67609:function(e,t,r){const o={0:({acks:e,timeout:t,topicData:o})=>{const n=r(75127),s=r(92615);return{request:n({acks:e,timeout:t,topicData:o}),response:s}},1:({acks:e,timeout:t,topicData:o})=>{const n=r(56807),s=r(48683);return{request:n({acks:e,timeout:t,topicData:o}),response:s}},2:({acks:e,timeout:t,topicData:o,compression:n})=>{const s=r(80749),i=r(75468);return{request:s({acks:e,timeout:t,compression:n,topicData:o}),response:i}},3:({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a})=>{const c=r(26088),u=r(34635);return{request:c({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a}),response:u}},4:({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a})=>{const c=r(49221),u=r(64206);return{request:c({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a}),response:u}},5:({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a})=>{const c=r(65353),u=r(84708);return{request:c({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a}),response:u}},6:({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a})=>{const c=r(71392),u=r(61988);return{request:c({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a}),response:u}},7:({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a})=>{const c=r(637),u=r(75250);return{request:c({acks:e,timeout:t,compression:o,topicData:n,transactionalId:s,producerId:i,producerEpoch:a}),response:u}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},75127:function(e,t,r){const o=r(28783),{Produce:n}=r(99211),s=r(42032);e.exports=({acks:e,timeout:t,topicData:r})=>({apiKey:n,apiVersion:0,apiName:"Produce",expectResponse:()=>0!==e,encode:async()=>(new o).writeInt16(e).writeInt32(t).writeArray(r.map(i))});const i=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(a)),a=({partition:e,messages:t})=>{const r=s({messageVersion:0,entries:t});return(new o).writeInt32(e).writeInt32(r.size()).writeEncoder(r)}},92615:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({partition:e.readInt32(),errorCode:e.readInt16(),offset:e.readInt64().toString()});e.exports={decode:async e=>({topics:new o(e).readArray((e=>({topicName:e.readString(),partitions:e.readArray(a)})))}),parse:async e=>{const t=e.topics.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t);if(r.length>0){const{errorCode:e}=r[0];throw s(e)}return e}}},56807:function(e,t,r){const o=r(75127);e.exports=({acks:e,timeout:t,topicData:r})=>Object.assign(o({acks:e,timeout:t,topicData:r}),{apiVersion:1})},48683:function(e,t,r){const o=r(56341),{parse:n}=r(92615),s=e=>({partition:e.readInt32(),errorCode:e.readInt16(),offset:e.readInt64().toString()});e.exports={decode:async e=>{const t=new o(e),r=t.readArray((e=>({topicName:e.readString(),partitions:e.readArray(s)})));return{topics:r,throttleTime:t.readInt32()}},parse:n}},80749:function(e,t,r){const o=r(28783),{Produce:n}=r(99211),s=r(42032),{Types:i,lookupCodec:a}=r(42972);e.exports=({acks:e,timeout:t,compression:r=i.None,topicData:s})=>({apiKey:n,apiVersion:2,apiName:"Produce",expectResponse:()=>0!==e,encode:async()=>{const n=c(r),i=[];for(const e of s)i.push(await n(e));return(new o).writeInt16(e).writeInt32(t).writeArray(i)}});const c=e=>{const t=u(e);return async({topic:e,partitions:r})=>{const n=[];for(const e of r)n.push(await t(e));return(new o).writeString(e).writeArray(n)}},u=e=>async({partition:t,messages:r})=>{const n=s({messageVersion:1,compression:e,entries:r});if(e===i.None)return(new o).writeInt32(t).writeInt32(n.size()).writeEncoder(n);const c=r[0].timestamp||Date.now(),u=a(e),d=await u.compress(n),p=s({messageVersion:1,entries:[{compression:e,timestamp:c,value:d}]});return(new o).writeInt32(t).writeInt32(p.size()).writeEncoder(p)}},75468:function(e,t,r){const o=r(56341),{parse:n}=r(92615),s=e=>({partition:e.readInt32(),errorCode:e.readInt16(),offset:e.readInt64().toString(),timestamp:e.readInt64().toString()});e.exports={decode:async e=>{const t=new o(e),r=t.readArray((e=>({topicName:e.readString(),partitions:e.readArray(s)})));return{topics:r,throttleTime:t.readInt32()}},parse:n}},26088:function(e,t,r){const o=r(73278),n=r(28783),{Produce:s}=r(99211),{Types:i}=r(42972),a=r(16575),{RecordBatch:c}=r(72872);e.exports=({acks:e,timeout:t,transactionalId:r=null,producerId:a=o.fromInt(-1),producerEpoch:c=0,compression:d=i.None,topicData:p})=>({apiKey:s,apiVersion:3,apiName:"Produce",expectResponse:()=>0!==e,encode:async()=>{const o=u(d),s=[];for(const e of p)s.push(await o({...e,transactionalId:r,producerId:a,producerEpoch:c}));return(new n).writeString(r).writeInt16(e).writeInt32(t).writeArray(s)}});const u=e=>async({topic:t,partitions:r,transactionalId:o,producerId:s,producerEpoch:i})=>{const a=d(e),c=[];for(const e of r)c.push(await a({...e,transactionalId:o,producerId:s,producerEpoch:i}));return(new n).writeString(t).writeArray(c)},d=e=>async({partition:t,messages:r,transactionalId:o,firstSequence:s,producerId:i,producerEpoch:u})=>{const d=Date.now(),p=r.map((e=>e.timestamp)).filter((e=>null!=e)).sort(),l=0===p.length?[d]:p,h=l[0],f=l[l.length-1],m=r.map(((e,t)=>a({...e,offsetDelta:t,timestampDelta:(e.timestamp||d)-h}))),g=await c({compression:e,records:m,firstTimestamp:h,maxTimestamp:f,producerId:i,producerEpoch:u,firstSequence:s,transactional:!!o,lastOffsetDelta:m.length-1});return(new n).writeInt32(t).writeInt32(g.size()).writeEncoder(g)}},34635:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=r(74358),a=e=>({partition:e.readInt32(),errorCode:e.readInt16(),baseOffset:e.readInt64().toString(),logAppendTime:e.readInt64().toString()});e.exports={decode:async e=>{const t=new o(e),r=t.readArray((e=>({topicName:e.readString(),partitions:e.readArray(a)})));return{topics:r,throttleTime:t.readInt32()}},parse:async e=>{const t=e.topics.map((e=>e.partitions.filter((e=>n(e.errorCode))))),r=i(t);if(r.length>0){const{errorCode:e}=r[0];throw s(e)}return e}}},49221:function(e,t,r){const o=r(26088);e.exports=({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a})=>Object.assign(o({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a}),{apiVersion:4})},64206:function(e,t,r){const{decode:o,parse:n}=r(34635);e.exports={decode:o,parse:n}},65353:function(e,t,r){const o=r(26088);e.exports=({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a})=>Object.assign(o({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a}),{apiVersion:5})},84708:function(e,t,r){const o=r(56341),{parse:n}=r(34635),s=e=>({partition:e.readInt32(),errorCode:e.readInt16(),baseOffset:e.readInt64().toString(),logAppendTime:e.readInt64().toString(),logStartOffset:e.readInt64().toString()});e.exports={decode:async e=>{const t=new o(e),r=t.readArray((e=>({topicName:e.readString(),partitions:e.readArray(s)})));return{topics:r,throttleTime:t.readInt32()}},parse:n}},71392:function(e,t,r){const o=r(65353);e.exports=({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a})=>Object.assign(o({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a}),{apiVersion:6})},61988:function(e,t,r){const{parse:o,decode:n}=r(84708);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},637:function(e,t,r){const o=r(71392);e.exports=({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a})=>Object.assign(o({acks:e,timeout:t,transactionalId:r,producerId:n,producerEpoch:s,compression:i,topicData:a}),{apiVersion:7})},75250:function(e,t,r){const{decode:o,parse:n}=r(61988);e.exports={decode:o,parse:n}},10886:function(e,t,r){const o={0:({authBytes:e})=>{const t=r(87383),o=r(79305);return{request:t({authBytes:e}),response:o}},1:({authBytes:e})=>{const t=r(98439),o=r(5986);return{request:t({authBytes:e}),response:o}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},87383:function(e,t,r){const o=r(28783),{SaslAuthenticate:n}=r(99211);e.exports=({authBytes:e})=>({apiKey:n,apiVersion:0,apiName:"SaslAuthenticate",encode:async()=>(new o).writeBuffer(e)})},79305:function(e,t,r){const o=r(56341),n=r(28783),{failure:s,createErrorFromCode:i,failIfVersionNotSupported:a,errorCodes:c}=r(21701),{KafkaJSProtocolError:u}=r(29879),d=c.find((e=>58===e.code));e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return a(r),{errorCode:r,errorMessage:t.readString(),authBytes:(new n).writeBytes(t.readBytes()).buffer}},parse:async e=>{if(58===e.errorCode&&e.errorMessage)throw new u({...d,message:e.errorMessage});if(s(e.errorCode))throw i(e.errorCode);return e}}},98439:function(e,t,r){const o=r(87383);e.exports=({authBytes:e})=>Object.assign(o({authBytes:e}),{apiVersion:1})},5986:function(e,t,r){const o=r(56341),n=r(28783),{parse:s}=r(79305),{failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return i(r),{errorCode:r,errorMessage:t.readString(),authBytes:(new n).writeBytes(t.readBytes()).buffer,sessionLifetimeMs:t.readInt64().toString()}},parse:s}},26184:function(e,t,r){const o={0:({mechanism:e})=>{const t=r(38143),o=r(96190);return{request:t({mechanism:e}),response:o}},1:({mechanism:e})=>{const t=r(85389),o=r(80525);return{request:t({mechanism:e}),response:o}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},38143:function(e,t,r){const o=r(28783),{SaslHandshake:n}=r(99211);e.exports=({mechanism:e})=>({apiKey:n,apiVersion:0,apiName:"SaslHandshake",encode:async()=>(new o).writeString(e)})},96190:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return i(r),{errorCode:r,enabledMechanisms:t.readArray((e=>e.readString()))}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},85389:function(e,t,r){const o=r(38143);e.exports=({mechanism:e})=>({...o({mechanism:e}),apiVersion:1})},80525:function(e,t,r){const{decode:o,parse:n}=r(96190);e.exports={decode:o,parse:n}},86096:function(e,t,r){const o={0:({groupId:e,generationId:t,memberId:o,groupAssignment:n})=>{const s=r(52322),i=r(15509);return{request:s({groupId:e,generationId:t,memberId:o,groupAssignment:n}),response:i}},1:({groupId:e,generationId:t,memberId:o,groupAssignment:n})=>{const s=r(12596),i=r(93155);return{request:s({groupId:e,generationId:t,memberId:o,groupAssignment:n}),response:i}},2:({groupId:e,generationId:t,memberId:o,groupAssignment:n})=>{const s=r(91901),i=r(70015);return{request:s({groupId:e,generationId:t,memberId:o,groupAssignment:n}),response:i}},3:({groupId:e,generationId:t,memberId:o,groupInstanceId:n,groupAssignment:s})=>{const i=r(97203),a=r(72745);return{request:i({groupId:e,generationId:t,memberId:o,groupInstanceId:n,groupAssignment:s}),response:a}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},52322:function(e,t,r){const o=r(28783),{SyncGroup:n}=r(99211);e.exports=({groupId:e,generationId:t,memberId:r,groupAssignment:i})=>({apiKey:n,apiVersion:0,apiName:"SyncGroup",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeArray(i.map(s))});const s=({memberId:e,memberAssignment:t})=>(new o).writeString(e).writeBytes(t)},15509:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s,failIfVersionNotSupported:i}=r(21701);e.exports={decode:async e=>{const t=new o(e),r=t.readInt16();return i(r),{errorCode:r,memberAssignment:t.readBytes()}},parse:async e=>{if(n(e.errorCode))throw s(e.errorCode);return e}}},12596:function(e,t,r){const o=r(52322);e.exports=({groupId:e,generationId:t,memberId:r,groupAssignment:n})=>Object.assign(o({groupId:e,generationId:t,memberId:r,groupAssignment:n}),{apiVersion:1})},93155:function(e,t,r){const o=r(56341),{failIfVersionNotSupported:n}=r(21701),{parse:s}=r(15509);e.exports={decode:async e=>{const t=new o(e),r=t.readInt32(),s=t.readInt16();return n(s),{throttleTime:r,errorCode:s,memberAssignment:t.readBytes()}},parse:s}},91901:function(e,t,r){const o=r(12596);e.exports=({groupId:e,generationId:t,memberId:r,groupAssignment:n})=>Object.assign(o({groupId:e,generationId:t,memberId:r,groupAssignment:n}),{apiVersion:2})},70015:function(e,t,r){const{parse:o,decode:n}=r(93155);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},97203:function(e,t,r){const o=r(28783),{SyncGroup:n}=r(99211);e.exports=({groupId:e,generationId:t,memberId:r,groupInstanceId:i=null,groupAssignment:a})=>({apiKey:n,apiVersion:3,apiName:"SyncGroup",encode:async()=>(new o).writeString(e).writeInt32(t).writeString(r).writeString(i).writeArray(a.map(s))});const s=({memberId:e,memberAssignment:t})=>(new o).writeString(e).writeBytes(t)},72745:function(e,t,r){const{decode:o,parse:n}=r(70015);e.exports={decode:o,parse:n}},35302:function(e,t,r){const o={0:({transactionalId:e,groupId:t,producerId:o,producerEpoch:n,topics:s})=>{const i=r(44021),a=r(84272);return{request:i({transactionalId:e,groupId:t,producerId:o,producerEpoch:n,topics:s}),response:a}},1:({transactionalId:e,groupId:t,producerId:o,producerEpoch:n,topics:s})=>{const i=r(52944),a=r(79560);return{request:i({transactionalId:e,groupId:t,producerId:o,producerEpoch:n,topics:s}),response:a}}};e.exports={versions:Object.keys(o),protocol:({version:e})=>o[e]}},44021:function(e,t,r){const o=r(28783),{TxnOffsetCommit:n}=r(99211);e.exports=({transactionalId:e,groupId:t,producerId:r,producerEpoch:i,topics:a})=>({apiKey:n,apiVersion:0,apiName:"TxnOffsetCommit",encode:async()=>(new o).writeString(e).writeString(t).writeInt64(r).writeInt16(i).writeArray(a.map(s))});const s=({topic:e,partitions:t})=>(new o).writeString(e).writeArray(t.map(i)),i=({partition:e,offset:t,metadata:r})=>(new o).writeInt32(e).writeInt64(t).writeString(r)},84272:function(e,t,r){const o=r(56341),{failure:n,createErrorFromCode:s}=r(21701),i=async e=>({topic:e.readString(),partitions:await e.readArrayAsync(a)}),a=e=>({partition:e.readInt32(),errorCode:e.readInt16()});e.exports={decode:async e=>{const t=new o(e);return{throttleTime:t.readInt32(),topics:await t.readArrayAsync(i)}},parse:async e=>{const t=e.topics.map((({partitions:e})=>({partitionsWithErrors:e.filter((({errorCode:e})=>n(e)))}))).filter((({partitionsWithErrors:e})=>e.length));if(t.length>0)throw s(t[0].partitionsWithErrors[0].errorCode);return e}}},52944:function(e,t,r){const o=r(44021);e.exports=({transactionalId:e,groupId:t,producerId:r,producerEpoch:n,topics:s})=>Object.assign(o({transactionalId:e,groupId:t,producerId:r,producerEpoch:n,topics:s}),{apiVersion:1})},79560:function(e,t,r){const{parse:o,decode:n}=r(84272);e.exports={decode:async e=>{const t=await n(e);return{...t,throttleTime:0,clientSideThrottleTime:t.throttleTime}},parse:o}},98203:function(e){e.exports={UNKNOWN:0,ANY:1,MATCH:2,LITERAL:3,PREFIXED:4}},75320:function(e,t,r){const o=r(77666);e.exports=o},71128:function(e,t,r){e.exports={request:r(30326),response:r(21391)}},30326:function(e,t,r){const o=r(28783);e.exports=({authorizationIdentity:e,accessKeyId:t,secretAccessKey:r,sessionToken:n=""})=>({encode:async()=>(new o).writeBytes([e,t,r,n].join("\0"))})},21391:function(e){e.exports={decode:async()=>!0,parse:async()=>!0}},13860:function(e,t,r){e.exports={request:r(38824),response:r(32303)}},38824:function(e,t,r){const o=r(28783);e.exports=async({authorizationIdentity:e=null},t)=>{const r=null==e?"":`"a=${e}`;let n=function(e){let t="";if(null==e)return t;let r="";for(const o in e)t+=`${r}${o}=${e[o]}`,r="";return t}(t.extensions);n.length>0&&(n=`${n}`);const s=`n,${r},auth=Bearer ${t.value}${n}`;return{encode:async()=>(new o).writeBytes(Buffer.from(s))}}},32303:function(e){e.exports={decode:async()=>!0,parse:async()=>!0}},17733:function(e,t,r){e.exports={request:r(17985),response:r(17914)}},17985:function(e,t,r){const o=r(28783);e.exports=({authorizationIdentity:e=null,username:t,password:r})=>({encode:async()=>(new o).writeBytes([e,t,r].join("\0"))})},17914:function(e){e.exports={decode:async()=>!0,parse:async()=>!0}},22745:function(e,t,r){const o=r(28783);e.exports=({finalMessage:e})=>({encode:async()=>(new o).writeBytes(e)})},776:function(e,t,r){e.exports=r(18703)},61224:function(e,t,r){const o=r(28783);e.exports=({clientFirstMessage:e})=>({encode:async()=>(new o).writeBytes(e)})},18703:function(e,t,r){const o=r(56341),n=/^([rsiev])=(.*)$/;e.exports={decode:async e=>new o(e).readBytes(),parse:async e=>{const t=e.toString().split(",").map((e=>{const[t,r,o]=e.match(n);return[r,o]})).reduce(((e,t)=>({...e,[t[0]]:t[1]})),{});return{original:e.toString(),...t}}}},82337:function(e,t,r){e.exports={firstMessage:{request:r(61224),response:r(18703)},finalMessage:{request:r(22745),response:r(776)}}},62515:function(e){e.exports={NO_TIMESTAMP:-1,CREATE_TIME:0,LOG_APPEND_TIME:1}},27727:function(e){e.exports={maxRetryTime:3e4,initialRetryTime:300,factor:.2,multiplier:2,retries:5}},6045:function(e){e.exports={maxRetryTime:1e3,initialRetryTime:50,factor:.02,multiplier:1.5,retries:15}},99701:function(e,t,r){const{KafkaJSNumberOfRetriesExceeded:o,KafkaJSNonRetriableError:n}=r(29879),s=r(27727),i=(e,t)=>{const r=e*t;return Math.ceil((o=t-r,n=t+r,Math.random()*(n-o)+o));var o,n},a=["RangeError","ReferenceError","SyntaxError","TypeError"],c=(e,t,r,s)=>{let c=!1;const{factor:u,multiplier:d,maxRetryTime:p,retries:l}=e,h=e=>{c=!0,r(e||new Error("Aborted"))},f=(e,m=0)=>{if(c)return;const g=(e=>Math.min(i(u,e)*d,p))(e),y=m<l;s(h,m,e).then(t).catch((t=>{(e=>{return(e.retriable||!1!==e.retriable)&&(t=e,!a.includes(t.name));var t})(t)?y?setTimeout((()=>f(g,m+1)),e):r(new o(t,{retryCount:m,retryTime:e})):r(new n(t))}))};return f};e.exports=(e={})=>t=>new Promise(((r,o)=>{const n=Object.assign({},s,e);c(n,r,o,t)(i(n.factor,n.initialRetryTime))}))},8351:function(e){e.exports=(e,t)=>{const r=[],o=e.length;let n=0;for(;n<o;)-1===t.indexOf(e[n])&&r.push(e[n]),n+=1;return r}},15002:function(e){const t=e=>{throw e};e.exports=function*(e,r=t){const o=[],n=[];for(e.forEach((e=>{let t,s;o.push(new Promise(((e,r)=>{t=e,s=r}))),n.push({resolve:t,reject:s}),e.then((e=>{const{resolve:t}=n.pop();t(e)}),(async e=>{const{reject:t}=n.pop();try{await r(e),t(e)}catch(e){t(e)}}))}));o.length>0;){const e=o.pop();yield e}}},24230:function(e,t,r){const{KafkaJSNonRetriableError:o}=r(29879),n=new o("Queued function aborted due to earlier promise rejection");function s(){}e.exports=({limit:e,onChange:t=s}={})=>{if(isNaN(e)||"number"!=typeof e||e<1)throw new o('"limit" cannot be less than 1');let r=[],i=0;const a=(e,o,s)=>{i++,t(i),e().then((e=>{o(e),i--,t(i),r.length>0&&r.shift()()})).catch((e=>{s(e),(()=>{for(const e of r)e(((e,t,r)=>r(n)));r=[],i=0})()}))};return t=>new Promise(((o,n)=>((t,o,n)=>{i<e?a(t,o,n):r.push((e=>{(e||a)(t,o,n)}))})(t,o,n)))}},74358:function(e){e.exports=function(e){return[].concat.apply([],e)}},53163:function(e){e.exports=async(e,t)=>{const r=new Map;for(const o of e){const e=await Promise.resolve(t(o));r.set(e,r.has(e)?[...r.get(e),o]:[o])}return r}},4105:function(e,t,r){const{format:o}=r(73837),{KafkaJSLockTimeout:n}=r(29879),s=Symbol("private:Lock:locked"),i=Symbol("private:Lock:timeout"),a=Symbol("private:Lock:waiting"),c=Symbol("private:Lock:timeoutErrorMessage");e.exports=class{constructor({timeout:e,description:t=null}={}){if("number"!=typeof e)throw new TypeError(`'timeout' is not a number, received '${typeof e}'`);this[s]=!1,this[i]=e,this[a]=new Set,this[c]=()=>{const e=o("Timeout while acquiring lock (%d waiting locks)",this[a].size);return t?`${e}: "${t}"`:e}}async acquire(){return new Promise(((e,t)=>{if(!this[s])return this[s]=!0,e();let r=null;const o=async()=>{if(!this[s])return this[s]=!0,clearTimeout(r),this[a].delete(o),e()};this[a].add(o),r=setTimeout((()=>{const e=new n(this[c]());this[a].delete(o),t(e)}),this[i])}))}async release(){this[s]=!1;const e=this[a].values().next().value;if(e)return e()}}},73278:function(e){class t{constructor(e){this.value=e}static isLong(e){return"bigint"==typeof e.value}static fromBits(e){return new t(BigInt(e))}static fromInt(e){return isNaN(e)?t.ZERO:new t(BigInt.asIntN(64,BigInt(e)))}static fromNumber(e){return isNaN(e)?t.ZERO:new t(BigInt(e))}static fromValue(e){return"number"==typeof e?this.fromNumber(e):"string"==typeof e?this.fromString(e):"bigint"==typeof e?new t(e):this.isLong(e)?new t(BigInt(e.value)):new t(BigInt(e))}static fromString(e){if(0===e.length)throw Error("empty string");return"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e?t.ZERO:new t(BigInt(e))}isZero(){return this.value===BigInt(0)}isNegative(){return this.value<BigInt(0)}toString(){return String(this.value)}toNumber(){return Number(this.value)}toInt(){return Number(BigInt.asIntN(32,this.value))}toJSON(){return this.toString()}shiftLeft(e){return new t(this.value<<BigInt(e))}shiftRight(e){return new t(this.value>>BigInt(e))}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.value|e.value)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),new t(this.value^e.value)}and(e){return t.isLong(e)||(e=t.fromValue(e)),new t(this.value&e.value)}not(){return new t(~this.value)}shiftRightUnsigned(e){return new t(this.value>>BigInt.asUintN(64,BigInt(e)))}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.value===e.value}greaterThanOrEqual(e){return t.isLong(e)||(e=t.fromValue(e)),this.value>=e.value}gte(e){return this.greaterThanOrEqual(e)}notEquals(e){return t.isLong(e)||(e=t.fromValue(e)),!this.equals(e)}add(e){return t.isLong(e)||(e=t.fromValue(e)),new t(this.value+e.value)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.negate())}multiply(e){return this.isZero()?t.ZERO:(t.isLong(e)||(e=t.fromValue(e)),new t(this.value*e.value))}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");return new t(this.value/e.value)}compare(e){return t.isLong(e)||(e=t.fromValue(e)),this.value===e.value?0:this.value>e.value?1:e.value>this.value?-1:void 0}lessThan(e){return t.isLong(e)||(e=t.fromValue(e)),this.value<e.value}negate(){return this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}getHighBits(){return Number(BigInt.asIntN(32,this.value>>BigInt(32)))}getLowBits(){return Number(BigInt.asIntN(32,this.value))}}t.MIN_VALUE=new t(BigInt("-9223372036854775808")),t.MAX_VALUE=new t(BigInt("9223372036854775807")),t.ZERO=t.fromInt(0),t.ONE=t.fromInt(1),e.exports=t},89026:function(e){e.exports=e=>{let t=null;return(...r)=>(null==t&&(t=e(...r).finally((()=>t=null))),t)}},42464:function(e){e.exports=e=>{if(!Array.isArray(e))throw new TypeError("'array' is not an array");if(e.length<2)return e;const t=e.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),o=t[e];t[e]=t[r],t[r]=o}return t}},34742:function(e){e.exports=e=>new Promise((t=>{setTimeout(t,e)}))},76:function(e){const{keys:t}=Object;e.exports=e=>t(e).reduce(((t,r)=>({...t,[e[r]]:r})),{})},86335:function(e,t,r){const o=r(34742),{KafkaJSTimeout:n}=r(29879);e.exports=(e,{delay:t=50,maxWait:r=1e4,timeoutMessage:s="Timeout",ignoreTimeout:i=!1}={})=>{let a,c=0,u=!1;const d=async(r,n)=>{c+=t,await o(t);try{const t=await e(c);if(t)return u=!0,clearTimeout(a),r(t);d(r,n)}catch(e){u=!0,clearTimeout(a),n(e)}};return new Promise(((e,t)=>{d(e,t),i||(a=setTimeout((()=>{if(!u)return t(new n(s))}),r))}))}},6779:function(e){e.exports=(e,t)=>`https://kafka.js.org/${e}${t?"#"+t:""}`},77889:function(e,t,r){e.exports={core:{Batch:r(32293),ClientBuilder:r(53002),buildClient:r(57641),SharedCredentials:r(87872),StaticCredentials:r(94111),Errors:r(424)},usStreet:{Lookup:r(94535),Candidate:r(39208)},usZipcode:{Lookup:r(73976),Result:r(12053)},usAutocomplete:{Lookup:r(71002),Suggestion:r(98205)},usAutocompletePro:{Lookup:r(6680),Suggestion:r(30847)},usExtract:{Lookup:r(2522),Result:r(55565)},internationalStreet:{Lookup:r(7884),Candidate:r(29232)},usReverseGeo:{Lookup:r(53259)},internationalAddressAutocomplete:{Lookup:r(53210),Suggestion:r(5711)}}},55503:function(e,t,r){e.exports=r(70128)},36260:function(e,t,r){"use strict";var o=r(93455),n=r(64761),s=r(18557),i=r(29742),a=r(13685),c=r(95687),u=r(30938).http,d=r(30938).https,p=r(57310),l=r(59796),h=r(7828).version,f=r(93509),m=r(5228),g=r(73592),y=r(15169),I=/https:?/;function w(e,t,r){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=r,t.auth){var o=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+o}e.beforeRedirect=function(e){e.headers.host=e.host,w(e,t,e.href)}}e.exports=function(e){return new Promise((function(t,r){var T;function b(){e.cancelToken&&e.cancelToken.unsubscribe(T),e.signal&&e.signal.removeEventListener("abort",T)}var E=function(e){b(),t(e)},S=!1,C=function(e){b(),S=!0,r(e)},A=e.data,v=e.headers,O={};if(Object.keys(v).forEach((function(e){O[e.toLowerCase()]=e})),"user-agent"in O?v[O["user-agent"]]||delete v[O["user-agent"]]:v["User-Agent"]="axios/"+h,A&&!o.isStream(A)){if(Buffer.isBuffer(A));else if(o.isArrayBuffer(A))A=Buffer.from(new Uint8Array(A));else{if(!o.isString(A))return C(f("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));A=Buffer.from(A,"utf-8")}if(e.maxBodyLength>-1&&A.length>e.maxBodyLength)return C(f("Request body larger than maxBodyLength limit",e));O["content-length"]||(v["Content-Length"]=A.length)}var x=void 0;e.auth&&(x=(e.auth.username||"")+":"+(e.auth.password||""));var R=s(e.baseURL,e.url),_=p.parse(R),N=_.protocol||"http:";if(!x&&_.auth){var k=_.auth.split(":");x=(k[0]||"")+":"+(k[1]||"")}x&&O.authorization&&delete v[O.authorization];var B=I.test(N),P=B?e.httpsAgent:e.httpAgent;try{i(_.path,e.params,e.paramsSerializer).replace(/^\?/,"")}catch(t){var L=new Error(t.message);L.config=e,L.url=e.url,L.exists=!0,C(L)}var D={path:i(_.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:v,agent:P,agents:{http:e.httpAgent,https:e.httpsAgent},auth:x};e.socketPath?D.socketPath=e.socketPath:(D.hostname=_.hostname,D.port=_.port);var M,q=e.proxy;if(!q&&!1!==q){var U=N.slice(0,-1)+"_proxy",F=process.env[U]||process.env[U.toUpperCase()];if(F){var G=p.parse(F),V=process.env.no_proxy||process.env.NO_PROXY,j=!0;if(V&&(j=!V.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||"."===e[0]&&_.hostname.substr(_.hostname.length-e.length)===e||_.hostname===e)}))),j&&(q={host:G.hostname,port:G.port,protocol:G.protocol},G.auth)){var K=G.auth.split(":");q.auth={username:K[0],password:K[1]}}}}q&&(D.headers.host=_.hostname+(_.port?":"+_.port:""),w(D,q,N+"//"+_.hostname+(_.port?":"+_.port:"")+D.path));var J=B&&(!q||I.test(q.protocol));e.transport?M=e.transport:0===e.maxRedirects?M=J?c:a:(e.maxRedirects&&(D.maxRedirects=e.maxRedirects),M=J?d:u),e.maxBodyLength>-1&&(D.maxBodyLength=e.maxBodyLength),e.insecureHTTPParser&&(D.insecureHTTPParser=e.insecureHTTPParser);var $=M.request(D,(function(t){if(!$.aborted){var r=t,s=t.req||$;if(204!==t.statusCode&&"HEAD"!==s.method&&!1!==e.decompress)switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":r=r.pipe(l.createUnzip()),delete t.headers["content-encoding"]}var i={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:s};if("stream"===e.responseType)i.data=r,n(E,C,i);else{var a=[],c=0;r.on("data",(function(t){a.push(t),c+=t.length,e.maxContentLength>-1&&c>e.maxContentLength&&(S=!0,r.destroy(),C(f("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,s)))})),r.on("aborted",(function(){S||(r.destroy(),C(f("error request aborted",e,"ERR_REQUEST_ABORTED",s)))})),r.on("error",(function(t){$.aborted||C(m(t,e,null,s))})),r.on("end",(function(){try{var t=1===a.length?a[0]:Buffer.concat(a);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding),e.responseEncoding&&"utf8"!==e.responseEncoding||(t=o.stripBOM(t))),i.data=t}catch(t){C(m(t,e,t.code,i.request,i))}n(E,C,i)}))}}}));if($.on("error",(function(t){$.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==t.code||C(m(t,e,null,$))})),$.on("socket",(function(e){e.setKeepAlive(!0,6e4)})),e.timeout){var W=parseInt(e.timeout,10);if(isNaN(W))return void C(f("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",$));$.setTimeout(W,(function(){$.abort();var t;t=e.timeoutErrorMessage?e.timeoutErrorMessage:"timeout of "+e.timeout+"ms exceeded";var r=e.transitional||g;C(f(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",$))}))}(e.cancelToken||e.signal)&&(T=function(e){$.aborted||($.abort(),C(!e||e&&e.type?new y("canceled"):e))},e.cancelToken&&e.cancelToken.subscribe(T),e.signal&&(e.signal.aborted?T():e.signal.addEventListener("abort",T))),o.isStream(A)?A.on("error",(function(t){C(m(t,e,null,$))})).pipe($):$.end(A)}))}},59678:function(e,t,r){"use strict";var o=r(93455),n=r(64761),s=r(79886),i=r(29742),a=r(18557),c=r(58817),u=r(67777),d=r(93509),p=r(73592),l=r(15169);e.exports=function(e){return new Promise((function(t,r){var h,f=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}o.isFormData(f)&&delete m["Content-Type"];var I=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",T=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(w+":"+T)}var b=a(e.baseURL,e.url);function E(){if(I){var o="getAllResponseHeaders"in I?c(I.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?I.response:I.responseText,status:I.status,statusText:I.statusText,headers:o,config:e,request:I};n((function(e){t(e),y()}),(function(e){r(e),y()}),s),I=null}}if(I.open(e.method.toUpperCase(),i(b,e.params,e.paramsSerializer),!0),I.timeout=e.timeout,"onloadend"in I?I.onloadend=E:I.onreadystatechange=function(){I&&4===I.readyState&&(0!==I.status||I.responseURL&&0===I.responseURL.indexOf("file:"))&&setTimeout(E)},I.onabort=function(){I&&(r(d("Request aborted",e,"ECONNABORTED",I)),I=null)},I.onerror=function(){r(d("Network Error",e,null,I)),I=null},I.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",o=e.transitional||p;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(d(t,e,o.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",I)),I=null},o.isStandardBrowserEnv()){var S=(e.withCredentials||u(b))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(m[e.xsrfHeaderName]=S)}"setRequestHeader"in I&&o.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:I.setRequestHeader(t,e)})),o.isUndefined(e.withCredentials)||(I.withCredentials=!!e.withCredentials),g&&"json"!==g&&(I.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&I.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&I.upload&&I.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){I&&(r(!e||e&&e.type?new l("canceled"):e),I.abort(),I=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),f||(f=null),I.send(f)}))}},70128:function(e,t,r){"use strict";var o=r(93455),n=r(49242),s=r(64533),i=r(58545),a=function e(t){var r=new s(t),a=n(s.prototype.request,r);return o.extend(a,s.prototype,r),o.extend(a,r),a.create=function(r){return e(i(t,r))},a}(r(69101));a.Axios=s,a.Cancel=r(15169),a.CancelToken=r(59713),a.isCancel=r(83403),a.VERSION=r(7828).version,a.all=function(e){return Promise.all(e)},a.spread=r(6615),a.isAxiosError=r(17714),e.exports=a,e.exports.default=a},15169:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},59713:function(e,t,r){"use strict";var o=r(15169);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,o=r._listeners.length;for(t=0;t<o;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,o=new Promise((function(e){r.subscribe(e),t=e})).then(e);return o.cancel=function(){r.unsubscribe(t)},o},e((function(e){r.reason||(r.reason=new o(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},n.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},83403:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},64533:function(e,t,r){"use strict";var o=r(93455),n=r(29742),s=r(63663),i=r(55325),a=r(58545),c=r(84296),u=c.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var o=[],n=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var s,d=[];if(this.interceptors.response.forEach((function(e){d.push(e.fulfilled,e.rejected)})),!n){var p=[i,void 0];for(Array.prototype.unshift.apply(p,o),p=p.concat(d),s=Promise.resolve(t);p.length;)s=s.then(p.shift(),p.shift());return s}for(var l=t;o.length;){var h=o.shift(),f=o.shift();try{l=h(l)}catch(e){f(e);break}}try{s=i(l)}catch(e){return Promise.reject(e)}for(;d.length;)s=s.then(d.shift(),d.shift());return s},d.prototype.getUri=function(e){return e=a(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),o.forEach(["post","put","patch"],(function(e){d.prototype[e]=function(t,r,o){return this.request(a(o||{},{method:e,url:t,data:r}))}})),e.exports=d},63663:function(e,t,r){"use strict";var o=r(93455);function n(){this.handlers=[]}n.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},18557:function(e,t,r){"use strict";var o=r(15949),n=r(78583);e.exports=function(e,t){return e&&!o(t)?n(e,t):t}},93509:function(e,t,r){"use strict";var o=r(5228);e.exports=function(e,t,r,n,s){var i=new Error(e);return o(i,t,r,n,s)}},55325:function(e,t,r){"use strict";var o=r(93455),n=r(96616),s=r(83403),i=r(69101),a=r(15169);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=n.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return c(e),t.data=n.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=n.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5228:function(e){"use strict";e.exports=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},58545:function(e,t,r){"use strict";var o=r(93455);e.exports=function(e,t){t=t||{};var r={};function n(e,t){return o.isPlainObject(e)&&o.isPlainObject(t)?o.merge(e,t):o.isPlainObject(t)?o.merge({},t):o.isArray(t)?t.slice():t}function s(r){return o.isUndefined(t[r])?o.isUndefined(e[r])?void 0:n(void 0,e[r]):n(e[r],t[r])}function i(e){if(!o.isUndefined(t[e]))return n(void 0,t[e])}function a(r){return o.isUndefined(t[r])?o.isUndefined(e[r])?void 0:n(void 0,e[r]):n(void 0,t[r])}function c(r){return r in t?n(e[r],t[r]):r in e?n(void 0,e[r]):void 0}var u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return o.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||s,n=t(e);o.isUndefined(n)&&t!==c||(r[e]=n)})),r}},64761:function(e,t,r){"use strict";var o=r(93509);e.exports=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},96616:function(e,t,r){"use strict";var o=r(93455),n=r(69101);e.exports=function(e,t,r){var s=this||n;return o.forEach(r,(function(r){e=r.call(s,e,t)})),e}},69101:function(e,t,r){"use strict";var o=r(93455),n=r(3096),s=r(5228),i=r(73592),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,d={transitional:i,adapter:("undefined"!=typeof XMLHttpRequest?u=r(59678):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(u=r(36260)),u),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,r){if(o.isString(e))try{return(0,JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||d.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){d.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){d.headers[e]=o.merge(a)})),e.exports=d},73592:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7828:function(e){e.exports={version:"0.26.1"}},49242:function(e){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}}},29742:function(e,t,r){"use strict";var o=r(93455);function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(o.isURLSearchParams(t))s=t.toString();else{var i=[];o.forEach(t,(function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+"="+n(e))})))})),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},78583:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},79886:function(e,t,r){"use strict";var o=r(93455);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,r,n,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),o.isString(n)&&a.push("path="+n),o.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},15949:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},17714:function(e,t,r){"use strict";var o=r(93455);e.exports=function(e){return o.isObject(e)&&!0===e.isAxiosError}},67777:function(e,t,r){"use strict";var o=r(93455);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=o.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},3096:function(e,t,r){"use strict";var o=r(93455);e.exports=function(e,t){o.forEach(e,(function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])}))}},58817:function(e,t,r){"use strict";var o=r(93455),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,i={};return e?(o.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=o.trim(e.substr(0,s)).toLowerCase(),r=o.trim(e.substr(s+1)),t){if(i[t]&&n.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i}},6615:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},84296:function(e,t,r){"use strict";var o=r(7828).version,n={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){n[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var s={};n.transitional=function(e,t,r){function n(e,t){return"[Axios v"+o+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,i){if(!1===e)throw new Error(n(o," has been removed"+(t?" in "+t:"")));return t&&!s[o]&&(s[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},e.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var o=Object.keys(e),n=o.length;n-- >0;){var s=o[n],i=t[s];if(i){var a=e[s],c=void 0===a||i(a,s,e);if(!0!==c)throw new TypeError("option "+s+" must be "+c)}else if(!0!==r)throw Error("Unknown option "+s)}},validators:n}},93455:function(e,t,r){"use strict";var o=r(49242),n=Object.prototype.toString;function s(e){return Array.isArray(e)}function i(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===n.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function d(e){return"[object Function]"===n.call(e)}function p(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:s,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!i(e)&&null!==e.constructor&&!i(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===n.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:u,isUndefined:i,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:d,isStream:function(e){return c(e)&&d(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===n.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:p,merge:function e(){var t={};function r(r,o){u(t[o])&&u(r)?t[o]=e(t[o],r):u(r)?t[o]=e({},r):s(r)?t[o]=r.slice():t[o]=r}for(var o=0,n=arguments.length;o<n;o++)p(arguments[o],r);return t},extend:function(e,t,r){return p(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},61880:function(e,t,r){e.exports=class{constructor(e){this.sender=e}send(e){return e.parameters.agent="smarty (sdk:javascript@"+r(27406).i8+")",new Promise(((t,r)=>{this.sender.send(e).then(t).catch(r)}))}}},47897:function(e){e.exports=class{constructor(e,t){this.urlOverride=t,this.sender=e}send(e){return new Promise(((t,r)=>{e.baseUrl=this.urlOverride,this.sender.send(e).then(t).catch(r)}))}}},32293:function(e,t,r){const o=r(424).BatchFullError;e.exports=class{constructor(){this.lookups=[]}add(e){if(!this.lookupsHasRoomForLookup())throw new o;this.lookups.push(e)}lookupsHasRoomForLookup(){return this.lookups.length<100}length(){return this.lookups.length}getByIndex(e){return this.lookups[e]}getByInputId(e){return this.lookups.filter((t=>t.inputId===e))[0]}clear(){this.lookups=[]}isEmpty(){return 0===this.length()}}},53002:function(e,t,r){const o=r(23794),n=r(20890),s=r(47897),i=r(61880),a=r(94111),c=r(87872),u=r(45022),d=r(75776),p=r(22394),l=r(424).BadCredentialsError,h=r(95194),f=r(94912),m=r(41178),g=r(3145),y=r(14385),I=r(27004),w=r(43935),T=r(97032);e.exports=class{constructor(e){if(!e instanceof a||!e instanceof c)throw new l;this.signer=e,this.httpSender=void 0,this.maxRetries=5,this.maxTimeout=1e4,this.baseUrl=void 0,this.proxy=void 0,this.customHeaders={},this.debug=void 0,this.licenses=[]}withMaxRetries(e){return this.maxRetries=e,this}withMaxTimeout(e){return this.maxTimeout=e,this}withSender(e){return this.httpSender=e,this}withBaseUrl(e){return this.baseUrl=e,this}withProxy(e,t,r,o,n){return this.proxy={host:e,port:t,protocol:r},o&&n&&(this.proxy.auth={username:o,password:n}),this}withCustomHeaders(e){return this.customHeaders=e,this}withDebug(){return this.debug=!0,this}withLicenses(e){return this.licenses=e,this}buildSender(){if(this.httpSender)return this.httpSender;const e=new o(this.maxTimeout,this.maxRetries,this.proxy,this.debug),t=new d(e),r=new n(t,this.signer),a=new i(r),c=new u(a,this.customHeaders),l=new s(c,this.baseUrl);return new p(l,this.licenses)}buildClient(e,t){return this.baseUrl||(this.baseUrl=e),new t(this.buildSender())}buildUsStreetApiClient(){return this.buildClient("https://us-street.api.smartystreets.com/street-address",h)}buildUsZipcodeClient(){return this.buildClient("https://us-zipcode.api.smartystreets.com/lookup",f)}buildUsAutocompleteClient(){return this.buildClient("https://us-autocomplete.api.smartystreets.com/suggest",m)}buildUsAutocompleteProClient(){return this.buildClient("https://us-autocomplete-pro.api.smartystreets.com/lookup",g)}buildUsExtractClient(){return this.buildClient("https://us-extract.api.smartystreets.com/",y)}buildInternationalStreetClient(){return this.buildClient("https://international-street.api.smartystreets.com/verify",I)}buildUsReverseGeoClient(){return this.buildClient("https://us-reverse-geo.api.smartystreets.com/lookup",w)}buildInternationalAddressAutocompleteClient(){return this.buildClient("https://international-autocomplete.api.smartystreets.com/lookup",T)}}},45022:function(e){e.exports=class{constructor(e,t){this.sender=e,this.customHeaders=t}send(e){for(let t in this.customHeaders)e.headers[t]=this.customHeaders[t];return new Promise(((t,r)=>{this.sender.send(e).then(t).catch(r)}))}}},424:function(e){class t extends Error{constructor(e){super(e)}}e.exports={BatchFullError:class extends t{constructor(){super("A batch can contain a max of 100 lookups.")}},BatchEmptyError:class extends t{constructor(){super("A batch must contain at least 1 lookup.")}},UndefinedLookupError:class extends t{constructor(){super("The lookup provided is missing or undefined. Make sure you're passing a Lookup object.")}},BadCredentialsError:class extends t{constructor(){super("Unauthorized: The credentials were provided incorrectly or did not match any existing active credentials.")}},PaymentRequiredError:class extends t{constructor(){super("Payment Required: There is no active subscription for the account associated with the credentials submitted with the request.")}},RequestEntityTooLargeError:class extends t{constructor(){super("Request Entity Too Large: The request body has exceeded the maximum size.")}},BadRequestError:class extends t{constructor(){super("Bad Request (Malformed Payload): A GET request lacked a street field or the request body of a POST request contained malformed JSON.")}},UnprocessableEntityError:class extends t{constructor(e){super(e)}},TooManyRequestsError:class extends t{constructor(){super("When using the public 'website key' authentication, we restrict the number of requests coming from a given source over too short of a time.")}},InternalServerError:class extends t{constructor(){super("Internal Server Error.")}},ServiceUnavailableError:class extends t{constructor(){super("Service Unavailable. Try again later.")}},GatewayTimeoutError:class extends t{constructor(){super("The upstream data provider did not respond in a timely fashion and the request failed. A serious, yet rare occurrence indeed.")}}}},23794:function(e,t,r){const o=r(35978),n=r(62282),s=r(23889);e.exports=class{constructor(e=1e4,t=5,r,o=!1){s(n,{retries:t}),this.timeout=e,this.proxyConfig=r,o&&this.enableDebug()}buildRequestConfig({payload:e,parameters:t,headers:r,baseUrl:o}){let n={method:"GET",timeout:this.timeout,params:t,headers:r,baseURL:o,validateStatus:function(e){return e<500}};return e&&(n.method="POST",n.data=e),this.proxyConfig&&(n.proxy=this.proxyConfig),n}buildSmartyResponse(e,t){return e?new o(e.status,e.data):new o(void 0,void 0,t)}send(e){return new Promise(((t,r)=>{let o=this.buildRequestConfig(e);n(o).then((e=>{let o=this.buildSmartyResponse(e);o.statusCode>=400&&r(o),t(o)})).catch((e=>r(this.buildSmartyResponse(void 0,e))))}))}enableDebug(){n.interceptors.request.use((e=>(console.log("Request:\r\n",e),console.log("\r\n*******************************************\r\n"),e))),n.interceptors.response.use((e=>(console.log("Response:\r\n"),console.log("Status:",e.status,e.statusText),console.log("Headers:",e.headers),console.log("Data:",e.data),e)))}}},3700:function(e){e.exports=class{constructor(e){this.lookup=e,this.data={}}add(e,t){this.lookupFieldIsPopulated(t)&&(this.data[e]=this.lookup[t])}lookupFieldIsPopulated(e){return""!==this.lookup[e]&&void 0!==this.lookup[e]}}},22394:function(e){e.exports=class{constructor(e,t){this.sender=e,this.licenses=t}send(e){return 0!==this.licenses.length&&(e.parameters.license=this.licenses.join(",")),new Promise(((t,r)=>{this.sender.send(e).then(t).catch(r)}))}}},49278:function(e){e.exports=class{constructor(e){this.baseUrl="",this.payload=e,this.headers={"Content-Type":"application/json; charset=utf-8"},this.parameters={}}}},35978:function(e){e.exports=class{constructor(e,t,r){this.statusCode=e,this.payload=t,this.error=r}}},87872:function(e){e.exports=class{constructor(e,t){this.authId=e,this.hostName=t}sign(e){e.parameters.key=this.authId,this.hostName&&(e.headers.Referer="https://"+this.hostName)}}},20890:function(e,t,r){const o=r(424).UnprocessableEntityError,n=r(87872);e.exports=class{constructor(e,t){this.signer=t,this.sender=e}send(e){if(e.payload&&this.signer instanceof n)throw new o("Shared credentials cannot be used in batches with a length greater than 1 or when using the US Extract API.");return new Promise(((t,r)=>{this.signer.sign(e),this.sender.send(e).then(t).catch(r)}))}}},94111:function(e){e.exports=class{constructor(e,t){this.authId=e,this.authToken=t}sign(e){e.parameters["auth-id"]=this.authId,e.parameters["auth-token"]=this.authToken}}},75776:function(e,t,r){const o=r(424);e.exports=class{constructor(e){this.sender=e}send(e){return new Promise(((t,r)=>{this.sender.send(e).then(t).catch((e=>{switch(e.statusCode){case 400:e.error=new o.BadRequestError;break;case 401:e.error=new o.BadCredentialsError;break;case 402:e.error=new o.PaymentRequiredError;break;case 413:e.error=new o.RequestEntityTooLargeError;break;case 422:e.error=new o.UnprocessableEntityError("GET request lacked required fields.");break;case 429:e.error=new o.TooManyRequestsError;break;case 500:e.error=new o.InternalServerError;break;case 503:e.error=new o.ServiceUnavailableError;break;case 504:e.error=new o.GatewayTimeoutError}r(e)}))}))}}},97032:function(e,t,r){const o=r(424),n=r(49278),s=r(5711);e.exports=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new o.UndefinedLookupError;let t=new n;return t.parameters={search:e.search,country:e.country,max_results:e.max_results,include_only_administrative_area:e.include_only_administrative_area,include_only_locality:e.include_only_locality,include_only_postal_code:e.include_only_postal_code},new Promise(((r,o)=>{this.sender.send(t).then((t=>{var n;t.error&&o(t.error),e.result=(n=t.payload)&&null===n.candidates?[]:n.candidates.map((e=>new s(e))),r(e)})).catch(o)}))}}},53210:function(e){e.exports=class{constructor(e="",t="United States",r,o="",n="",s=""){this.result=[],this.search=e,this.country=t,this.max_results=r,this.include_only_administrative_area=o,this.include_only_locality=n,this.include_only_postal_code=s}}},5711:function(e){e.exports=class{constructor(e){this.street=e.street,this.locality=e.locality,this.administrativeArea=e.administrative_area,this.postalCode=e.postal_code,this.countryIso3=e.country_iso3}}},29232:function(e){e.exports=class{constructor(e){this.organization=e.organization,this.address1=e.address1,this.address2=e.address2,this.address3=e.address3,this.address4=e.address4,this.address5=e.address5,this.address6=e.address6,this.address7=e.address7,this.address8=e.address8,this.address9=e.address9,this.address10=e.address10,this.address11=e.address11,this.address12=e.address12,this.components={},void 0!==e.components&&(this.components.countryIso3=e.components.country_iso_3,this.components.superAdministrativeArea=e.components.super_administrative_area,this.components.administrativeArea=e.components.administrative_area,this.components.subAdministrativeArea=e.components.sub_administrative_area,this.components.dependentLocality=e.components.dependent_locality,this.components.dependentLocalityName=e.components.dependent_locality_name,this.components.doubleDependentLocality=e.components.double_dependent_locality,this.components.locality=e.components.locality,this.components.postalCode=e.components.postal_code,this.components.postalCodeShort=e.components.postal_code_short,this.components.postalCodeExtra=e.components.postal_code_extra,this.components.premise=e.components.premise,this.components.premiseExtra=e.components.premise_extra,this.components.premisePrefixNumber=e.components.premise_prefix_number,this.components.premiseNumber=e.components.premise_number,this.components.premiseType=e.components.premise_type,this.components.thoroughfare=e.components.thoroughfare,this.components.thoroughfarePredirection=e.components.thoroughfare_predirection,this.components.thoroughfarePostdirection=e.components.thoroughfare_postdirection,this.components.thoroughfareName=e.components.thoroughfare_name,this.components.thoroughfareTrailingType=e.components.thoroughfare_trailing_type,this.components.thoroughfareType=e.components.thoroughfare_type,this.components.dependentThoroughfare=e.components.dependent_thoroughfare,this.components.dependentThoroughfarePredirection=e.components.dependent_thoroughfare_predirection,this.components.dependentThoroughfarePostdirection=e.components.dependent_thoroughfare_postdirection,this.components.dependentThoroughfareName=e.components.dependent_thoroughfare_name,this.components.dependentThoroughfareTrailingType=e.components.dependent_thoroughfare_trailing_type,this.components.dependentThoroughfareType=e.components.dependent_thoroughfare_type,this.components.building=e.components.building,this.components.buildingLeadingType=e.components.building_leading_type,this.components.buildingName=e.components.building_name,this.components.buildingTrailingType=e.components.building_trailing_type,this.components.subBuildingType=e.components.sub_building_type,this.components.subBuildingNumber=e.components.sub_building_number,this.components.subBuildingName=e.components.sub_building_name,this.components.subBuilding=e.components.sub_building,this.components.postBox=e.components.post_box,this.components.postBoxType=e.components.post_box_type,this.components.postBoxNumber=e.components.post_box_number),this.analysis={},void 0!==e.analysis&&(this.analysis.verificationStatus=e.analysis.verification_status,this.analysis.addressPrecision=e.analysis.address_precision,this.analysis.maxAddressPrecision=e.analysis.max_address_precision,this.analysis.changes={},void 0!==e.analysis.changes&&(this.analysis.changes.organization=e.analysis.changes.organization,this.analysis.changes.address1=e.analysis.changes.address1,this.analysis.changes.address2=e.analysis.changes.address2,this.analysis.changes.address3=e.analysis.changes.address3,this.analysis.changes.address4=e.analysis.changes.address4,this.analysis.changes.address5=e.analysis.changes.address5,this.analysis.changes.address6=e.analysis.changes.address6,this.analysis.changes.address7=e.analysis.changes.address7,this.analysis.changes.address8=e.analysis.changes.address8,this.analysis.changes.address9=e.analysis.changes.address9,this.analysis.changes.address10=e.analysis.changes.address10,this.analysis.changes.address11=e.analysis.changes.address11,this.analysis.changes.address12=e.analysis.changes.address12,this.analysis.changes.components={},void 0!==e.analysis.changes.components&&(this.analysis.changes.components.countryIso3=e.analysis.changes.components.country_iso_3,this.analysis.changes.components.superAdministrativeArea=e.analysis.changes.components.super_administrative_area,this.analysis.changes.components.administrativeArea=e.analysis.changes.components.administrative_area,this.analysis.changes.components.subAdministrativeArea=e.analysis.changes.components.sub_administrative_area,this.analysis.changes.components.dependentLocality=e.analysis.changes.components.dependent_locality,this.analysis.changes.components.dependentLocalityName=e.analysis.changes.components.dependent_locality_name,this.analysis.changes.components.doubleDependentLocality=e.analysis.changes.components.double_dependent_locality,this.analysis.changes.components.locality=e.analysis.changes.components.locality,this.analysis.changes.components.postalCode=e.analysis.changes.components.postal_code,this.analysis.changes.components.postalCodeShort=e.analysis.changes.components.postal_code_short,this.analysis.changes.components.postalCodeExtra=e.analysis.changes.components.postal_code_extra,this.analysis.changes.components.premise=e.analysis.changes.components.premise,this.analysis.changes.components.premiseExtra=e.analysis.changes.components.premise_extra,this.analysis.changes.components.premisePrefixNumber=e.analysis.changes.components.premise_prefix_number,this.analysis.changes.components.premiseNumber=e.analysis.changes.components.premise_number,this.analysis.changes.components.premiseType=e.analysis.changes.components.premise_type,this.analysis.changes.components.thoroughfare=e.analysis.changes.components.thoroughfare,this.analysis.changes.components.thoroughfarePredirection=e.analysis.changes.components.thoroughfare_predirection,this.analysis.changes.components.thoroughfarePostdirection=e.analysis.changes.components.thoroughfare_postdirection,this.analysis.changes.components.thoroughfareName=e.analysis.changes.components.thoroughfare_name,this.analysis.changes.components.thoroughfareTrailingType=e.analysis.changes.components.thoroughfare_trailing_type,this.analysis.changes.components.thoroughfareType=e.analysis.changes.components.thoroughfare_type,this.analysis.changes.components.dependentThoroughfare=e.analysis.changes.components.dependent_thoroughfare,this.analysis.changes.components.dependentThoroughfarePredirection=e.analysis.changes.components.dependent_thoroughfare_predirection,this.analysis.changes.components.dependentThoroughfarePostdirection=e.analysis.changes.components.dependent_thoroughfare_postdirection,this.analysis.changes.components.dependentThoroughfareName=e.analysis.changes.components.dependent_thoroughfare_name,this.analysis.changes.components.dependentThoroughfareTrailingType=e.analysis.changes.components.dependent_thoroughfare_trailing_type,this.analysis.changes.components.dependentThoroughfareType=e.analysis.changes.components.dependent_thoroughfare_type,this.analysis.changes.components.building=e.analysis.changes.components.building,this.analysis.changes.components.buildingLeadingType=e.analysis.changes.components.building_leading_type,this.analysis.changes.components.buildingName=e.analysis.changes.components.building_name,this.analysis.changes.components.buildingTrailingType=e.analysis.changes.components.building_trailing_type,this.analysis.changes.components.subBuildingType=e.analysis.changes.components.sub_building_type,this.analysis.changes.components.subBuildingNumber=e.analysis.changes.components.sub_building_number,this.analysis.changes.components.subBuildingName=e.analysis.changes.components.sub_building_name,this.analysis.changes.components.subBuilding=e.analysis.changes.components.sub_building,this.analysis.changes.components.postBox=e.analysis.changes.components.post_box,this.analysis.changes.components.postBoxType=e.analysis.changes.components.post_box_type,this.analysis.changes.components.postBoxNumber=e.analysis.changes.components.post_box_number))),this.metadata={},void 0!==e.metadata&&(this.metadata.latitude=e.metadata.latitude,this.metadata.longitude=e.metadata.longitude,this.metadata.geocodePrecision=e.metadata.geocode_precision,this.metadata.maxGeocodePrecision=e.metadata.max_geocode_precision,this.metadata.addressFormat=e.metadata.address_format)}}},27004:function(e,t,r){const o=r(49278),n=r(424),s=r(29232),i=r(87247),a=r(75561).internationalStreet;e.exports=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new n.UndefinedLookupError;let t=new o;return t.parameters=i(e,a),new Promise(((r,o)=>{this.sender.send(t).then((t=>{t.error&&o(t.error),r(function(e,t){return e.payload.map((e=>{t.result.push(new s(e))})),t}(t,e))})).catch(o)}))}}},7884:function(e,t,r){const o=r(424).UnprocessableEntityError;function n(e){return!e||e.replace(/\s/g,"").length<1}function s(e){return!n(e)}e.exports=class{constructor(e,t){this.result=[],this.country=e,this.freeform=t,this.address1=void 0,this.address2=void 0,this.address3=void 0,this.address4=void 0,this.organization=void 0,this.locality=void 0,this.administrativeArea=void 0,this.postalCode=void 0,this.geocode=void 0,this.language=void 0,this.inputId=void 0,this.ensureEnoughInfo=this.ensureEnoughInfo.bind(this),this.ensureValidData=this.ensureValidData.bind(this)}ensureEnoughInfo(){if(n(this.country))throw new o("Country field is required.");if(s(this.freeform))return!0;if(n(this.address1))throw new o("Either freeform or address1 is required.");if(s(this.postalCode))return!0;if(n(this.locality)||n(this.administrativeArea))throw new o("Insufficient information: One or more required fields were not set on the lookup.");return!0}ensureValidData(){if((()=>s(this.geocode)&&"true"!==this.geocode.toLowerCase())())throw new o("Invalid input: geocode can only be set to 'true' (default is 'false'.");if((()=>{let e=e=>this.language.toLowerCase()===e;return s(this.language)&&!(e("latin")||e("native"))})())throw new o("Invalid input: language can only be set to 'latin' or 'native'. When not set, the the output language will match the language of the input values.");return!0}}},41178:function(e,t,r){const o=r(424),n=r(49278),s=r(98205);e.exports=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new o.UndefinedLookupError;let t=new n;return t.parameters=function(e){return{prefix:e.prefix,suggestions:e.maxSuggestions,city_filter:t(e.cityFilter,","),state_filter:t(e.stateFilter,","),prefer:t(e.prefer,";"),prefer_ratio:e.preferRatio,geolocate:e.geolocate,geolocate_precision:e.geolocatePrecision};function t(e,t){if(e.length)return e.join(t)}}(e),new Promise(((r,o)=>{this.sender.send(t).then((t=>{var n;t.error&&o(t.error),e.result=null===(n=t.payload).suggestions?[]:n.suggestions.map((e=>new s(e))),r(e)})).catch(o)}))}}},71002:function(e){e.exports=class{constructor(e){this.result=[],this.prefix=e,this.maxSuggestions=void 0,this.cityFilter=[],this.stateFilter=[],this.prefer=[],this.preferRatio=void 0,this.geolocate=void 0,this.geolocatePrecision=void 0}}},98205:function(e){e.exports=class{constructor(e){this.text=e.text,this.streetLine=e.street_line,this.city=e.city,this.state=e.state}}},3145:function(e,t,r){const o=r(424),n=r(49278),s=r(30847);e.exports=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new o.UndefinedLookupError;let t=new n;return t.parameters=function(e){return{search:e.search,selected:e.selected,max_results:e.maxResults,include_only_cities:t(e.includeOnlyCities,";"),include_only_states:t(e.includeOnlyStates,";"),include_only_zip_codes:t(e.includeOnlyZIPCodes,";"),exclude_states:t(e.excludeStates,";"),prefer_cities:t(e.preferCities,";"),prefer_states:t(e.preferStates,";"),prefer_zip_codes:t(e.preferZIPCodes,";"),prefer_ratio:e.preferRatio,prefer_geolocation:e.preferGeolocation,source:e.source};function t(e,t){if(e.length)return e.join(t)}}(e),new Promise(((r,o)=>{this.sender.send(t).then((t=>{var n;t.error&&o(t.error),e.result=null===(n=t.payload).suggestions?[]:n.suggestions.map((e=>new s(e))),r(e)})).catch(o)}))}}},6680:function(e){e.exports=class{constructor(e){this.result=[],this.search=e,this.selected=void 0,this.maxResults=void 0,this.includeOnlyCities=[],this.includeOnlyStates=[],this.includeOnlyZIPCodes=[],this.excludeStates=[],this.preferCities=[],this.preferStates=[],this.preferZIPCodes=[],this.preferRatio=void 0,this.preferGeolocation=void 0,this.source=void 0}}},30847:function(e){e.exports=class{constructor(e){this.streetLine=e.street_line,this.secondary=e.secondary,this.city=e.city,this.state=e.state,this.zipcode=e.zipcode,this.entries=e.entries}}},94771:function(e,t,r){const o=r(39208);e.exports=class{constructor(e){this.text=e.text,this.verified=e.verified,this.line=e.line,this.start=e.start,this.end=e.end,this.candidates=e.api_output.map((e=>new o(e)))}}},14385:function(e,t,r){const o=r(424),n=r(49278),s=r(55565);e.exports=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new o.UndefinedLookupError;let t=new n(e.text);return t.parameters=function(e){return{html:e.html,aggressive:e.aggressive,addr_line_breaks:e.addressesHaveLineBreaks,addr_per_line:e.addressesPerLine}}(e),new Promise(((r,o)=>{this.sender.send(t).then((t=>{t.error&&o(t.error),e.result=new s(t.payload),r(e)})).catch(o)}))}}},2522:function(e){e.exports=class{constructor(e){this.result={meta:{},addresses:[]},this.text=e,this.html=void 0,this.aggressive=void 0,this.addressesHaveLineBreaks=void 0,this.addressesPerLine=void 0}}},55565:function(e,t,r){const o=r(94771);e.exports=class{constructor({meta:e,addresses:t}){this.meta={lines:e.lines,unicode:e.unicode,addressCount:e.address_count,verifiedCount:e.verified_count,bytes:e.bytes,characterCount:e.character_count},this.addresses=t.map((e=>new o(e)))}}},43935:function(e,t,r){const o=r(49278),n=r(5843),s=r(87247),i=r(75561).usReverseGeo,{UndefinedLookupError:a}=r(424);e.exports=class{constructor(e){this.sender=e}send(e){if(void 0===e)throw new a;let t=new o;return t.parameters=s(e,i),new Promise(((r,o)=>{this.sender.send(t).then((t=>{t.error&&o(t.error),r(function(e,t){return t.response=new n(e.payload),t}(t,e))})).catch(o)}))}}},53259:function(e,t,r){const o=r(5843);e.exports=class{constructor(e,t){this.latitude=e.toFixed(8),this.longitude=t.toFixed(8),this.response=new o}}},5843:function(e,t,r){const o=r(66223);e.exports=class{constructor(e){this.results=[],e&&e.results.map((e=>{this.results.push(new o(e))}))}}},66223:function(e){e.exports=class{constructor(e){this.distance=e.distance,this.address={},e.address&&(this.address.street=e.address.street,this.address.city=e.address.city,this.address.state_abbreviation=e.address.state_abbreviation,this.address.zipcode=e.address.zipcode),this.coordinate={},e.coordinate&&(this.coordinate.latitude=e.coordinate.latitude,this.coordinate.longitude=e.coordinate.longitude,this.coordinate.accuracy=e.coordinate.accuracy,1===e.coordinate.license?this.coordinate.license="SmartyStreets Proprietary":this.coordinate.license="SmartyStreets")}}},39208:function(e){e.exports=class{constructor(e){this.inputIndex=e.input_index,this.candidateIndex=e.candidate_index,this.addressee=e.addressee,this.deliveryLine1=e.delivery_line_1,this.deliveryLine2=e.delivery_line_2,this.lastLine=e.last_line,this.deliveryPointBarcode=e.delivery_point_barcode,this.components={},void 0!==e.components&&(this.components.urbanization=e.components.urbanization,this.components.primaryNumber=e.components.primary_number,this.components.streetName=e.components.street_name,this.components.streetPredirection=e.components.street_predirection,this.components.streetPostdirection=e.components.street_postdirection,this.components.streetSuffix=e.components.street_suffix,this.components.secondaryNumber=e.components.secondary_number,this.components.secondaryDesignator=e.components.secondary_designator,this.components.extraSecondaryNumber=e.components.extra_secondary_number,this.components.extraSecondaryDesignator=e.components.extra_secondary_designator,this.components.pmbDesignator=e.components.pmb_designator,this.components.pmbNumber=e.components.pmb_number,this.components.cityName=e.components.city_name,this.components.defaultCityName=e.components.default_city_name,this.components.state=e.components.state_abbreviation,this.components.zipCode=e.components.zipcode,this.components.plus4Code=e.components.plus4_code,this.components.deliveryPoint=e.components.delivery_point,this.components.deliveryPointCheckDigit=e.components.delivery_point_check_digit),this.metadata={},void 0!==e.metadata&&(this.metadata.recordType=e.metadata.record_type,this.metadata.zipType=e.metadata.zip_type,this.metadata.countyFips=e.metadata.county_fips,this.metadata.countyName=e.metadata.county_name,this.metadata.carrierRoute=e.metadata.carrier_route,this.metadata.congressionalDistrict=e.metadata.congressional_district,this.metadata.buildingDefaultIndicator=e.metadata.building_default_indicator,this.metadata.rdi=e.metadata.rdi,this.metadata.elotSequence=e.metadata.elot_sequence,this.metadata.elotSort=e.metadata.elot_sort,this.metadata.latitude=e.metadata.latitude,this.metadata.longitude=e.metadata.longitude,1===e.metadata.coordinate_license?this.metadata.coordinateLicense="SmartyStreets Proprietary":this.metadata.coordinateLicense="SmartyStreets",this.metadata.precision=e.metadata.precision,this.metadata.timeZone=e.metadata.time_zone,this.metadata.utcOffset=e.metadata.utc_offset,this.metadata.obeysDst=e.metadata.dst,this.metadata.isEwsMatch=e.metadata.ews_match),this.analysis={},void 0!==e.analysis&&(this.analysis.dpvMatchCode=e.analysis.dpv_match_code,this.analysis.dpvFootnotes=e.analysis.dpv_footnotes,this.analysis.cmra=e.analysis.dpv_cmra,this.analysis.vacant=e.analysis.dpv_vacant,this.analysis.noStat=e.analysis.dpv_no_stat,this.analysis.active=e.analysis.active,this.analysis.isEwsMatch=e.analysis.ews_match,this.analysis.footnotes=e.analysis.footnotes,this.analysis.lacsLinkCode=e.analysis.lacslink_code,this.analysis.lacsLinkIndicator=e.analysis.lacslink_indicator,this.analysis.isSuiteLinkMatch=e.analysis.suitelink_match,this.analysis.enhancedMatch=e.analysis.enhanced_match)}}},95194:function(e,t,r){const o=r(39208),n=r(94535),s=r(32293),i=r(424).UndefinedLookupError,a=r(56666),c=r(75561).usStreet;e.exports=class{constructor(e){this.sender=e}send(e){const t=e instanceof n;if(!(t||e instanceof s))throw new i;let r;return t?(null==e.maxCandidates&&"enhanced"==e.match&&(e.maxCandidates=5),r=new s,r.add(e)):r=e,a(r,this.sender,o,c)}}},94535:function(e){e.exports=class{constructor(e,t,r,o,n,s,i,a,c,u,d,p){this.street=e,this.street2=t,this.secondary=r,this.city=o,this.state=n,this.zipCode=s,this.lastLine=i,this.addressee=a,this.urbanization=c,this.match=u,this.maxCandidates=d,this.inputId=p,this.result=[]}}},94912:function(e,t,r){const o=r(73976),n=r(12053),s=r(32293),i=r(424).UndefinedLookupError,a=r(56666),c=r(75561).usZipcode;e.exports=class{constructor(e){this.sender=e}send(e){const t=e instanceof o;if(!(t||e instanceof s))throw new i;let r;return t?(r=new s,r.add(e)):r=e,a(r,this.sender,n,c)}}},73976:function(e){e.exports=class{constructor(e,t,r,o){this.city=e,this.state=t,this.zipCode=r,this.inputId=o,this.result=[]}}},12053:function(e){e.exports=class{constructor(e){this.inputIndex=e.input_index,this.status=e.status,this.reason=e.reason,this.valid=void 0===this.status&&void 0===this.reason,this.cities=e.city_states?e.city_states.map((e=>({city:e.city,stateAbbreviation:e.state_abbreviation,state:e.state,mailableCity:e.mailable_city}))):[],this.zipcodes=e.zipcodes?e.zipcodes.map((e=>({zipcode:e.zipcode,zipcodeType:e.zipcode_type,defaultCity:e.default_city,countyFips:e.county_fips,countyName:e.county_name,latitude:e.latitude,longitude:e.longitude,precision:e.precision,stateAbbreviation:e.state_abbreviation,state:e.state,alternateCounties:e.alternate_counties?e.alternate_counties.map((e=>({countyFips:e.county_fips,countyName:e.county_name,stateAbbreviation:e.state_abbreviation,state:e.state}))):[]}))):[]}}},75561:function(e){e.exports={usStreet:{street:"street",street2:"street2",secondary:"secondary",city:"city",state:"state",zipcode:"zipCode",lastline:"lastLine",addressee:"addressee",urbanization:"urbanization",match:"match",candidates:"maxCandidates"},usZipcode:{city:"city",state:"state",zipcode:"zipCode"},internationalStreet:{country:"country",freeform:"freeform",address1:"address1",address2:"address2",address3:"address3",address4:"address4",organization:"organization",locality:"locality",administrative_area:"administrativeArea",postal_code:"postalCode",geocode:"geocode",language:"language"},usReverseGeo:{latitude:"latitude",longitude:"longitude"}}},57641:function(e,t,r){const o=r(53002);function n(e){return new o(e)}e.exports={usStreet:function(e){return n(e).buildUsStreetApiClient()},usAutocomplete:function(e){return n(e).buildUsAutocompleteClient()},usAutocompletePro:function(e){return n(e).buildUsAutocompleteProClient()},usExtract:function(e){return n(e).buildUsExtractClient()},usZipcode:function(e){return n(e).buildUsZipcodeClient()},internationalStreet:function(e){return n(e).buildInternationalStreetClient()},usReverseGeo:function(e){return n(e).buildUsReverseGeoClient()},internationalAddressAutocomplete:function(e){return n(e).buildInternationalAddressAutocompleteClient()}}},87247:function(e,t,r){const o=r(3700);e.exports=(e,t)=>{let r=new o(e);for(let e in t)r.add(e,t[e]);return r.data}},56666:function(e,t,r){const o=r(49278),n=r(424),s=r(87247);e.exports=(e,t,r,i)=>{if(e.isEmpty())throw new n.BatchEmptyError;let a=new o;return 1===e.length()?a.parameters=c(e)[0]:a.payload=c(e),new Promise(((o,n)=>{t.send(a).then((t=>{t.error&&n(t.error),o(function(e,t){return t.payload.map((t=>{let o=new r(t);e.getByIndex(o.inputIndex).result.push(o)})),e}(e,t))})).catch(n)}));function c(e){return e.lookups.map((e=>s(e,i)))}}},92130:function(e,t,r){"use strict";const o=r(22037),n=r(82146),s=process.env;let i;function a(e){const t=function(e){if(!1===i)return 0;if(n("color=16m")||n("color=full")||n("color=truecolor"))return 3;if(n("color=256"))return 2;if(e&&!e.isTTY&&!0!==i)return 0;const t=i?1:0;if("win32"===process.platform){const e=o.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((e=>e in s))||"codeship"===s.CI_NAME?1:t;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:(s.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}n("no-color")||n("no-colors")||n("color=false")?i=!1:(n("color")||n("colors")||n("color=true")||n("color=always"))&&(i=!0),"FORCE_COLOR"in s&&(i=0===s.FORCE_COLOR.length||0!==parseInt(s.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},82146:function(e){"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",o=t.indexOf(r+e),n=t.indexOf("--");return-1!==o&&(-1===n||o<n)}},32002:function(e,t,r){"use strict";var o={"./models":function(){return Promise.all([r.e(753),r.e(56),r.e(829)]).then((function(){return function(){return r(22829)}}))},"./adapters":function(){return r.e(753).then((function(){return function(){return r(94753)}}))},"./services":function(){return Promise.all([r.e(753),r.e(56),r.e(732)]).then((function(){return function(){return r(3732)}}))},"./event-bus":function(){return Promise.all([r.e(753),r.e(857)]).then((function(){return function(){return r(32857)}}))}},n=function(e,t){return r.R=t,t=r.o(o,e)?o[e]():Promise.resolve().then((function(){throw new Error('Module "'+e+'" does not exist in container.')})),r.R=void 0,t},s=function(e,t){if(r.S){var o="default",n=r.S[o];if(n&&n!==e)throw new Error("Container initialization failed as it has already been initialized with a different share scope");return r.S[o]=e,r.I(o,t)}};r.d(t,{get:function(){return n},init:function(){return s}})},39491:function(e){"use strict";e.exports=require("assert")},6113:function(e){"use strict";e.exports=require("crypto")},82361:function(e){"use strict";e.exports=require("events")},13685:function(e){"use strict";e.exports=require("http")},95687:function(e){"use strict";e.exports=require("https")},41808:function(e){"use strict";e.exports=require("net")},22037:function(e){"use strict";e.exports=require("os")},12781:function(e){"use strict";e.exports=require("stream")},24404:function(e){"use strict";e.exports=require("tls")},76224:function(e){"use strict";e.exports=require("tty")},57310:function(e){"use strict";e.exports=require("url")},73837:function(e){"use strict";e.exports=require("util")},59796:function(e){"use strict";e.exports=require("zlib")},33220:function(e,t,r){"use strict";r.r(t),r.d(t,{customAlphabet:function(){return d},customRandom:function(){return u},nanoid:function(){return p},random:function(){return c},urlAlphabet:function(){return i}});var o=r(6113);let n,s,i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",a=e=>{!n||n.length<e?(n=Buffer.allocUnsafe(128*e),o.randomFillSync(n),s=0):s+e>n.length&&(o.randomFillSync(n),s=0),s+=e},c=e=>(a(e-=0),n.subarray(s-e,s)),u=(e,t,r)=>{let o=(2<<31-Math.clz32(e.length-1|1))-1,n=Math.ceil(1.6*o*t/e.length);return(s=t)=>{let i="";for(;;){let t=r(n),a=n;for(;a--;)if(i+=e[t[a]&o]||"",i.length===s)return i}}},d=(e,t=21)=>u(e,t,c),p=(e=21)=>{a(e-=0);let t="";for(let r=s-e;r<s;r++)t+=i[63&n[r]];return t}},88593:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},65557:function(e){"use strict";e.exports=JSON.parse('{"name":"kafkajs","version":"1.16.0","description":"A modern Apache Kafka client for node.js","author":"Tulio Ornelas <ornelas.tulio@gmail.com>","main":"index.js","types":"types/index.d.ts","license":"MIT","keywords":["kafka","sasl","scram"],"engines":{"node":">=10.13.0"},"repository":{"type":"git","url":"https://github.com/tulios/kafkajs.git"},"bugs":{"url":"https://github.com/tulios/kafkajs/issues"},"homepage":"https://kafka.js.org","scripts":{"jest":"export KAFKA_VERSION=${KAFKA_VERSION:=\'2.4\'} && NODE_ENV=test echo \\"KAFKA_VERSION: ${KAFKA_VERSION}\\" && KAFKAJS_DEBUG_PROTOCOL_BUFFERS=1 jest","test:local":"yarn jest --detectOpenHandles","test:debug":"NODE_ENV=test KAFKAJS_DEBUG_PROTOCOL_BUFFERS=1 node --inspect-brk $(yarn bin 2>/dev/null)/jest --detectOpenHandles --runInBand --watch","test:local:watch":"yarn test:local --watch","test":"yarn lint && JEST_JUNIT_OUTPUT_NAME=test-report.xml ./scripts/testWithKafka.sh \'yarn jest --ci --maxWorkers=4 --no-watchman --forceExit\'","lint":"find . -path ./node_modules -prune -o -path ./coverage -prune -o -path ./website -prune -o -name \'*.js\' -print0 | xargs -0 eslint","format":"find . -path ./node_modules -prune -o -path ./coverage -prune -o -path ./website -prune -o -name \'*.js\' -print0 | xargs -0 prettier --write","precommit":"lint-staged","test:group:broker":"yarn jest --forceExit --testPathPattern \'src/broker/.*\'","test:group:admin":"yarn jest --forceExit --testPathPattern \'src/admin/.*\'","test:group:producer":"yarn jest --forceExit --testPathPattern \'src/producer/.*\'","test:group:consumer":"yarn jest --forceExit --testPathPattern \'src/consumer/.*.spec.js\'","test:group:others":"yarn jest --forceExit --testPathPattern \'src/(?!(broker|admin|producer|consumer)/).*\'","test:group:oauthbearer":"OAUTHBEARER_ENABLED=1 yarn jest --forceExit src/producer/index.spec.js src/broker/__tests__/connect.spec.js src/consumer/__tests__/connection.spec.js src/broker/__tests__/disconnect.spec.js src/admin/__tests__/connection.spec.js src/broker/__tests__/reauthenticate.spec.js","test:group:broker:ci":"JEST_JUNIT_OUTPUT_NAME=test-report.xml ./scripts/testWithKafka.sh \\"yarn test:group:broker --ci --maxWorkers=4 --no-watchman\\"","test:group:admin:ci":"JEST_JUNIT_OUTPUT_NAME=test-report.xml ./scripts/testWithKafka.sh \\"yarn test:group:admin --ci --maxWorkers=4 --no-watchman\\"","test:group:producer:ci":"JEST_JUNIT_OUTPUT_NAME=test-report.xml ./scripts/testWithKafka.sh \\"yarn test:group:producer --ci --maxWorkers=4 --no-watchman\\"","test:group:consumer:ci":"JEST_JUNIT_OUTPUT_NAME=test-report.xml ./scripts/testWithKafka.sh \\"yarn test:group:consumer --ci --maxWorkers=4 --no-watchman\\"","test:group:others:ci":"JEST_JUNIT_OUTPUT_NAME=test-report.xml ./scripts/testWithKafka.sh \\"yarn test:group:others --ci --maxWorkers=4 --no-watchman\\"","test:group:oauthbearer:ci":"JEST_JUNIT_OUTPUT_NAME=test-report.xml COMPOSE_FILE=\'docker-compose.2_4_oauthbearer.yml\' ./scripts/testWithKafka.sh \\"yarn test:group:oauthbearer --ci --maxWorkers=4 --no-watchman\\"","test:types":"tsc -p types/"},"devDependencies":{"@types/node":"^12.0.8","@typescript-eslint/typescript-estree":"^1.10.2","eslint":"^6.8.0","eslint-config-prettier":"^6.0.0","eslint-config-standard":"^13.0.1","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^11.0.0","eslint-plugin-prettier":"^3.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.0","execa":"^2.0.3","glob":"^7.1.4","husky":"^3.0.1","ip":"^1.1.5","jest":"^25.1.0","jest-circus":"^25.1.0","jest-extended":"^0.11.2","jest-junit":"^10.0.0","jsonwebtoken":"^8.5.1","lint-staged":"^9.2.0","mockdate":"^2.0.5","prettier":"^1.18.2","semver":"^6.2.0","typescript":"^3.8.3","uuid":"^3.3.2"},"dependencies":{},"lint-staged":{"*.js":["prettier --write","git add"]}}')},27406:function(e){"use strict";e.exports={i8:"1.13.3"}}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return r[e](s,s.exports,n),s.exports}n.m=r,n.c=o,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return e+".js"},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){n.S={};var e={},t={};n.I=function(r,o){o||(o=[]);var s=t[r];if(s||(s=t[r]={}),!(o.indexOf(s)>=0)){if(o.push(s),e[r])return e[r];n.o(n.S,r)||(n.S[r]={});var i=n.S[r],a="microlib-example",c=function(e,t,r,o){var n=i[e]=i[e]||{},s=n[t];(!s||!s.loaded&&(!o!=!s.eager?o:a>s.from))&&(n[t]={get:r,from:a,eager:!!o})},u=[];return"default"===r&&(c("axios","0.21.4",(function(){return function(){return n(9669)}}),1),c("axios","0.26.1",(function(){return function(){return n(55503)}}),1),c("kafkajs","1.16.0",(function(){return function(){return n(54552)}}),1),c("nanoid","3.3.4",(function(){return function(){return n(33220)}}),1),c("smartystreets-javascript-sdk","1.13.3",(function(){return function(){return n(77889)}}),1)),e[r]=u.length?Promise.all(u).then((function(){return e[r]=1})):1}}}(),function(){var e=function(e){var t=function(e){return e.split(".").map((function(e){return+e==e?+e:e}))},r=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),o=r[1]?t(r[1]):[];return r[2]&&(o.length++,o.push.apply(o,t(r[2]))),r[3]&&(o.push([]),o.push.apply(o,t(r[3]))),o},t=function(r,o){if(0 in r){o=e(o);var n=r[0],s=n<0;s&&(n=-n-1);for(var i=0,a=1,c=!0;;a++,i++){var u,d,p=a<r.length?(typeof r[a])[0]:"";if(i>=o.length||"o"==(d=(typeof(u=o[i]))[0]))return!c||("u"==p?a>n&&!s:""==p!=s);if("u"==d){if(!c||"u"!=p)return!1}else if(c)if(p==d)if(a<=n){if(u!=r[a])return!1}else{if(s?u>r[a]:u<r[a])return!1;u!=r[a]&&(c=!1)}else if("s"!=p&&"n"!=p){if(s||a<=n)return!1;c=!1,a--}else{if(a<=n||d<p!=s)return!1;c=!1}else"s"!=p&&"n"!=p&&(c=!1,a--)}}var l=[],h=l.pop.bind(l);for(i=1;i<r.length;i++){var f=r[i];l.push(1==f?h()|h():2==f?h()&h():f?t(f,o):!h())}return!!h()},r=function(r,o,n){var s=r[o];return(o=Object.keys(s).reduce((function(r,o){return!t(n,o)||r&&!function(t,r){t=e(t),r=e(r);for(var o=0;;){if(o>=t.length)return o<r.length&&"u"!=(typeof r[o])[0];var n=t[o],s=(typeof n)[0];if(o>=r.length)return"u"==s;var i=r[o],a=(typeof i)[0];if(s!=a)return"o"==s&&"n"==a||"s"==a||"u"==s;if("o"!=s&&"u"!=s&&n!=i)return n<i;o++}}(r,o)?r:o}),0))&&s[o]},o=function(e){return function(t,r,o,s){var i=n.I(t);return i&&i.then?i.then(e.bind(e,t,n.S[t],r,o,s)):e(t,n.S[t],r,o,s)}}((function(e,t,o,s,i){var a=t&&n.o(t,o)&&r(t,o,s);return a?function(e){return e.loaded=1,e.get()}(a):i()})),s={},i={27283:function(){return o("default","kafkajs",[1,1,14,0],(function(){return function(){return n(54552)}}))},85056:function(){return o("default","nanoid",[1,3,1,12],(function(){return function(){return n(33220)}}))},34001:function(){return o("default","smartystreets-javascript-sdk",[1,1,6,0],(function(){return function(){return n(77889)}}))},62282:function(){return o("default","axios",[2,0,26,1],(function(){return function(){return n(55503)}}))}};[62282].forEach((function(e){n.m[e]=function(t){s[e]=0,delete n.c[e];var r=i[e]();if("function"!=typeof r)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=r()}}));var a={56:[85056],732:[34001],753:[27283]};n.f.consumes=function(e,t){n.o(a,e)&&a[e].forEach((function(e){if(n.o(s,e))return t.push(s[e]);var r=function(t){s[e]=0,n.m[e]=function(r){delete n.c[e],r.exports=t()}},o=function(t){delete s[e],n.m[e]=function(r){throw delete n.c[e],t}};try{var a=i[e]();a.then?t.push(s[e]=a.then(r).catch(o)):r(a)}catch(e){o(e)}}))}}(),e={55:0},t=function(t){var r=t.modules,o=t.ids,s=t.runtime;for(var i in r)n.o(r,i)&&(n.m[i]=r[i]);s&&s(n);for(var a=0;a<o.length;a++)e[o[a]]&&e[o[a]][0](),e[o[a]]=0},n.f.readFileVm=function(r,o){var s=e[r];if(0!==s)if(s)o.push(s[2]);else if(56!=r){var i=new Promise((async function(o,i){s=e[r]=[o,i];var a=require("path").join(__dirname,""+n.u(r)),c=require("fs");if(c.existsSync(a))console.log(a,"exists locally"),c.readFile(a,"utf-8",(function(e,r){if(e)return i(e);var o={};require("vm").runInThisContext("(function(exports, require, __dirname, __filename) {"+r+"\n})",a)(o,require,require("path").dirname(a),a),t(o)}));else{console.log("needs to load remote script"),console.log("before remote var creation"),console.log("before remote var creation",void 0);var u=void 0;if(console.log("remotes in chunk load",u),console.log("global.REMOTE_CONFIG",global.REMOTE_CONFIG),global.REMOTE_CONFIG&&!global.REMOTE_CONFIG.apps){if(global.loadedRemotes)for(const e in global.loadedRemotes)global.REMOTE_CONFIG[e]=global.loadedRemotes[e].path;Object.assign(global.REMOTE_CONFIG,u)}var d=global.REMOTE_CONFIG.apps;"function"==typeof d&&(d=await d()),console.log("requestedRemote",d);var p=new URL(d.split("@")[1]),l=n.u(r);console.log("remotes global",global.REMOTE_CONFIG),console.log("chunkname to request",l);var h=require("path").basename(p.pathname);p.pathname=p.pathname.replace(h,l),console.log("will load remote chunk",p.toString()),function(e,t,r){if("function"!=typeof(t=arguments[arguments.length-1]))throw new Error("last argument should be a function");if(2===arguments.length)e=arguments[0];else{if(3!==arguments.length)throw new Error("invalid number of arguments");e=new URL(arguments[1],arguments[0]).toString()}global.webpackChunkLoad?global.webpackChunkLoad(e).then((function(e){return e.text()})).then((function(e){t(null,e)})).catch((function(e){return console.error("Federated Chunk load failed",error),t(error)})):(e.startsWith("https")?require("https"):require("http")).get(e,(function(e){if(200===e.statusCode){let r="";e.setEncoding("utf8"),e.on("data",(e=>{r+=e})),e.on("end",(()=>{t(null,r)}))}else t(e)})).on("error",(e=>(console.error("Federated Chunk load failed",e),t(e))))}(p.toString(),(function(e,r){if(e)return console.error("error loading remote chunk",p.toString(),"got",r),i(e);var o={};require("vm").runInThisContext("(function(exports, require, __dirname, __filename) {"+r+"\n})",a)(o,require,require("path").dirname(a),a),t(o)}))}}));o.push(s[2]=i)}else e[r]=0};var s=n(32002);apps=s}();
//# sourceMappingURL=remoteEntry.js.map